[{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/accessibility/wcag-compliance.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api-contracts/endpoint-validation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/auth/logout/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/auth/validate-invite/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/chat/save-adr005.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/chat/version-conflict.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/client/consultant/unlink/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/clients/id/archive.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/invites/id/resend.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/invites/id/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/invites/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/onboarding/complete/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/onboarding/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/consultant/onboarding/start/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/crewai/retry/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/crewai/status/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/crewai/webhook/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/onboarding/brief/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/onboarding/start-adr005.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/settings/gate-policies/gate.route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/api/settings/gate-policies/route.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/business-requirements/marketing-promise-delivery.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/canvas-tdd-validation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/BusinessModelCanvas.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/CanvasEditor.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/CanvasGallery.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/OnboardingWizardV2-state.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/TestingBusinessIdeasCanvas.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/ValuePropositionCanvas.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/components/founders/FounderBadge.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/e2e/backend-integration.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/e2e/user-journeys.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/globalSetup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/globalTeardown.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useApprovals.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useClients.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useConsultantClients.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useCrewAIState.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useFounderStatus.test.tsx","messages":[{"ruleId":"react/display-name","severity":1,"message":"Component definition is missing display name","line":42,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"noDisplayName","endLine":44,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useFounderStatus Hook Tests\n *\n * Tests for the useFounderStatus hook that polls for AI founder status\n * using React Query.\n * @story US-F02\n*/\n\nimport { renderHook, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport React from 'react';\nimport { useFounderStatus, getFounderStatus, type FounderWithStatus } from '@/hooks/useFounderStatus';\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\n// Mock founder-mapping\njest.mock('@/lib/founders/founder-mapping', () => ({\n  AI_FOUNDERS: {\n    sage: { id: 'sage', name: 'Sage', title: 'Chief Strategy Officer' },\n    forge: { id: 'forge', name: 'Forge', title: 'Chief Technology Officer' },\n    pulse: { id: 'pulse', name: 'Pulse', title: 'Chief Marketing Officer' },\n  },\n  getAllFounders: () => [\n    { id: 'sage', name: 'Sage', title: 'Chief Strategy Officer', role: 'strategy' },\n    { id: 'forge', name: 'Forge', title: 'Chief Technology Officer', role: 'technology' },\n    { id: 'pulse', name: 'Pulse', title: 'Chief Marketing Officer', role: 'marketing' },\n  ],\n}));\n\n// Create wrapper with QueryClient\nconst createWrapper = () => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: {\n        retry: false,\n        gcTime: 0,\n        staleTime: 0,\n      },\n    },\n  });\n  return ({ children }: { children: React.ReactNode }) => (\n    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>\n  );\n};\n\ndescribe('useFounderStatus', () => {\n  const mockAgentResponse = {\n    success: true,\n    data: {\n      agents: [\n        {\n          id: 'sage',\n          name: 'Sage',\n          title: 'Chief Strategy Officer',\n          role: 'strategy',\n          status: 'running',\n          lastUpdated: '2026-01-18T12:00:00Z',\n          currentTask: 'Analyzing market trends',\n        },\n        {\n          id: 'forge',\n          name: 'Forge',\n          title: 'Chief Technology Officer',\n          role: 'technology',\n          status: 'idle',\n          lastUpdated: '2026-01-18T11:00:00Z',\n        },\n        {\n          id: 'pulse',\n          name: 'Pulse',\n          title: 'Chief Marketing Officer',\n          role: 'marketing',\n          status: 'idle',\n          lastUpdated: '2026-01-18T10:00:00Z',\n        },\n      ],\n      timestamp: '2026-01-18T12:00:00Z',\n    },\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: () => Promise.resolve(mockAgentResponse),\n    });\n  });\n\n  describe('data fetching', () => {\n    it('should fetch founder status on mount', async () => {\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      expect(global.fetch).toHaveBeenCalledWith('/api/agents/status');\n      expect(result.current.founders).toHaveLength(3);\n    });\n\n    it('should merge agent status with founder definitions', async () => {\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      const sage = result.current.founders.find(f => f.id === 'sage');\n      expect(sage).toBeDefined();\n      expect(sage?.status).toBe('running');\n      expect(sage?.currentTask).toBe('Analyzing market trends');\n    });\n\n    it('should detect active founder', async () => {\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      expect(result.current.activeFounder).toBeDefined();\n      expect(result.current.activeFounder?.id).toBe('sage');\n      expect(result.current.isAnalyzing).toBe(true);\n    });\n\n    it('should return null activeFounder when no one is running', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: () => Promise.resolve({\n          ...mockAgentResponse,\n          data: {\n            ...mockAgentResponse.data,\n            agents: mockAgentResponse.data.agents.map(a => ({ ...a, status: 'idle' })),\n          },\n        }),\n      });\n\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      expect(result.current.activeFounder).toBeNull();\n      expect(result.current.isAnalyzing).toBe(false);\n    });\n\n    it('should handle fetch errors gracefully', async () => {\n      (global.fetch as jest.Mock).mockRejectedValue(new Error('Network error'));\n\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      // Wait for query to settle\n      await waitFor(() => {\n        // Query completed (not loading) or has error\n        expect(result.current.isLoading).toBe(false);\n      }, { timeout: 3000 });\n\n      // Hook should still return founder data from getAllFounders even with fetch error\n      expect(result.current.founders).toHaveLength(3);\n      // All founders have idle status when fetch fails\n      result.current.founders.forEach(founder => {\n        expect(founder.status).toBe('idle');\n      });\n    });\n  });\n\n  describe('default values', () => {\n    it('should use idle status for founders not in response', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: () => Promise.resolve({\n          success: true,\n          data: {\n            agents: [], // No agent data\n            timestamp: '2026-01-18T12:00:00Z',\n          },\n        }),\n      });\n\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      // All founders should have idle status\n      result.current.founders.forEach(founder => {\n        expect(founder.status).toBe('idle');\n      });\n    });\n\n    it('should provide timestamp from response', async () => {\n      const { result } = renderHook(() => useFounderStatus(), {\n        wrapper: createWrapper(),\n      });\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      expect(result.current.timestamp).toBe('2026-01-18T12:00:00Z');\n    });\n  });\n\n  describe('options', () => {\n    it('should not poll when enabled is false', async () => {\n      (global.fetch as jest.Mock).mockClear();\n\n      const { result } = renderHook(\n        () => useFounderStatus({ enabled: false }),\n        { wrapper: createWrapper() }\n      );\n\n      // Wait a tick for any potential fetch to occur\n      await new Promise(resolve => setTimeout(resolve, 50));\n\n      // When enabled is false, React Query doesn't execute the query\n      // So fetch should not have been called\n      expect(global.fetch).not.toHaveBeenCalled();\n\n      // The hook returns default state when disabled\n      expect(result.current.founders).toHaveLength(3); // From getAllFounders mock\n    });\n\n    it('should accept custom refetchInterval', async () => {\n      const { result } = renderHook(\n        () => useFounderStatus({ refetchInterval: 1000 }),\n        { wrapper: createWrapper() }\n      );\n\n      await waitFor(() => {\n        expect(result.current.isLoading).toBe(false);\n      });\n\n      // Hook should accept the option without error\n      expect(result.current.founders).toHaveLength(3);\n    });\n  });\n});\n\ndescribe('getFounderStatus', () => {\n  const mockFounders: FounderWithStatus[] = [\n    {\n      id: 'sage',\n      name: 'Sage',\n      title: 'Chief Strategy Officer',\n      role: 'strategy',\n      status: 'running',\n      currentTask: 'Analyzing',\n      lastUpdated: '2026-01-18T12:00:00Z',\n      color: 'blue',\n      crews: ['service', 'analysis'],\n      icon: jest.fn() as any,\n      bgColor: 'bg-blue-100',\n      textColor: 'text-blue-600',\n      ringColor: 'ring-blue-500',\n    },\n    {\n      id: 'forge',\n      name: 'Forge',\n      title: 'Chief Technology Officer',\n      role: 'technology',\n      status: 'idle',\n      lastUpdated: '2026-01-18T11:00:00Z',\n      color: 'orange',\n      crews: ['build'],\n      icon: jest.fn() as any,\n      bgColor: 'bg-orange-100',\n      textColor: 'text-orange-600',\n      ringColor: 'ring-orange-500',\n    },\n  ];\n\n  it('should return founder by id', () => {\n    const sage = getFounderStatus(mockFounders, 'sage');\n    expect(sage?.id).toBe('sage');\n    expect(sage?.status).toBe('running');\n  });\n\n  it('should return undefined for unknown id', () => {\n    const unknown = getFounderStatus(mockFounders, 'unknown' as any);\n    expect(unknown).toBeUndefined();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useGateAlerts.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useGatePolicies.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useIntegrations.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useOnboardingRecovery.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useProjects.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/hooks/useValidationProgress.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/integration/components/client-dashboard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/integration/contracts/webhook-validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/integration/flows/webhook-to-dashboard.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/lib/auth/hooks.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/lib/crewai/client.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/lib/founders/founder-mapping.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/pages/founder-dashboard.test.tsx","messages":[{"ruleId":"react/display-name","severity":1,"message":"Component definition is missing display name","line":21,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"noDisplayName","endLine":23,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Founder Dashboard Button Routing Tests\n *\n * Tests that the \"Create Your First Project\" and \"New Project\" buttons\n * route correctly to Alex's onboarding instead of the quick wizard.\n * @story US-F02\n*/\n\nimport { render, screen, waitFor } from '@testing-library/react';\n\n// Mock Next.js router\njest.mock('next/router', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    query: {},\n  }),\n}));\n\n// Mock Next.js Link component to capture href\njest.mock('next/link', () => {\n  return ({ children, href, ...props }: any) => {\n    return <a href={href} data-testid=\"next-link\" {...props}>{children}</a>;\n  };\n});\n\n// Mock hooks\nconst mockUseProjects = jest.fn();\nconst mockUseAuth = jest.fn();\nconst mockUseGateEvaluation = jest.fn();\nconst mockUseGateAlerts = jest.fn();\nconst mockUseRecentActivity = jest.fn();\nconst mockUseRecommendedActions = jest.fn();\n\njest.mock('@/hooks/useProjects', () => ({\n  useProjects: () => mockUseProjects(),\n}));\n\njest.mock('@/lib/auth/hooks', () => ({\n  useAuth: () => mockUseAuth(),\n}));\n\njest.mock('@/hooks/useGateEvaluation', () => ({\n  useGateEvaluation: () => mockUseGateEvaluation(),\n}));\n\njest.mock('@/hooks/useGateAlerts', () => ({\n  useGateAlerts: () => mockUseGateAlerts(),\n}));\n\njest.mock('@/hooks/useRecentActivity', () => ({\n  useRecentActivity: () => mockUseRecentActivity(),\n}));\n\njest.mock('@/hooks/useRecommendedActions', () => ({\n  useRecommendedActions: () => mockUseRecommendedActions(),\n}));\n\njest.mock('@/hooks/useFeatureFlag', () => ({\n  useFeatureFlag: () => ({ isEnabled: false, isLoading: false, error: null }),\n}));\n\n// Mock analytics\njest.mock('@/lib/analytics', () => ({\n  trackPageView: jest.fn(),\n  trackEvent: jest.fn(),\n}));\n\n// Mock DashboardLayout\njest.mock('@/components/layout/DashboardLayout', () => ({\n  DashboardLayout: ({ children }: any) => <div data-testid=\"dashboard-layout\">{children}</div>,\n}));\n\n// Mock other components that aren't relevant to this test\njest.mock('@/components/fit/FitDashboard', () => ({\n  FitDashboard: () => <div data-testid=\"fit-dashboard\" />,\n}));\n\njest.mock('@/components/gates/GateDashboard', () => ({\n  GateDashboard: () => <div data-testid=\"gate-dashboard\" />,\n}));\n\njest.mock('@/components/validation/ValidationResultsSummary', () => ({\n  ValidationResultsSummary: () => <div data-testid=\"validation-summary\" />,\n}));\n\njest.mock('@/components/gates/GateStatusBadge', () => ({\n  GateStatusBadge: () => <div data-testid=\"gate-badge\" />,\n}));\n\njest.mock('@/components/gates/GateReadinessIndicator', () => ({\n  GateReadinessIndicator: () => <div data-testid=\"gate-readiness\" />,\n}));\n\njest.mock('@/components/fit/EvidenceLedger', () => ({\n  EvidenceLedger: () => <div data-testid=\"evidence-ledger\" />,\n}));\n\njest.mock('@/components/founder/StageSelector', () => ({\n  StageSelector: () => <div data-testid=\"stage-selector\" />,\n}));\n\njest.mock('@/components/onboarding/ProjectCreationWizard', () => ({\n  ProjectCreationWizard: () => <div data-testid=\"project-wizard\" />,\n}));\n\njest.mock('@/components/assistant/DashboardAIAssistant', () => ({\n  DashboardAIAssistant: () => <div data-testid=\"ai-assistant\" />,\n}));\n\njest.mock('@/components/vpc', () => ({\n  VPCSummaryCard: () => <div data-testid=\"vpc-summary\" />,\n}));\n\njest.mock('@/components/signals', () => ({\n  InnovationPhysicsPanel: () => <div data-testid=\"innovation-panel\" />,\n}));\n\njest.mock('@/components/strategyzer', () => ({\n  AssumptionMap: () => <div data-testid=\"assumption-map\" />,\n  ExperimentCardsGrid: () => <div data-testid=\"experiment-cards\" />,\n  CanvasesGallery: () => <div data-testid=\"canvases-gallery\" />,\n}));\n\n// Import the component after all mocks\nimport FounderDashboard from '@/pages/founder-dashboard';\n\ndescribe('FounderDashboard Button Routing', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n\n    // Mock fetch for /api/onboarding/status - return no active session\n    global.fetch = jest.fn().mockResolvedValue({\n      ok: false,\n      json: () => Promise.resolve({ success: false }),\n    });\n\n    // Default mock returns\n    mockUseAuth.mockReturnValue({\n      user: { id: 'user-123', email: 'test@example.com' },\n    });\n\n    mockUseGateEvaluation.mockReturnValue({\n      result: null,\n      isLoading: false,\n    });\n\n    mockUseGateAlerts.mockReturnValue({\n      alerts: [],\n    });\n\n    mockUseRecentActivity.mockReturnValue({\n      activities: [],\n      isLoading: false,\n    });\n\n    mockUseRecommendedActions.mockReturnValue({\n      actions: [],\n      isLoading: false,\n    });\n  });\n\n  describe('empty state (no projects)', () => {\n    beforeEach(() => {\n      mockUseProjects.mockReturnValue({\n        projects: [],\n        isLoading: false,\n        error: null,\n      });\n    });\n\n    it('should render \"Start Validating Your Idea\" as primary CTA', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      const primaryButton = screen.getByRole('button', { name: /start validating your idea/i });\n      expect(primaryButton).toBeInTheDocument();\n    });\n\n    it('should link primary CTA to /onboarding/founder', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      const primaryLink = screen.getByRole('link', { name: /start validating your idea/i });\n      expect(primaryLink).toHaveAttribute('href', '/onboarding/founder');\n    });\n\n    it('should show Rocket icon for primary button', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      // The button should contain the Rocket icon\n      const primaryButton = screen.getByRole('button', { name: /start validating your idea/i });\n      expect(primaryButton.querySelector('svg')).toBeInTheDocument();\n    });\n  });\n\n  describe('dashboard with existing projects', () => {\n    beforeEach(() => {\n      mockUseProjects.mockReturnValue({\n        projects: [\n          {\n            id: 'project-123',\n            name: 'My Startup',\n            stage: 'FEASIBILITY',\n            gateStatus: 'Pending',\n          },\n        ],\n        isLoading: false,\n        error: null,\n      });\n    });\n\n    it('should render \"New Project\" button', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      const newProjectButton = screen.getByRole('button', { name: /new project/i });\n      expect(newProjectButton).toBeInTheDocument();\n    });\n\n    it('should link \"New Project\" to /onboarding/founder', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      const newProjectLink = screen.getByRole('link', { name: /new project/i });\n      expect(newProjectLink).toHaveAttribute('href', '/onboarding/founder');\n    });\n\n    it('should NOT link \"New Project\" to /projects/new (old behavior)', async () => {\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      const newProjectLink = screen.getByRole('link', { name: /new project/i });\n      expect(newProjectLink).not.toHaveAttribute('href', '/projects/new');\n    });\n  });\n\n  describe('loading state', () => {\n    it('should show loading indicator when projects are loading', () => {\n      mockUseProjects.mockReturnValue({\n        projects: [],\n        isLoading: true,\n        error: null,\n      });\n\n      render(<FounderDashboard />);\n\n      expect(screen.getByTestId('dashboard-loading')).toBeInTheDocument();\n    });\n  });\n\n  describe('error state', () => {\n    it('should show error message when projects fail to load', async () => {\n      mockUseProjects.mockReturnValue({\n        projects: [],\n        isLoading: false,\n        error: { message: 'Failed to load projects' },\n      });\n\n      render(<FounderDashboard />);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('dashboard-loading')).not.toBeInTheDocument();\n      });\n\n      expect(screen.getByText(/error loading projects/i)).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/production/deployment-validation.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/trial-guard.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/unit/business-logic/gate-scoring.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/unit/framework/test-helpers.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/utils/db-test-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/utils/specification-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/__tests__/utils/test-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/ad-platforms/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/audit/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/features/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/health/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/users/[id]/page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":139,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4334,4425],"text":"\n            The user you&apos;re looking for doesn't exist or you don't have access.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you&lsquo;re looking for doesn't exist or you don't have access.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4334,4425],"text":"\n            The user you&#39;re looking for doesn't exist or you don't have access.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you&rsquo;re looking for doesn't exist or you don't have access.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":139,"column":46,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn&apos;t exist or you don't have access.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn&lsquo;t exist or you don't have access.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn&#39;t exist or you don't have access.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn&rsquo;t exist or you don't have access.\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":139,"column":65,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn't exist or you don&apos;t have access.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn't exist or you don&lsquo;t have access.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn't exist or you don&#39;t have access.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4334,4425],"text":"\n            The user you're looking for doesn't exist or you don&rsquo;t have access.\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * Admin User Profile Page\n *\n * View detailed user profile with options to change role and view activity.\n *\n * @story US-A02, US-A08\n */\n\nimport { useEffect, useState, use } from 'react';\nimport Link from 'next/link';\nimport { AdminLayout } from '@/components/admin/AdminLayout';\nimport { RoleChangeDialog } from '@/components/admin/RoleChangeDialog';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport {\n  ArrowLeft,\n  User,\n  Mail,\n  Building,\n  Calendar,\n  Shield,\n  Briefcase,\n  Activity,\n  Clock,\n  Eye,\n  Loader2,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useRouter } from 'next/navigation';\nimport { formatDistanceToNow, format } from 'date-fns';\nimport type { AdminUserProfile } from '@/lib/types/admin';\nimport { DataExportPanel } from '@/components/admin/DataExportPanel';\nimport { IntegrityCheckPanel } from '@/components/admin/IntegrityCheckPanel';\nimport { BillingActionsPanel } from '@/components/admin/BillingActionsPanel';\n\nconst ROLE_BADGES: Record<string, { variant: 'default' | 'secondary' | 'outline' | 'destructive'; label: string }> = {\n  admin: { variant: 'destructive', label: 'Admin' },\n  founder: { variant: 'default', label: 'Founder' },\n  consultant: { variant: 'secondary', label: 'Consultant' },\n  trial: { variant: 'outline', label: 'Trial' },\n};\n\nexport default function AdminUserProfilePage({ params }: { params: Promise<{ id: string }> }) {\n  const { id: userId } = use(params);\n  const router = useRouter();\n  const [user, setUser] = useState<AdminUserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [roleDialogOpen, setRoleDialogOpen] = useState(false);\n  const [impersonating, setImpersonating] = useState(false);\n\n  useEffect(() => {\n    async function fetchUser() {\n      try {\n        const response = await fetch(`/api/admin/users/${userId}`);\n        const data = await response.json();\n\n        if (data.success) {\n          setUser(data.data.user);\n        } else {\n          console.error('Failed to fetch user:', data.error);\n          toast.error(data.error?.message || 'Failed to load user');\n        }\n      } catch (error) {\n        console.error('Fetch error:', error);\n        toast.error('Failed to load user profile');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchUser();\n  }, [userId]);\n\n  const handleRoleChanged = (newRole: string) => {\n    setUser((prev) => (prev ? { ...prev, role: newRole as AdminUserProfile['role'] } : null));\n  };\n\n  const handleImpersonate = async () => {\n    setImpersonating(true);\n\n    try {\n      const response = await fetch(`/api/admin/users/${userId}/impersonate`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ reason: 'Admin support debugging' }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        toast.success(`Now viewing as ${user?.email}`);\n        // Navigate to dashboard to view as user\n        router.push('/dashboard');\n      } else {\n        toast.error(data.error?.message || 'Failed to start impersonation');\n      }\n    } catch (error) {\n      console.error('Impersonation error:', error);\n      toast.error('Failed to start impersonation');\n    } finally {\n      setImpersonating(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <AdminLayout>\n        <div className=\"space-y-6\">\n          <Skeleton className=\"h-8 w-64\" />\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Skeleton className=\"h-48\" />\n            <Skeleton className=\"h-48\" />\n          </div>\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  if (!user) {\n    return (\n      <AdminLayout>\n        <div className=\"text-center py-12\">\n          <User className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n          <h2 className=\"text-xl font-semibold mb-2\">User Not Found</h2>\n          <p className=\"text-muted-foreground mb-4\">\n            The user you're looking for doesn't exist or you don't have access.\n          </p>\n          <Button asChild variant=\"outline\">\n            <Link href=\"/admin/users\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Users\n            </Link>\n          </Button>\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  return (\n    <AdminLayout>\n      <div className=\"space-y-6\">\n        {/* Back Link */}\n        <Button asChild variant=\"ghost\" className=\"-ml-4\">\n          <Link href=\"/admin/users\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Users\n          </Link>\n        </Button>\n\n        {/* User Header */}\n        <div className=\"flex items-start justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold tracking-tight\">\n              {user.fullName || 'Unnamed User'}\n            </h2>\n            <p className=\"text-muted-foreground flex items-center gap-2 mt-1\">\n              <Mail className=\"h-4 w-4\" />\n              {user.email}\n            </p>\n          </div>\n          <Badge\n            variant={ROLE_BADGES[user.role]?.variant || 'outline'}\n            className=\"text-sm\"\n          >\n            {ROLE_BADGES[user.role]?.label || user.role}\n          </Badge>\n        </div>\n\n        {/* Tabs */}\n        <Tabs defaultValue=\"profile\">\n          <TabsList>\n            <TabsTrigger value=\"profile\">Profile</TabsTrigger>\n            <TabsTrigger value=\"projects\">Projects ({user.projects.length})</TabsTrigger>\n            <TabsTrigger value=\"activity\">Activity</TabsTrigger>\n            <TabsTrigger value=\"actions\">Admin Actions</TabsTrigger>\n          </TabsList>\n\n          {/* Profile Tab */}\n          <TabsContent value=\"profile\" className=\"space-y-4 mt-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              {/* Basic Info */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <User className=\"h-5 w-5\" />\n                    Basic Information\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Full Name\n                      </label>\n                      <p className=\"mt-1\">{user.fullName || '-'}</p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Company\n                      </label>\n                      <p className=\"mt-1 flex items-center gap-1\">\n                        {user.company ? (\n                          <>\n                            <Building className=\"h-4 w-4\" />\n                            {user.company}\n                          </>\n                        ) : (\n                          '-'\n                        )}\n                      </p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Timezone\n                      </label>\n                      <p className=\"mt-1\">{user.timezone || '-'}</p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Language\n                      </label>\n                      <p className=\"mt-1\">{user.language || '-'}</p>\n                    </div>\n                  </div>\n                  {user.bio && (\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Bio\n                      </label>\n                      <p className=\"mt-1 text-sm\">{user.bio}</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Subscription Info */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Briefcase className=\"h-5 w-5\" />\n                    Subscription\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Tier\n                      </label>\n                      <p className=\"mt-1 capitalize\">{user.subscriptionTier}</p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Status\n                      </label>\n                      <p className=\"mt-1 capitalize\">{user.subscriptionStatus || '-'}</p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Plan Status\n                      </label>\n                      <p className=\"mt-1 capitalize\">{user.planStatus}</p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Trial Intent\n                      </label>\n                      <p className=\"mt-1\">{user.trialIntent || '-'}</p>\n                    </div>\n                  </div>\n                  {user.trialExpiresAt && (\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Trial Expires\n                      </label>\n                      <p className=\"mt-1 flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        {format(new Date(user.trialExpiresAt), 'PPP')}\n                      </p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Dates */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Calendar className=\"h-5 w-5\" />\n                    Account Dates\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Created\n                      </label>\n                      <p className=\"mt-1\">{format(new Date(user.createdAt), 'PPP')}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {formatDistanceToNow(new Date(user.createdAt), { addSuffix: true })}\n                      </p>\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        Last Updated\n                      </label>\n                      <p className=\"mt-1\">{format(new Date(user.updatedAt), 'PPP')}</p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {formatDistanceToNow(new Date(user.updatedAt), { addSuffix: true })}\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* IDs */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Internal IDs</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2\">\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">\n                        User ID\n                      </label>\n                      <p className=\"mt-1 font-mono text-sm\">{user.id}</p>\n                    </div>\n                    {user.consultantId && (\n                      <div>\n                        <label className=\"text-sm font-medium text-muted-foreground\">\n                          Consultant ID\n                        </label>\n                        <p className=\"mt-1 font-mono text-sm\">{user.consultantId}</p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Projects Tab */}\n          <TabsContent value=\"projects\" className=\"mt-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>User Projects</CardTitle>\n                <CardDescription>Projects owned by this user</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {user.projects.length === 0 ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Briefcase className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No projects found</p>\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Name</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Phase</TableHead>\n                        <TableHead>Created</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {user.projects.map((project) => (\n                        <TableRow key={project.id}>\n                          <TableCell className=\"font-medium\">{project.name}</TableCell>\n                          <TableCell>\n                            <Badge variant=\"outline\">{project.status}</Badge>\n                          </TableCell>\n                          <TableCell>\n                            {project.validationPhase !== null\n                              ? `Phase ${project.validationPhase}`\n                              : '-'}\n                          </TableCell>\n                          <TableCell className=\"text-muted-foreground\">\n                            {formatDistanceToNow(new Date(project.createdAt), {\n                              addSuffix: true,\n                            })}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Activity Tab */}\n          <TabsContent value=\"activity\" className=\"mt-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Activity className=\"h-5 w-5\" />\n                  Recent Activity\n                </CardTitle>\n                <CardDescription>\n                  Security events and account activity\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                {user.recentActivity.length === 0 ? (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Activity className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No recent activity</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {user.recentActivity.map((activity) => (\n                      <div\n                        key={activity.id}\n                        className=\"flex items-start gap-3 border-l-2 border-muted pl-4 py-2\"\n                      >\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm font-medium\">{activity.description}</p>\n                          <p className=\"text-xs text-muted-foreground\">\n                            {formatDistanceToNow(new Date(activity.createdAt), {\n                              addSuffix: true,\n                            })}\n                          </p>\n                        </div>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {activity.type}\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Admin Actions Tab */}\n          <TabsContent value=\"actions\" className=\"mt-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Shield className=\"h-5 w-5\" />\n                  Admin Actions\n                </CardTitle>\n                <CardDescription>\n                  Actions you can take on this user account\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {/* Role Change */}\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div>\n                    <h4 className=\"font-medium\">Change Role</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Current role: {ROLE_BADGES[user.role]?.label || user.role}\n                    </p>\n                  </div>\n                  <Button onClick={() => setRoleDialogOpen(true)}>\n                    Change Role\n                  </Button>\n                </div>\n\n                {/* Impersonate User */}\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div className=\"flex items-start gap-3\">\n                    <Eye className=\"h-5 w-5 mt-0.5 text-muted-foreground\" />\n                    <div>\n                      <h4 className=\"font-medium\">Impersonate User</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        View the app as this user (read-only mode)\n                      </p>\n                    </div>\n                  </div>\n                  <Button\n                    onClick={handleImpersonate}\n                    disabled={impersonating || user.role === 'admin'}\n                    variant={user.role === 'admin' ? 'outline' : 'default'}\n                  >\n                    {impersonating ? (\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    ) : (\n                      <Eye className=\"h-4 w-4 mr-2\" />\n                    )}\n                    {user.role === 'admin' ? 'Cannot Impersonate Admin' : 'View as User'}\n                  </Button>\n                </div>\n\n                {/* Data Export */}\n                <DataExportPanel userId={user.id} userEmail={user.email} />\n\n                {/* Integrity Check */}\n                <IntegrityCheckPanel userId={user.id} userEmail={user.email} />\n\n                {/* Billing Management */}\n                <BillingActionsPanel userId={user.id} userEmail={user.email} />\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        {/* Role Change Dialog */}\n        <RoleChangeDialog\n          userId={user.id}\n          userEmail={user.email}\n          currentRole={user.role}\n          open={roleDialogOpen}\n          onOpenChange={setRoleDialogOpen}\n          onRoleChanged={handleRoleChanged}\n        />\n      </div>\n    </AdminLayout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/users/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/admin/workflows/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/ad-platforms/[id]/health/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/ad-platforms/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/ad-platforms/[id]/status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/ad-platforms/connect/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/ad-platforms/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/audit/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/features/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/health/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/billing/credit/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/billing/refund/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/billing/retry/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/billing/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/export/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/impersonate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/integrity/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/users/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/workflows/[id]/retry/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/admin/workflows/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/[id]/metrics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/[id]/poll-status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/google/activate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/google/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/linkedin/activate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/linkedin/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/meta/activate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/campaigns/meta/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/images/generate/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/ads/images/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/agents/status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/analytics/dashboard/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/analyze/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/approvals/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/approvals/ad-creative/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/approvals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/approvals/webhook/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/assistant/chat/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/assistant/history/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/auth/logout/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/auth/validate-invite/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/client/consultant/unlink/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/[id]/archive/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/[id]/artefacts/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/[id]/discovery/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/[id]/tasks/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/clients/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/clients/[id]/archive/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/invites/[id]/resend/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/invites/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/invites/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/onboarding/complete/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/onboarding/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/consultant/onboarding/start/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/copy-bank/[projectId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/consultant/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/results/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/resume/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/retry/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/webhook/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/crewai/webhook/schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/cron/collect-ad-metrics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/cron/escalate-approvals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/cron/poll-ad-reviews/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/cron/sync-projects/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/health/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/imports/[type]/items/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/imports/[type]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/[type]/callback/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/[type]/connect/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/[type]/refresh/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/[type]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/[type]/sync/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/integrations/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/mappings/[id]/apply/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/mappings/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/mappings/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/onboarding/brief/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/onboarding/debug/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/projects/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/projects/create/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/projects/quick-start/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/approvals/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/gate-policies/[gate]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/gate-policies/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/notifications/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/preferences/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/2fa/enroll/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/2fa/recover/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/2fa/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/2fa/verify/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/login-history/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/password/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/sessions/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/settings/security/sessions/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/stripe/create-checkout-session/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/stripe/webhook/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/trial/allow/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/trial/status/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/v1/public/activity/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/v1/public/metrics/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/vpc/[projectId]/initialize/route.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":262,"column":5,"severity":1,"nodeType":null,"fix":{"range":[7227,7289],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * VPC Initialize API Route\n *\n * @story US-CP02\n *\n * POST /api/vpc/[projectId]/initialize\n *\n * Copies VPC data from crewai_validation_states to the editable\n * value_proposition_canvas table. Transforms CrewAI format to\n * array-based editable format with IDs and source tracking.\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@/lib/supabase/server';\nimport type { CustomerProfile, ValueMap, CustomerJob } from '@/types/crewai';\nimport type {\n  VPCJobItem,\n  VPCPainItem,\n  VPCGainItem,\n  VPCItem,\n  VPCPainRelieverItem,\n  VPCGainCreatorItem,\n  VPCOriginalData,\n} from '@/db/schema/value-proposition-canvas';\n\n// ============================================================================\n// HELPER FUNCTIONS - Transform CrewAI format to editable format\n// ============================================================================\n\nfunction generateId(): string {\n  return crypto.randomUUID();\n}\n\nfunction now(): string {\n  return new Date().toISOString();\n}\n\n/**\n * Transform CrewAI CustomerJob to VPCJobItem\n */\nfunction transformJob(job: CustomerJob): VPCJobItem {\n  const timestamp = now();\n  return {\n    id: generateId(),\n    functional: job.functional || '',\n    emotional: job.emotional || '',\n    social: job.social || '',\n    importance: job.importance || 5,\n    source: 'crewai',\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  };\n}\n\n/**\n * Transform CrewAI pains (string[]) with intensities to VPCPainItem[]\n */\nfunction transformPains(\n  pains: string[],\n  painIntensity: Record<string, number> = {}\n): VPCPainItem[] {\n  const timestamp = now();\n  return pains.map((pain) => ({\n    id: generateId(),\n    description: pain,\n    intensity: painIntensity[pain] || undefined,\n    source: 'crewai' as const,\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  }));\n}\n\n/**\n * Transform CrewAI gains (string[]) with importance to VPCGainItem[]\n */\nfunction transformGains(\n  gains: string[],\n  gainImportance: Record<string, number> = {}\n): VPCGainItem[] {\n  const timestamp = now();\n  return gains.map((gain) => ({\n    id: generateId(),\n    description: gain,\n    importance: gainImportance[gain] || undefined,\n    source: 'crewai' as const,\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  }));\n}\n\n/**\n * Transform string[] to VPCItem[]\n */\nfunction transformItems(items: string[]): VPCItem[] {\n  const timestamp = now();\n  return items.map((text) => ({\n    id: generateId(),\n    text,\n    source: 'crewai' as const,\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  }));\n}\n\n/**\n * Transform pain_relievers dict to VPCPainRelieverItem[]\n */\nfunction transformPainRelievers(\n  painRelievers: Record<string, string>\n): VPCPainRelieverItem[] {\n  const timestamp = now();\n  return Object.entries(painRelievers).map(([painDescription, relief]) => ({\n    id: generateId(),\n    painDescription,\n    relief,\n    source: 'crewai' as const,\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  }));\n}\n\n/**\n * Transform gain_creators dict to VPCGainCreatorItem[]\n */\nfunction transformGainCreators(\n  gainCreators: Record<string, string>\n): VPCGainCreatorItem[] {\n  const timestamp = now();\n  return Object.entries(gainCreators).map(([gainDescription, creator]) => ({\n    id: generateId(),\n    gainDescription,\n    creator,\n    source: 'crewai' as const,\n    createdAt: timestamp,\n    updatedAt: timestamp,\n  }));\n}\n\n/**\n * Format segment key from segment name\n * \"Small Business Owners\" -> \"small_business_owners\"\n */\nfunction formatSegmentKey(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '_')\n    .replace(/^_+|_+$/g, '');\n}\n\n// ============================================================================\n// POST - Initialize VPC from CrewAI validation state\n// ============================================================================\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: Promise<{ projectId: string }> }\n) {\n  try {\n    const supabase = await createClient();\n    const { projectId } = await params;\n\n    // Get the authenticated user\n    const {\n      data: { user },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n    }\n\n    // Verify user owns this project\n    const { data: project, error: projectError } = await supabase\n      .from('projects')\n      .select('id, user_id')\n      .eq('id', projectId)\n      .single();\n\n    if (projectError || !project) {\n      return NextResponse.json({ error: 'Project not found' }, { status: 404 });\n    }\n\n    if (project.user_id !== user.id) {\n      return NextResponse.json({ error: 'Forbidden' }, { status: 403 });\n    }\n\n    // Optional: force re-initialize (overwrite existing)\n    const body = await request.json().catch(() => ({}));\n    const forceReinitialize = body.force === true;\n\n    // Fetch the latest CrewAI validation state for this project\n    const { data: validationState, error: fetchError } = await supabase\n      .from('crewai_validation_states')\n      .select('id, kickoff_id, customer_profiles, value_maps')\n      .eq('project_id', projectId)\n      .order('created_at', { ascending: false })\n      .limit(1)\n      .single();\n\n    if (fetchError) {\n      if (fetchError.code === 'PGRST116') {\n        return NextResponse.json(\n          { error: 'No CrewAI validation data found for this project' },\n          { status: 404 }\n        );\n      }\n      console.error('Error fetching validation state:', fetchError);\n      return NextResponse.json(\n        { error: 'Failed to fetch CrewAI data' },\n        { status: 500 }\n      );\n    }\n\n    const customerProfiles = (validationState.customer_profiles || {}) as Record<\n      string,\n      CustomerProfile\n    >;\n    const valueMaps = (validationState.value_maps || {}) as Record<string, ValueMap>;\n\n    // Check if any segments exist\n    const segmentKeys = Object.keys(customerProfiles);\n    if (segmentKeys.length === 0) {\n      return NextResponse.json(\n        { error: 'No customer segments found in CrewAI data' },\n        { status: 404 }\n      );\n    }\n\n    // Check if VPC data already exists\n    const { data: existingVPC } = await supabase\n      .from('value_proposition_canvas')\n      .select('id, segment_key')\n      .eq('project_id', projectId);\n\n    if (existingVPC && existingVPC.length > 0 && !forceReinitialize) {\n      return NextResponse.json(\n        {\n          error: 'VPC data already exists. Use force=true to reinitialize.',\n          existingSegments: existingVPC.map((v) => v.segment_key),\n        },\n        { status: 409 }\n      );\n    }\n\n    // Delete existing VPC data if force reinitialize\n    if (forceReinitialize && existingVPC && existingVPC.length > 0) {\n      const { error: deleteError } = await supabase\n        .from('value_proposition_canvas')\n        .delete()\n        .eq('project_id', projectId);\n\n      if (deleteError) {\n        console.error('Error deleting existing VPC data:', deleteError);\n        return NextResponse.json(\n          { error: 'Failed to delete existing VPC data' },\n          { status: 500 }\n        );\n      }\n    }\n\n    // Transform and insert each segment\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const insertedSegments: any[] = [];\n\n    for (const segmentKey of segmentKeys) {\n      const profile = customerProfiles[segmentKey];\n      const valueMap = valueMaps[segmentKey] || {\n        products_services: [],\n        pain_relievers: {},\n        gain_creators: {},\n        differentiators: [],\n      };\n\n      // Transform to editable format\n      const jobs = (profile.jobs || []).map(transformJob);\n      const pains = transformPains(profile.pains || [], profile.pain_intensity);\n      const gains = transformGains(profile.gains || [], profile.gain_importance);\n      const productsAndServices = transformItems(valueMap.products_services || []);\n      const painRelievers = transformPainRelievers(valueMap.pain_relievers || {});\n      const gainCreators = transformGainCreators(valueMap.gain_creators || {});\n      const differentiators = transformItems(valueMap.differentiators || []);\n\n      // Store original data for reset capability\n      const originalData: VPCOriginalData = {\n        jobs,\n        pains,\n        gains,\n        productsAndServices,\n        painRelievers,\n        gainCreators,\n        differentiators,\n        resonanceScore: profile.resonance_score,\n      };\n\n      const insertData = {\n        project_id: projectId,\n        user_id: user.id,\n        segment_key: formatSegmentKey(segmentKey),\n        segment_name: profile.segment_name || segmentKey,\n        source: 'crewai',\n        kickoff_id: validationState.kickoff_id || null,\n        jobs,\n        pains,\n        gains,\n        resonance_score: profile.resonance_score || null,\n        products_and_services: productsAndServices,\n        pain_relievers: painRelievers,\n        gain_creators: gainCreators,\n        differentiators,\n        original_crewai_data: originalData,\n      };\n\n      const { data: inserted, error: insertError } = await supabase\n        .from('value_proposition_canvas')\n        .insert(insertData)\n        .select()\n        .single();\n\n      if (insertError) {\n        console.error(`Error inserting segment ${segmentKey}:`, insertError);\n        // Continue with other segments even if one fails\n      } else {\n        insertedSegments.push(inserted);\n      }\n    }\n\n    if (insertedSegments.length === 0) {\n      return NextResponse.json(\n        { error: 'Failed to initialize any VPC segments' },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        segments: insertedSegments,\n        count: insertedSegments.length,\n        source: 'crewai_validation_states',\n        kickoffId: validationState.kickoff_id,\n      },\n    });\n  } catch (error) {\n    console.error('Error in POST /api/vpc/[projectId]/initialize:', error);\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/api/vpc/[projectId]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/approvals/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/auth/auth-code-error/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/auth/callback/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/client/[id]/projects/new/page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":33,"column":99,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[877,995],"text":"\n          Use our AI-powered wizard to set up a comprehensive validation framework for this client&apos;s project\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[877,995],"text":"\n          Use our AI-powered wizard to set up a comprehensive validation framework for this client&lsquo;s project\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[877,995],"text":"\n          Use our AI-powered wizard to set up a comprehensive validation framework for this client&#39;s project\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[877,995],"text":"\n          Use our AI-powered wizard to set up a comprehensive validation framework for this client&rsquo;s project\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Client Project Creation Page\n *\n * @story US-C07\n */\n\n\"use client\"\n\nimport { useParams } from \"next/navigation\"\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\"\nimport { ProjectCreationWizard } from \"@/components/onboarding/ProjectCreationWizard\"\n\nexport default function NewClientProjectPage() {\n  const params = useParams()\n  const id = params?.id as string\n\n  if (!id) {\n    return <div>Client not found</div>\n  }\n\n  return (\n    <DashboardLayout\n      breadcrumbs={[\n        { title: \"Clients\", href: \"/clients\" },\n        { title: \"Client Details\", href: `/client/${id}` },\n        { title: \"New Project\", href: `/client/${id}/projects/new` },\n      ]}\n      userType=\"consultant\"\n    >\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold\">Create New Project for Client</h1>\n        <p className=\"text-muted-foreground mt-2\">\n          Use our AI-powered wizard to set up a comprehensive validation framework for this client's project\n        </p>\n      </div>\n      <ProjectCreationWizard clientId={id} />\n    </DashboardLayout>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/consultant/client/new/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/debug-oauth/page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":83,"column":97,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3019,3106],"text":" Add this URL to your Supabase project&apos;s GitHub OAuth configuration:\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3019,3106],"text":" Add this URL to your Supabase project&lsquo;s GitHub OAuth configuration:\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3019,3106],"text":" Add this URL to your Supabase project&#39;s GitHub OAuth configuration:\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3019,3106],"text":" Add this URL to your Supabase project&rsquo;s GitHub OAuth configuration:\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":87,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to &quot;Authorized redirect URIs\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to &ldquo;Authorized redirect URIs\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to &#34;Authorized redirect URIs\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to &rdquo;Authorized redirect URIs\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":87,"column":80,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to \"Authorized redirect URIs&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to \"Authorized redirect URIs&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to \"Authorized redirect URIs&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3307,3363],"text":"Add the redirect URL above to \"Authorized redirect URIs&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * OAuth Debug Page\n * \n * Helps diagnose OAuth configuration issues\n */\n\n\"use client\"\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { signInWithGitHub } from '@/lib/auth/actions';\n\nexport default function DebugOAuthPage() {\n  const [debugInfo, setDebugInfo] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const testOAuth = async () => {\n    setIsLoading(true);\n    try {\n      console.log('Environment variables:');\n      console.log('NODE_ENV:', process.env.NODE_ENV);\n      console.log('NEXT_PUBLIC_APP_URL:', process.env.NEXT_PUBLIC_APP_URL);\n      console.log('NEXT_PUBLIC_SUPABASE_URL:', process.env.NEXT_PUBLIC_SUPABASE_URL);\n      console.log('window.location.origin:', window.location.origin);\n      \n      const result = await signInWithGitHub();\n      setDebugInfo({\n        success: !result.error,\n        result,\n        environment: {\n          NODE_ENV: process.env.NODE_ENV,\n          NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL,\n          NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,\n          windowOrigin: window.location.origin,\n        }\n      });\n    } catch (error) {\n      setDebugInfo({\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n        environment: {\n          NODE_ENV: process.env.NODE_ENV,\n          NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL,\n          NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,\n          windowOrigin: window.location.origin,\n        }\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto py-8\">\n      <Card>\n        <CardHeader>\n          <CardTitle>OAuth Debug Tool</CardTitle>\n          <CardDescription>\n            Diagnose GitHub OAuth configuration issues\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Button onClick={testOAuth} disabled={isLoading}>\n            {isLoading ? 'Testing...' : 'Test GitHub OAuth'}\n          </Button>\n          \n          {debugInfo && (\n            <div className=\"mt-4\">\n              <h3 className=\"font-semibold mb-2\">Debug Information:</h3>\n              <pre className=\"bg-muted p-4 rounded-lg text-sm overflow-auto\">\n                {JSON.stringify(debugInfo, null, 2)}\n              </pre>\n              \n              <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n                <h4 className=\"font-semibold text-blue-900\">Expected Redirect URL:</h4>\n                <code className=\"text-blue-800\">\n                  {debugInfo.environment.NEXT_PUBLIC_APP_URL || debugInfo.environment.windowOrigin}/auth/callback\n                </code>\n                \n                <div className=\"mt-2\">\n                  <p className=\"text-sm text-blue-700\">\n                    <strong>To fix the 500 error:</strong> Add this URL to your Supabase project's GitHub OAuth configuration:\n                  </p>\n                  <ol className=\"text-sm text-blue-700 mt-1 ml-4 list-decimal\">\n                    <li>Go to Supabase Dashboard  Authentication  Providers  GitHub</li>\n                    <li>Add the redirect URL above to \"Authorized redirect URIs\"</li>\n                    <li>Make sure both localhost:3001 and your production URLs are listed</li>\n                  </ol>\n                </div>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/onboarding/consultant/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/onboarding/founder/page.tsx","messages":[{"ruleId":"@next/next/no-html-link-for-pages","severity":1,"message":"Do not use an `<a>` element to navigate to `/founder-dashboard/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages","line":82,"column":15,"nodeType":"JSXOpeningElement","endLine":82,"endColumn":85}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Founder Onboarding Page (Quick Start - ADR-006)\n *\n * Landing page for founder onboarding with Quick Start form.\n *\n * @story US-F01, US-FT01, US-E02\n */\n\nimport { Suspense } from 'react';\nimport { redirect } from 'next/navigation';\nimport Link from 'next/link';\nimport { ArrowLeft } from 'lucide-react';\nimport { createClient } from '@/lib/supabase/server';\nimport { QuickStartForm } from '@/components/onboarding/QuickStartForm';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Button } from '@/components/ui/button';\n\nexport const metadata = {\n  title: 'Start Validating | StartupAI',\n  description: 'Describe your business idea and let our AI research the market, analyze competitors, and generate a structured brief.',\n};\n\nasync function FounderOnboardingPage() {\n  // Check authentication\n  const supabase = await createClient();\n  const { data: { user }, error } = await supabase.auth.getUser();\n\n  if (error || !user) {\n    redirect('/login?returnUrl=/onboarding/founder');\n  }\n  const marketingUrl =\n    process.env.NEXT_PUBLIC_MARKETING_URL ??\n    (process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : '/');\n\n  // Check if user already has active projects\n  const { data: existingProjects } = await supabase\n    .from('projects')\n    .select('id')\n    .eq('user_id', user.id)\n    .eq('status', 'active')\n    .limit(1);\n\n  // If user has projects, they might want the dashboard instead\n  // But we still allow them to start a new project\n  const hasExistingProjects = existingProjects && existingProjects.length > 0;\n\n  return (\n    <main className=\"min-h-screen flex flex-col relative bg-background\">\n      {/* Subtle branded background (consistent with login) */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/[0.02] via-background to-accent/[0.02]\" />\n      <div className=\"absolute inset-0 bg-grid-pattern opacity-[0.02]\" />\n\n      {/* Skip navigation for accessibility */}\n      <a\n        href=\"#main-content\"\n        className=\"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50\"\n      >\n        Skip to main content\n      </a>\n\n      {/* Back link - goes to dashboard if user has projects, otherwise marketing site */}\n      <div className=\"relative z-10 p-6 lg:p-8\">\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link href={hasExistingProjects ? '/founder-dashboard' : marketingUrl}>\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            {hasExistingProjects ? 'Back to Dashboard' : 'Back to home'}\n          </Link>\n        </Button>\n      </div>\n\n      <div\n        id=\"main-content\"\n        role=\"main\"\n        aria-label=\"Start validation\"\n        className=\"relative z-10 container max-w-4xl mx-auto pb-12 px-4\"\n      >\n        {/* Optional: Show link to dashboard if user has projects */}\n        {hasExistingProjects && (\n          <div className=\"text-center mb-8\">\n            <p className=\"text-muted-foreground\">\n              Already have projects?{' '}\n              <a href=\"/founder-dashboard\" className=\"text-primary hover:underline\">\n                Go to Dashboard\n              </a>\n            </p>\n          </div>\n        )}\n\n        <Suspense fallback={<QuickStartLoadingSkeleton />}>\n          <QuickStartForm />\n        </Suspense>\n      </div>\n    </main>\n  );\n}\n\n// ============================================================================\n// Loading Skeleton Component\n// ============================================================================\n\nfunction QuickStartLoadingSkeleton() {\n  return (\n    <div className=\"w-full max-w-2xl mx-auto\">\n      <div className=\"rounded-xl border bg-card p-6 space-y-6\">\n        {/* Header skeleton */}\n        <div className=\"text-center space-y-4\">\n          <Skeleton className=\"h-12 w-12 rounded-full mx-auto\" />\n          <Skeleton className=\"h-8 w-64 mx-auto\" />\n          <Skeleton className=\"h-4 w-full max-w-md mx-auto\" />\n        </div>\n\n        {/* Textarea skeleton */}\n        <div className=\"space-y-2\">\n          <Skeleton className=\"h-4 w-32\" />\n          <Skeleton className=\"h-32 w-full\" />\n        </div>\n\n        {/* Hints toggle skeleton */}\n        <Skeleton className=\"h-10 w-full\" />\n\n        {/* Button skeleton */}\n        <Skeleton className=\"h-12 w-full\" />\n      </div>\n    </div>\n  );\n}\n\nexport default FounderOnboardingPage;\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/onboarding/integrations/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/onboarding/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/[id]/analysis/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/[id]/evidence/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/[id]/gate/page.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useGateEvaluation\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":41,"column":49,"nodeType":"Identifier","endLine":41,"endColumn":66},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useGateAlerts\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":51,"column":7,"nodeType":"Identifier","endLine":51,"endColumn":20},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":58,"column":3,"nodeType":"Identifier","endLine":58,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":63,"column":3,"nodeType":"Identifier","endLine":63,"endColumn":12},{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":84,"column":3,"nodeType":"Identifier","endLine":84,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Project Gate Page\n * \n * Full gate evaluation dashboard for a project.\n * Shows gate status, readiness, and alerts.\n *\n * @story US-H06, US-H07, US-H08, US-F15\n */\n\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'next/navigation';\nimport { GateDashboard } from '@/components/gates/GateDashboard';\nimport { useGateEvaluation } from '@/hooks/useGateEvaluation';\nimport { useGateAlerts } from '@/hooks/useGateAlerts';\nimport { useProjects } from '@/hooks/useProjects';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Bell, RefreshCw, Sparkles, Loader2 } from 'lucide-react';\nimport { createClient } from '@/lib/supabase/client';\n\nexport default function ProjectGatePage() {\n  const params = useParams();\n  const projectId = params?.id as string;\n  const { projects, isLoading: projectsLoading } = useProjects();\n  const currentProject = projects.find((project) => project.id === projectId);\n\n  const [analysisSummary, setAnalysisSummary] = useState<string | null>(null);\n  const [analysisLoading, setAnalysisLoading] = useState(false);\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [analysisId, setAnalysisId] = useState<string | null>(null);\n  const [analysisInsights, setAnalysisInsights] = useState<string[]>([]);\n\n  if (!projectId) {\n    return <div>Project not found</div>;\n  }\n\n  const stage = currentProject?.stage || 'DESIRABILITY';\n\n  const { result, isLoading, error, refetch } = useGateEvaluation({\n    projectId,\n    stage,\n    autoRefresh: true,\n  });\n\n  const {\n    alerts,\n    dismissAlert,\n    requestNotificationPermission,\n  } = useGateAlerts({\n    projectId,\n    stage,\n    readinessScore: result?.readiness_score || 0,\n  });\n\n  // Request notification permission on mount\n  useEffect(() => {\n    requestNotificationPermission();\n  }, [requestNotificationPermission]);\n\n  // Prefill from session storage for immediate feedback\n  useEffect(() => {\n    try {\n      const stored = sessionStorage.getItem('startupai:lastAnalysis');\n      if (stored) {\n        const parsed = JSON.parse(stored) as { summary?: string; analysisId?: string; insights?: { headline: string }[] };\n        if (parsed.summary) {\n          setAnalysisSummary(parsed.summary);\n        }\n        if (parsed.analysisId) {\n          setAnalysisId(parsed.analysisId);\n        }\n        if (Array.isArray(parsed.insights) && parsed.insights.length > 0) {\n          setAnalysisInsights(parsed.insights.map((item) => item.headline));\n        }\n        sessionStorage.removeItem('startupai:lastAnalysis');\n      }\n    } catch (error) {\n      console.warn('Unable to read cached analysis summary', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    const loadCrewAnalysis = async () => {\n      if (!projectId) return;\n\n      setAnalysisLoading(true);\n      setAnalysisError(null);\n\n      try {\n        const supabase = createClient();\n        const { data, error } = await supabase\n          .from('reports')\n          .select('id, title, content, generation_metadata, generated_at')\n          .eq('project_id', projectId)\n          .contains('generation_metadata', { kind: 'crew_analysis' })\n          .order('generated_at', { ascending: false })\n          .limit(1)\n          .maybeSingle();\n\n        if (error) {\n          throw error;\n        }\n\n        if (data) {\n          setAnalysisId((data.generation_metadata as any)?.analysis_id ?? data.id);\n          // Show full report content - no truncation\n          const summary = data.content ?? null;\n          setAnalysisSummary(summary);\n\n          const insights = Array.isArray((data.generation_metadata as any)?.insights)\n            ? ((data.generation_metadata as any).insights as string[])\n            : [];\n          if (insights.length > 0) {\n            setAnalysisInsights(insights);\n          }\n        }\n      } catch (loadError) {\n        console.error('Failed to load CrewAI analysis summary:', loadError);\n        setAnalysisError('Unable to load the latest CrewAI deliverable at the moment.');\n      } finally {\n        setAnalysisLoading(false);\n      }\n    };\n\n    loadCrewAnalysis();\n  }, [projectId]);\n\n  if ((projectsLoading || isLoading) && !result) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"flex items-center justify-center py-12\">\n          <RefreshCw className=\"h-8 w-8 animate-spin text-gray-400\" />\n          <span className=\"ml-3 text-gray-600\">Evaluating gate...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!projectsLoading && !currentProject) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card className=\"border-red-200 bg-red-50 p-6\">\n          <h2 className=\"text-lg font-semibold text-red-900\">Project Not Found</h2>\n          <p className=\"mt-2 text-sm text-red-700\">We could not locate this project.</p>\n        </Card>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card className=\"border-red-200 bg-red-50 p-6\">\n          <h2 className=\"text-lg font-semibold text-red-900\">\n            Error Evaluating Gate\n          </h2>\n          <p className=\"mt-2 text-sm text-red-700\">{error.message}</p>\n          <Button onClick={refetch} variant=\"outline\" className=\"mt-4\">\n            Try Again\n          </Button>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!result) {\n    return null;\n  }\n\n  return (\n    <div className=\"container mx-auto space-y-6 p-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\n            Gate Evaluation\n          </h1>\n          <p className=\"mt-1 text-gray-600 dark:text-gray-400\">\n            Evidence-led stage gate assessment for your project\n          </p>\n        </div>\n        <Button\n          onClick={refetch}\n          variant=\"outline\"\n          disabled={isLoading}\n          aria-label=\"Refresh gate evaluation\"\n        >\n          <RefreshCw className={`h-4 w-4 mr-2 ${isLoading ? 'animate-spin' : ''}`} />\n          Refresh\n        </Button>\n      </div>\n\n      <Card className=\"border-primary/20 bg-primary/5 p-6\" role=\"region\" aria-label=\"CrewAI strategic summary\">\n        <div className=\"flex items-start gap-3\">\n          <Sparkles className=\"h-6 w-6 text-primary mt-1\" aria-hidden=\"true\" />\n          <div className=\"flex-1 space-y-2\">\n            <div className=\"flex items-center justify-between gap-2\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-primary\">CrewAI Strategic Summary</h2>\n                {analysisId && (\n                  <p className=\"text-xs text-primary/70\">Run ID: {analysisId}</p>\n                )}\n              </div>\n              {analysisLoading && <Loader2 className=\"h-4 w-4 animate-spin text-primary\" aria-hidden=\"true\" />}\n            </div>\n            {analysisError && (\n              <p className=\"text-sm text-destructive\" role=\"alert\">{analysisError}</p>\n            )}\n            {analysisSummary ? (\n              <div\n                className=\"text-sm text-gray-800 dark:text-gray-200 max-h-96 overflow-y-auto whitespace-pre-wrap\"\n                aria-live=\"polite\"\n              >\n                {analysisSummary}\n              </div>\n            ) : (\n              !analysisLoading && (\n                <p className=\"text-sm text-muted-foreground\">\n                  AI deliverables will appear here once the CrewAI workflow finishes processing this project.\n                </p>\n              )\n            )}\n            {analysisInsights.length > 0 && (\n              <ul className=\"mt-3 space-y-1 text-sm text-gray-700 dark:text-gray-300\">\n                {analysisInsights.slice(0, 3).map((insight, index) => (\n                  <li key={index} className=\"flex items-start gap-2\">\n                    <span className=\"mt-1 h-1.5 w-1.5 rounded-full bg-primary\" aria-hidden=\"true\" />\n                    <span>{insight}</span>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n        </div>\n      </Card>\n\n      {/* Active Alerts */}\n      {alerts.length > 0 && (\n        <div className=\"space-y-2\">\n          {alerts.map((alert) => (\n            <Card\n              key={alert.id}\n              className=\"border-blue-200 bg-blue-50 dark:bg-blue-900/20 p-4\"\n              role=\"alert\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start gap-3\">\n                  <Bell className=\"h-5 w-5 text-blue-600 mt-0.5\" aria-hidden=\"true\" />\n                  <div>\n                    <p className=\"font-medium text-blue-900 dark:text-blue-300\">\n                      {alert.message}\n                    </p>\n                    <p className=\"mt-1 text-sm text-blue-700 dark:text-blue-400\">\n                      Complete the remaining criteria to pass this gate.\n                    </p>\n                  </div>\n                </div>\n                <Button\n                  onClick={() => dismissAlert(alert.id)}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  aria-label=\"Dismiss alert\"\n                >\n                  \n                </Button>\n              </div>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Gate Dashboard */}\n      <GateDashboard\n        projectId={projectId}\n        stage={result.stage as any}\n        gateStatus={result.status}\n        readinessScore={result.readiness_score}\n        evidenceCount={result.evidence_count}\n        experimentsCount={result.experiments_count}\n        failureReasons={result.reasons}\n      />\n\n      {/* Help Section */}\n      <Card className=\"p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n          About Stage Gates\n        </h2>\n        <div className=\"space-y-3 text-sm text-gray-600 dark:text-gray-400\">\n          <p>\n            <strong className=\"text-gray-900 dark:text-gray-100\">Stage gates</strong> are evidence-based checkpoints that ensure your project has sufficient validation before progressing.\n          </p>\n          <p>\n            Each gate evaluates multiple criteria including evidence quality, experiment count, evidence type diversity, and strength distribution.\n          </p>\n          <p>\n            The system automatically re-evaluates when you add new evidence, keeping your gate status up to date.\n          </p>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/[id]/report/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/current/evidence/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/project/current/gate/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/projects/new/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/settings/validation/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/signup/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/test-auth/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/upgrade/cancel/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/app/upgrade/success/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/Agents/AgentStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ClientForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/Dashboard/KanbanBoard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/Dashboard/MetricsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/AdAnalytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/AdPlatformHealth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/AdminNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/AuditLogFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/BillingActionsPanel.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBillingInfo'. Either include it or remove the dependency array.","line":75,"column":6,"nodeType":"ArrayExpression","endLine":75,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBillingInfo, userId]","fix":{"range":[1859,1867],"text":"[fetchBillingInfo, userId]"}}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":265,"column":44,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7765,7788],"text":"&apos;s account\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7765,7788],"text":"&lsquo;s account\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7765,7788],"text":"&#39;s account\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7765,7788],"text":"&rsquo;s account\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * Billing Actions Panel Component\n *\n * Admin component to view and manage user billing.\n *\n * @story US-A12\n */\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  CreditCard,\n  Loader2,\n  AlertCircle,\n  RefreshCw,\n  DollarSign,\n  Gift,\n  Calendar,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { format } from 'date-fns';\n\ninterface BillingInfo {\n  subscriptionTier: string;\n  subscriptionStatus: string;\n  planStatus: string;\n  trialExpiresAt: string | null;\n  stripeCustomerId: string | null;\n  actions: {\n    canRetryPayment: boolean;\n    canRefund: boolean;\n    canApplyCredit: boolean;\n    stripeIntegrationPending: boolean;\n  };\n}\n\ninterface BillingActionsPanelProps {\n  userId: string;\n  userEmail: string;\n}\n\ntype CreditType = 'trial_extension' | 'compensation' | 'promotional' | 'other';\n\nexport function BillingActionsPanel({ userId, userEmail }: BillingActionsPanelProps) {\n  const [loading, setLoading] = useState(true);\n  const [billingInfo, setBillingInfo] = useState<BillingInfo | null>(null);\n  const [creditDialogOpen, setCreditDialogOpen] = useState(false);\n  const [creditAmount, setCreditAmount] = useState('');\n  const [creditType, setCreditType] = useState<CreditType>('trial_extension');\n  const [creditReason, setCreditReason] = useState('');\n  const [applying, setApplying] = useState(false);\n\n  useEffect(() => {\n    fetchBillingInfo();\n  }, [userId]);\n\n  const fetchBillingInfo = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/admin/users/${userId}/billing`);\n      const data = await response.json();\n\n      if (data.success) {\n        setBillingInfo(data.data);\n      } else {\n        console.error('Failed to fetch billing info:', data.error);\n      }\n    } catch (error) {\n      console.error('Billing fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleApplyCredit = async () => {\n    if (!creditAmount || !creditReason.trim()) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    setApplying(true);\n\n    try {\n      const response = await fetch(`/api/admin/users/${userId}/billing/credit`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          amount: parseFloat(creditAmount),\n          type: creditType,\n          reason: creditReason,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        toast.success(data.data.message);\n        setCreditDialogOpen(false);\n        setCreditAmount('');\n        setCreditReason('');\n        fetchBillingInfo(); // Refresh\n      } else {\n        toast.error(data.error?.message || 'Failed to apply credit');\n      }\n    } catch (error) {\n      console.error('Credit error:', error);\n      toast.error('Failed to apply credit');\n    } finally {\n      setApplying(false);\n    }\n  };\n\n  const handleRetryPayment = async () => {\n    try {\n      const response = await fetch(`/api/admin/users/${userId}/billing/retry`, {\n        method: 'POST',\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        toast.success('Payment retry initiated');\n      } else {\n        toast.error(data.error?.message || 'Failed to retry payment');\n      }\n    } catch (error) {\n      console.error('Retry error:', error);\n      toast.error('Failed to retry payment');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"border rounded-lg p-4\">\n        <div className=\"flex items-center gap-3\">\n          <CreditCard className=\"h-5 w-5 text-muted-foreground\" />\n          <div className=\"flex-1\">\n            <div className=\"h-4 w-32 bg-muted rounded animate-pulse\" />\n            <div className=\"h-3 w-48 bg-muted rounded animate-pulse mt-2\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!billingInfo) {\n    return (\n      <div className=\"border rounded-lg p-4\">\n        <div className=\"flex items-center gap-3 text-muted-foreground\">\n          <AlertCircle className=\"h-5 w-5\" />\n          <span>Unable to load billing information</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"border rounded-lg\">\n        <div className=\"p-4\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-start gap-3\">\n              <CreditCard className=\"h-5 w-5 mt-0.5 text-muted-foreground\" />\n              <div>\n                <h4 className=\"font-medium\">Billing & Subscription</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Manage billing for {userEmail}\n                </p>\n              </div>\n            </div>\n\n            {billingInfo.actions.stripeIntegrationPending && (\n              <Badge variant=\"outline\" className=\"text-yellow-600 border-yellow-300\">\n                <AlertCircle className=\"h-3 w-3 mr-1\" />\n                Stripe Pending\n              </Badge>\n            )}\n          </div>\n\n          {/* Current Status */}\n          <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n            <div>\n              <label className=\"text-muted-foreground\">Tier</label>\n              <p className=\"font-medium capitalize\">{billingInfo.subscriptionTier}</p>\n            </div>\n            <div>\n              <label className=\"text-muted-foreground\">Status</label>\n              <p className=\"font-medium capitalize\">{billingInfo.subscriptionStatus || 'None'}</p>\n            </div>\n            <div>\n              <label className=\"text-muted-foreground\">Plan Status</label>\n              <p className=\"font-medium capitalize\">{billingInfo.planStatus}</p>\n            </div>\n            {billingInfo.trialExpiresAt && (\n              <div>\n                <label className=\"text-muted-foreground\">Trial Expires</label>\n                <p className=\"font-medium flex items-center gap-1\">\n                  <Calendar className=\"h-3 w-3\" />\n                  {format(new Date(billingInfo.trialExpiresAt), 'MMM d, yyyy')}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"border-t p-4 flex flex-wrap gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleRetryPayment}\n            disabled={!billingInfo.actions.canRetryPayment}\n          >\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Retry Payment\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            disabled={!billingInfo.actions.canRefund}\n          >\n            <DollarSign className=\"h-4 w-4 mr-2\" />\n            Process Refund\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setCreditDialogOpen(true)}\n            disabled={!billingInfo.actions.canApplyCredit}\n          >\n            <Gift className=\"h-4 w-4 mr-2\" />\n            Apply Credit\n          </Button>\n        </div>\n      </div>\n\n      {/* Credit Dialog */}\n      <Dialog open={creditDialogOpen} onOpenChange={setCreditDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Apply Credit</DialogTitle>\n            <DialogDescription>\n              Apply a credit to {userEmail}'s account\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Credit Type</label>\n              <Select\n                value={creditType}\n                onValueChange={(v) => setCreditType(v as CreditType)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"trial_extension\">Trial Extension (days)</SelectItem>\n                  <SelectItem value=\"compensation\">Compensation ($)</SelectItem>\n                  <SelectItem value=\"promotional\">Promotional ($)</SelectItem>\n                  <SelectItem value=\"other\">Other ($)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {creditType === 'trial_extension' ? 'Days to Extend' : 'Amount ($)'}\n              </label>\n              <Input\n                type=\"number\"\n                min=\"0\"\n                step={creditType === 'trial_extension' ? '1' : '0.01'}\n                value={creditAmount}\n                onChange={(e) => setCreditAmount(e.target.value)}\n                placeholder={creditType === 'trial_extension' ? '7' : '10.00'}\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                Reason <span className=\"text-red-500\">*</span>\n              </label>\n              <Textarea\n                value={creditReason}\n                onChange={(e) => setCreditReason(e.target.value)}\n                placeholder=\"Explain why you're applying this credit...\"\n                rows={3}\n              />\n            </div>\n\n            {creditType !== 'trial_extension' && (\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800\">\n                <AlertCircle className=\"h-4 w-4 inline mr-2\" />\n                Monetary credits require Stripe integration (coming soon).\n                This action will be logged for manual processing.\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setCreditDialogOpen(false)}\n              disabled={applying}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleApplyCredit}\n              disabled={applying || !creditAmount || !creditReason.trim()}\n            >\n              {applying ? (\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n              ) : (\n                <Gift className=\"h-4 w-4 mr-2\" />\n              )}\n              Apply Credit\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/BudgetConfig.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/DataExportPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/FeatureFlagEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/ImpersonationBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/IntegrityCheckPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/PlatformConnectModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/RoleChangeDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/SystemHealthCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/UserSearchForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/admin/WorkflowRetryDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ads/ImageSelectionFlow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ads/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/analytics/AnalyticsProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/analytics/ConsentBanner.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/analytics/ConsentBanner.tsx:46:9\n  44 |         // Consent expired, show banner again\n  45 |         localStorage.removeItem(CONSENT_STORAGE_KEY);\n> 46 |         setShowBanner(true);\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |       }\n  48 |     }\n  49 |   }, []);","line":46,"column":9,"nodeType":null,"endLine":46,"endColumn":22},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":101,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3003,3242],"text":"\n              We use privacy-friendly analytics to understand how you use our platform and make it better.\n              We don&apos;t sell your data or use it for advertising. You can change your preference anytime in settings.\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3003,3242],"text":"\n              We use privacy-friendly analytics to understand how you use our platform and make it better.\n              We don&lsquo;t sell your data or use it for advertising. You can change your preference anytime in settings.\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3003,3242],"text":"\n              We use privacy-friendly analytics to understand how you use our platform and make it better.\n              We don&#39;t sell your data or use it for advertising. You can change your preference anytime in settings.\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3003,3242],"text":"\n              We use privacy-friendly analytics to understand how you use our platform and make it better.\n              We don&rsquo;t sell your data or use it for advertising. You can change your preference anytime in settings.\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/analytics/ConsentBanner.tsx:151:7\n  149 |     if (storedConsent) {\n  150 |       const { consent: consentValue } = JSON.parse(storedConsent);\n> 151 |       setConsent(consentValue);\n      |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  152 |     }\n  153 |     setLoading(false);\n  154 |   }, []);","line":151,"column":7,"nodeType":null,"endLine":151,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analytics Consent Banner\n * \n * GDPR-compliant cookie consent banner for analytics tracking.\n * Follows WCAG 2.2 accessibility standards.\n */\n\n'use client';\n\nimport { useState, useEffect } from 'react';\n// PostHog consent is handled directly via posthog.opt_in_capturing() and posthog.opt_out_capturing()\nimport posthog from 'posthog-js';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\n\nconst CONSENT_STORAGE_KEY = 'analytics-consent';\nconst CONSENT_EXPIRY_DAYS = 365;\n\nexport function ConsentBanner() {\n  const [showBanner, setShowBanner] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    // Check if user has already given/denied consent\n    const storedConsent = localStorage.getItem(CONSENT_STORAGE_KEY);\n    \n    if (!storedConsent) {\n      // Show banner after a short delay for better UX\n      setTimeout(() => {\n        setShowBanner(true);\n        setTimeout(() => setIsVisible(true), 100);\n      }, 2000);\n    } else {\n      // Apply stored consent\n      const { consent, expiry } = JSON.parse(storedConsent);\n      \n      if (new Date().getTime() < expiry) {\n        if (consent === 'accepted') {\n          posthog.opt_in_capturing();\n        } else {\n          posthog.opt_out_capturing();\n        }\n      } else {\n        // Consent expired, show banner again\n        localStorage.removeItem(CONSENT_STORAGE_KEY);\n        setShowBanner(true);\n      }\n    }\n  }, []);\n\n  const handleAccept = () => {\n    saveConsent('accepted');\n    posthog.opt_in_capturing();\n    hideBanner();\n  };\n\n  const handleDecline = () => {\n    saveConsent('declined');\n    posthog.opt_out_capturing();\n    hideBanner();\n  };\n\n  const saveConsent = (consent: 'accepted' | 'declined') => {\n    const expiry = new Date();\n    expiry.setDate(expiry.getDate() + CONSENT_EXPIRY_DAYS);\n    \n    localStorage.setItem(\n      CONSENT_STORAGE_KEY,\n      JSON.stringify({\n        consent,\n        expiry: expiry.getTime(),\n        timestamp: new Date().toISOString(),\n      })\n    );\n  };\n\n  const hideBanner = () => {\n    setIsVisible(false);\n    setTimeout(() => setShowBanner(false), 300);\n  };\n\n  if (!showBanner) return null;\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-label=\"Cookie consent\"\n      aria-describedby=\"consent-description\"\n      className={`fixed bottom-0 left-0 right-0 z-50 p-4 transition-transform duration-300 ease-in-out ${\n        isVisible ? 'translate-y-0' : 'translate-y-full'\n      }`}\n    >\n      <Card className=\"mx-auto max-w-4xl border-border/40 bg-background/95 p-6 shadow-2xl backdrop-blur supports-[backdrop-filter]:bg-background/80\">\n        <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"flex-1\">\n            <h2 className=\"mb-2 text-lg font-semibold\">\n               We use analytics to improve your experience\n            </h2>\n            <p id=\"consent-description\" className=\"text-sm text-muted-foreground\">\n              We use privacy-friendly analytics to understand how you use our platform and make it better.\n              We don't sell your data or use it for advertising. You can change your preference anytime in settings.\n              {' '}\n              <a\n                href=\"/privacy\"\n                className=\"underline hover:text-foreground\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                }}\n              >\n                Learn more\n              </a>\n            </p>\n          </div>\n          \n          <div className=\"flex flex-col gap-2 sm:flex-row sm:gap-3\">\n            <Button\n              variant=\"outline\"\n              onClick={handleDecline}\n              className=\"min-w-[120px]\"\n              aria-label=\"Decline analytics cookies\"\n            >\n              Decline\n            </Button>\n            <Button\n              onClick={handleAccept}\n              className=\"min-w-[120px]\"\n              aria-label=\"Accept analytics cookies\"\n            >\n              Accept\n            </Button>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n}\n\n/**\n * Consent Settings Component\n * \n * For use in settings/privacy pages to manage consent.\n */\nexport function ConsentSettings() {\n  const [consent, setConsent] = useState<'accepted' | 'declined' | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const storedConsent = localStorage.getItem(CONSENT_STORAGE_KEY);\n    if (storedConsent) {\n      const { consent: consentValue } = JSON.parse(storedConsent);\n      setConsent(consentValue);\n    }\n    setLoading(false);\n  }, []);\n\n  const updateConsent = (newConsent: 'accepted' | 'declined') => {\n    const expiry = new Date();\n    expiry.setDate(expiry.getDate() + CONSENT_EXPIRY_DAYS);\n    \n    localStorage.setItem(\n      CONSENT_STORAGE_KEY,\n      JSON.stringify({\n        consent: newConsent,\n        expiry: expiry.getTime(),\n        timestamp: new Date().toISOString(),\n      })\n    );\n    \n    setConsent(newConsent);\n    if (newConsent === 'accepted') {\n      posthog.opt_in_capturing();\n    } else {\n      posthog.opt_out_capturing();\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-sm text-muted-foreground\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <h3 className=\"text-lg font-semibold\">Analytics Preferences</h3>\n        <p className=\"text-sm text-muted-foreground\">\n          Control how we collect and use analytics data about your usage.\n        </p>\n      </div>\n\n      <div className=\"flex items-center justify-between rounded-lg border p-4\">\n        <div className=\"flex-1\">\n          <div className=\"font-medium\">Analytics Cookies</div>\n          <div className=\"text-sm text-muted-foreground\">\n            Help us improve by allowing anonymous usage analytics\n          </div>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant={consent === 'declined' ? 'default' : 'outline'}\n            onClick={() => updateConsent('declined')}\n            size=\"sm\"\n          >\n            Off\n          </Button>\n          <Button\n            variant={consent === 'accepted' ? 'default' : 'outline'}\n            onClick={() => updateConsent('accepted')}\n            size=\"sm\"\n          >\n            On\n          </Button>\n        </div>\n      </div>\n\n      {consent && (\n        <p className=\"text-xs text-muted-foreground\">\n          Last updated: {new Date().toLocaleDateString()}\n        </p>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/AdCreativeApproval.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":154,"column":7,"nodeType":"JSXOpeningElement","endLine":158,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AdCreativeApproval Component\n *\n * HITL checkpoint for reviewing and approving ad creatives before\n * they go live on Meta (Facebook/Instagram).\n *\n * Features:\n * - Platform-specific ad previews (Facebook Feed, Instagram Stories, etc.)\n * - Copy variant toggles (enable/disable headlines, primary texts)\n * - Selected images grid with ability to change\n * - Budget and targeting summary\n * - Platform review status tracking\n * - Approve & Launch / Request Changes actions\n *\n * @story US-AP05\n */\n\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Switch } from '@/components/ui/switch';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport {\n  Check,\n  X,\n  RefreshCw,\n  Loader2,\n  Clock,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  AlertTriangle,\n  Image as ImageIcon,\n  FileText,\n  DollarSign,\n  Target,\n  Eye,\n  Edit2,\n  ExternalLink,\n} from 'lucide-react';\nimport type { AdCampaign, CampaignCreativeData, CampaignTargetingData, SelectedImage } from '@/db/schema/ad-campaigns';\nimport type { CopyBankHeadlines, CopyBankPrimaryTexts, CopyBankCTAs } from '@/db/schema/copy-banks';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\ninterface AdCreativeApprovalProps {\n  campaignId: string;\n  projectId: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onApprove: () => Promise<boolean>;\n  onRequestChanges: () => void;\n}\n\ninterface CampaignWithDetails {\n  campaign: AdCampaign;\n  copyBank: {\n    headlines: CopyBankHeadlines;\n    primaryTexts: CopyBankPrimaryTexts;\n    ctas: CopyBankCTAs;\n  } | null;\n  platformStatus: {\n    status: 'pending' | 'approved' | 'rejected' | 'error';\n    lastChecked: string | null;\n    issues?: Array<{ summary: string; details?: string }>;\n  };\n  previews: Array<{\n    format: 'facebook_feed' | 'instagram_feed' | 'instagram_stories' | 'facebook_reels';\n    previewUrl: string;\n  }>;\n}\n\ninterface CopyVariantState {\n  headlines: Record<keyof CopyBankHeadlines, boolean>;\n  primaryTexts: Record<keyof CopyBankPrimaryTexts, boolean>;\n  ctas: Record<keyof CopyBankCTAs, boolean>;\n}\n\n// ============================================================================\n// HELPER COMPONENTS\n// ============================================================================\n\nfunction PlatformStatusBadge({ status }: { status: 'pending' | 'approved' | 'rejected' | 'error' }) {\n  const config = {\n    pending: {\n      icon: Clock,\n      label: 'Pending Review',\n      className: 'bg-yellow-100 text-yellow-700 border-yellow-200',\n    },\n    approved: {\n      icon: CheckCircle,\n      label: 'Approved',\n      className: 'bg-green-100 text-green-700 border-green-200',\n    },\n    rejected: {\n      icon: XCircle,\n      label: 'Rejected',\n      className: 'bg-red-100 text-red-700 border-red-200',\n    },\n    error: {\n      icon: AlertCircle,\n      label: 'Error',\n      className: 'bg-red-100 text-red-700 border-red-200',\n    },\n  };\n\n  const { icon: Icon, label, className } = config[status];\n\n  return (\n    <Badge variant=\"outline\" className={cn('gap-1', className)}>\n      <Icon className=\"h-3 w-3\" />\n      {label}\n    </Badge>\n  );\n}\n\nfunction PreviewPlaceholder({ format }: { format: string }) {\n  return (\n    <div className=\"aspect-square bg-muted rounded-lg flex items-center justify-center\">\n      <div className=\"text-center text-muted-foreground\">\n        <Eye className=\"h-8 w-8 mx-auto mb-2\" />\n        <p className=\"text-sm\">{format.replace('_', ' ').replace(/\\b\\w/g, (l) => l.toUpperCase())}</p>\n        <p className=\"text-xs\">Preview</p>\n      </div>\n    </div>\n  );\n}\n\nfunction ImageThumbnail({ image, selected }: { image: SelectedImage; selected: boolean }) {\n  return (\n    <div\n      className={cn(\n        'relative aspect-square rounded-lg overflow-hidden border-2 transition-all',\n        selected ? 'border-primary ring-2 ring-primary/20' : 'border-transparent'\n      )}\n    >\n      <img\n        src={image.thumbUrl || image.url}\n        alt={image.photographer ? `Photo by ${image.photographer}` : 'Selected image'}\n        className=\"w-full h-full object-cover\"\n      />\n      {selected && (\n        <div className=\"absolute top-1 right-1 bg-primary text-primary-foreground rounded-full p-0.5\">\n          <Check className=\"h-3 w-3\" />\n        </div>\n      )}\n      {image.source === 'generated' && (\n        <div className=\"absolute bottom-1 left-1 bg-black/60 text-white text-xs px-1 rounded\">\n          AI\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nexport function AdCreativeApproval({\n  campaignId,\n  projectId,\n  open,\n  onOpenChange,\n  onApprove,\n  onRequestChanges,\n}: AdCreativeApprovalProps) {\n  const [data, setData] = useState<CampaignWithDetails | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isPolling, setIsPolling] = useState(false);\n  const [activePreview, setActivePreview] = useState<string>('facebook_feed');\n\n  // Track which copy variants are enabled\n  const [copyState, setCopyState] = useState<CopyVariantState>({\n    headlines: {\n      primary: true,\n      benefit: true,\n      question: true,\n      social: true,\n      urgency: true,\n    },\n    primaryTexts: {\n      problem_solution: true,\n      benefit_focused: true,\n      social_proof: true,\n      feature_list: false,\n      urgency: false,\n    },\n    ctas: {\n      primary: true,\n      secondary: true,\n      urgency: false,\n      learn: false,\n    },\n  });\n\n  // Fetch campaign data\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`/api/approvals/ad-creative?campaignId=${campaignId}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch campaign data');\n      }\n\n      const result = await response.json();\n      setData(result.data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  }, [campaignId]);\n\n  // Poll for platform status updates\n  const pollStatus = useCallback(async () => {\n    if (!data?.campaign.id) return;\n\n    try {\n      setIsPolling(true);\n      const response = await fetch(`/api/ads/campaigns/${data.campaign.id}/poll-status`, {\n        method: 'POST',\n      });\n\n      if (response.ok) {\n        // Refresh the full data to get updated status\n        await fetchData();\n      }\n    } catch (err) {\n      console.error('Error polling status:', err);\n    } finally {\n      setIsPolling(false);\n    }\n  }, [data?.campaign.id, fetchData]);\n\n  useEffect(() => {\n    if (open && campaignId) {\n      fetchData();\n    }\n  }, [open, campaignId, fetchData]);\n\n  const handleApprove = async () => {\n    setIsSubmitting(true);\n    try {\n      // Save copy state changes first\n      await fetch(`/api/approvals/ad-creative`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          campaignId,\n          copyState,\n        }),\n      });\n\n      const success = await onApprove();\n      if (success) {\n        onOpenChange(false);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to approve');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const toggleCopyVariant = (\n    category: 'headlines' | 'primaryTexts' | 'ctas',\n    key: string\n  ) => {\n    setCopyState((prev) => ({\n      ...prev,\n      [category]: {\n        ...prev[category],\n        [key]: !prev[category][key as keyof (typeof prev)[typeof category]],\n      },\n    }));\n  };\n\n  const enabledHeadlineCount = Object.values(copyState.headlines).filter(Boolean).length;\n  const enabledPrimaryTextCount = Object.values(copyState.primaryTexts).filter(Boolean).length;\n\n  // Loading state\n  if (loading) {\n    return (\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh]\">\n          <DialogHeader>\n            <DialogTitle>Loading Ad Creative...</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <Skeleton className=\"h-64 w-full\" />\n            <Skeleton className=\"h-32 w-full\" />\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  // Error state\n  if (error || !data) {\n    return (\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent className=\"max-w-4xl\">\n          <DialogHeader>\n            <DialogTitle>Error</DialogTitle>\n            <DialogDescription>{error || 'Failed to load campaign data'}</DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Close\n            </Button>\n            <Button onClick={fetchData}>Retry</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  const { campaign, copyBank, platformStatus, previews } = data;\n  const creative = campaign.creativeData as CampaignCreativeData | null;\n  const targeting = campaign.targetingData as CampaignTargetingData | null;\n  const selectedImages = creative?.selectedImages || [];\n  const isRejected = platformStatus.status === 'rejected';\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-5xl max-h-[90vh]\" data-testid=\"ad-creative-approval\">\n        <DialogHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"space-y-1\">\n              <DialogTitle className=\"text-xl\">Ad Approval - HITL Checkpoint</DialogTitle>\n              <DialogDescription>\n                Review your ad creative before it goes live on Meta\n              </DialogDescription>\n            </div>\n            <PlatformStatusBadge status={platformStatus.status} />\n          </div>\n        </DialogHeader>\n\n        <ScrollArea className=\"max-h-[65vh] pr-4\">\n          <div className=\"space-y-6\">\n            {/* Campaign Info */}\n            <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n              <div className=\"space-y-1\">\n                <p>\n                  <span className=\"font-medium text-foreground\">Campaign:</span> {campaign.name}\n                </p>\n                <p>\n                  <span className=\"font-medium text-foreground\">Platform:</span> Meta (Facebook +\n                  Instagram)\n                </p>\n              </div>\n              {creative?.landingPageUrl && (\n                <a\n                  href={creative.landingPageUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-1 text-primary hover:underline\"\n                >\n                  View Landing Page\n                  <ExternalLink className=\"h-3 w-3\" />\n                </a>\n              )}\n            </div>\n\n            <Separator />\n\n            {/* Platform Status Alert */}\n            {isRejected && platformStatus.issues && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"flex items-start gap-2\">\n                  <AlertTriangle className=\"h-5 w-5 text-red-600 mt-0.5\" />\n                  <div className=\"space-y-2\">\n                    <p className=\"font-medium text-red-800\">Ad Rejected by Meta</p>\n                    <ul className=\"text-sm text-red-700 space-y-1\">\n                      {platformStatus.issues.map((issue, i) => (\n                        <li key={i}>\n                          <strong>{issue.summary}</strong>\n                          {issue.details && <span className=\"block\">{issue.details}</span>}\n                        </li>\n                      ))}\n                    </ul>\n                    <p className=\"text-sm text-red-600\">\n                      Please edit your creative to address these issues before resubmitting.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Previews Section */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Eye className=\"h-4 w-4\" />\n                  Ad Previews\n                </CardTitle>\n                <CardDescription>\n                  See how your ads will appear across different placements\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Tabs value={activePreview} onValueChange={setActivePreview}>\n                  <TabsList className=\"grid w-full grid-cols-4\">\n                    <TabsTrigger value=\"facebook_feed\">Facebook Feed</TabsTrigger>\n                    <TabsTrigger value=\"instagram_feed\">Instagram Feed</TabsTrigger>\n                    <TabsTrigger value=\"instagram_stories\">Stories</TabsTrigger>\n                    <TabsTrigger value=\"facebook_reels\">Reels</TabsTrigger>\n                  </TabsList>\n                  {['facebook_feed', 'instagram_feed', 'instagram_stories', 'facebook_reels'].map(\n                    (format) => (\n                      <TabsContent key={format} value={format} className=\"mt-4\">\n                        <div className=\"flex justify-center\">\n                          <div className=\"w-80\">\n                            {previews.find((p) => p.format === format)?.previewUrl ? (\n                              <iframe\n                                src={previews.find((p) => p.format === format)?.previewUrl}\n                                className=\"w-full aspect-square rounded-lg border\"\n                                title={`${format} preview`}\n                              />\n                            ) : (\n                              <PreviewPlaceholder format={format} />\n                            )}\n                          </div>\n                        </div>\n                      </TabsContent>\n                    )\n                  )}\n                </Tabs>\n              </CardContent>\n            </Card>\n\n            {/* Copy and Images Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Copy Section */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <FileText className=\"h-4 w-4\" />\n                      Ad Copy\n                    </CardTitle>\n                    <Button variant=\"outline\" size=\"sm\" onClick={onRequestChanges}>\n                      <Edit2 className=\"h-3 w-3 mr-1\" />\n                      Edit Copy\n                    </Button>\n                  </div>\n                  <CardDescription>\n                    {enabledHeadlineCount} headlines, {enabledPrimaryTextCount} texts enabled\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {/* Headlines */}\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm font-medium\">Headlines</p>\n                    {copyBank &&\n                      Object.entries(copyBank.headlines).map(([key, text]) => (\n                        <div\n                          key={key}\n                          className=\"flex items-center justify-between py-2 border-b last:border-0\"\n                        >\n                          <span\n                            className={cn(\n                              'text-sm flex-1 pr-4',\n                              !copyState.headlines[key as keyof CopyBankHeadlines] &&\n                                'text-muted-foreground line-through'\n                            )}\n                          >\n                            {text}\n                          </span>\n                          <Switch\n                            checked={copyState.headlines[key as keyof CopyBankHeadlines]}\n                            onCheckedChange={() => toggleCopyVariant('headlines', key)}\n                            aria-label={`Toggle ${key} headline`}\n                          />\n                        </div>\n                      ))}\n                  </div>\n\n                  {/* Primary Texts */}\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm font-medium\">Primary Texts</p>\n                    {copyBank &&\n                      Object.entries(copyBank.primaryTexts).map(([key, text]) => (\n                        <div\n                          key={key}\n                          className=\"flex items-start justify-between py-2 border-b last:border-0\"\n                        >\n                          <span\n                            className={cn(\n                              'text-sm flex-1 pr-4 line-clamp-2',\n                              !copyState.primaryTexts[key as keyof CopyBankPrimaryTexts] &&\n                                'text-muted-foreground line-through'\n                            )}\n                          >\n                            {text}\n                          </span>\n                          <Switch\n                            checked={copyState.primaryTexts[key as keyof CopyBankPrimaryTexts]}\n                            onCheckedChange={() => toggleCopyVariant('primaryTexts', key)}\n                            aria-label={`Toggle ${key} primary text`}\n                          />\n                        </div>\n                      ))}\n                  </div>\n\n                  {/* CTAs */}\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm font-medium\">Call to Actions</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {copyBank &&\n                        Object.entries(copyBank.ctas).map(([key, text]) => (\n                          <Button\n                            key={key}\n                            variant={\n                              copyState.ctas[key as keyof CopyBankCTAs] ? 'default' : 'outline'\n                            }\n                            size=\"sm\"\n                            onClick={() => toggleCopyVariant('ctas', key)}\n                            className=\"text-xs\"\n                          >\n                            {copyState.ctas[key as keyof CopyBankCTAs] ? (\n                              <Check className=\"h-3 w-3 mr-1\" />\n                            ) : (\n                              <X className=\"h-3 w-3 mr-1\" />\n                            )}\n                            {text}\n                          </Button>\n                        ))}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Images Section */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <ImageIcon className=\"h-4 w-4\" />\n                      Selected Images\n                    </CardTitle>\n                    <Button variant=\"outline\" size=\"sm\" onClick={onRequestChanges}>\n                      <Edit2 className=\"h-3 w-3 mr-1\" />\n                      Change Images\n                    </Button>\n                  </div>\n                  <CardDescription>\n                    {selectedImages.length} images selected for flexible ad testing\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {selectedImages.map((image) => (\n                      <ImageThumbnail key={image.id} image={image} selected />\n                    ))}\n                    {selectedImages.length === 0 && (\n                      <div className=\"col-span-3 text-center py-8 text-muted-foreground\">\n                        <ImageIcon className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                        <p className=\"text-sm\">No images selected</p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Budget & Targeting */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {/* Budget */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <DollarSign className=\"h-4 w-4\" />\n                      Budget\n                    </CardTitle>\n                    <Button variant=\"outline\" size=\"sm\" onClick={onRequestChanges}>\n                      <Edit2 className=\"h-3 w-3 mr-1\" />\n                      Edit\n                    </Button>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Daily Budget</span>\n                    <span className=\"font-medium\">\n                      ${campaign.dailyBudget?.toFixed(2) || '0.00'}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Total Allocated</span>\n                    <span className=\"font-medium\">${campaign.budgetAllocated.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Duration</span>\n                    <span className=\"font-medium\">\n                      {campaign.scheduledStartAt && campaign.scheduledEndAt\n                        ? `${Math.ceil(\n                            (new Date(campaign.scheduledEndAt).getTime() -\n                              new Date(campaign.scheduledStartAt).getTime()) /\n                              (1000 * 60 * 60 * 24)\n                          )} days`\n                        : 'Not set'}\n                    </span>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Targeting */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <Target className=\"h-4 w-4\" />\n                      Targeting\n                    </CardTitle>\n                    <Button variant=\"outline\" size=\"sm\" onClick={onRequestChanges}>\n                      <Edit2 className=\"h-3 w-3 mr-1\" />\n                      Edit\n                    </Button>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-2 text-sm\">\n                  {targeting?.segment && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Segment</span>\n                      <span className=\"font-medium\">{targeting.segment}</span>\n                    </div>\n                  )}\n                  {targeting?.demographics && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Age</span>\n                      <span className=\"font-medium\">\n                        {targeting.demographics.ageMin || 18}-{targeting.demographics.ageMax || 65}\n                      </span>\n                    </div>\n                  )}\n                  {targeting?.locations && targeting.locations.length > 0 && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Location</span>\n                      <span className=\"font-medium\">\n                        {targeting.locations.map((l) => l.country).join(', ')}\n                      </span>\n                    </div>\n                  )}\n                  {targeting?.interests && targeting.interests.length > 0 && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Interests</span>\n                      <span className=\"font-medium text-right\">\n                        {targeting.interests.slice(0, 3).join(', ')}\n                        {targeting.interests.length > 3 && ` +${targeting.interests.length - 3}`}\n                      </span>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Platform Status */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base\">Platform Review Status</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"space-y-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <PlatformStatusBadge status={platformStatus.status} />\n                      {platformStatus.lastChecked && (\n                        <span className=\"text-xs text-muted-foreground\">\n                          Last checked:{' '}\n                          {new Date(platformStatus.lastChecked).toLocaleTimeString()}\n                        </span>\n                      )}\n                    </div>\n                    {platformStatus.status === 'pending' && (\n                      <p className=\"text-sm text-muted-foreground\">\n                        Meta typically reviews ads within 2-24 hours. You can approve now and your\n                        ads will go live automatically when Meta completes their review.\n                      </p>\n                    )}\n                    {platformStatus.status === 'approved' && (\n                      <p className=\"text-sm text-green-700\">\n                        Meta has approved your ad. It will go live immediately after you approve.\n                      </p>\n                    )}\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={pollStatus}\n                    disabled={isPolling}\n                    className=\"gap-2\"\n                  >\n                    <RefreshCw className={cn('h-4 w-4', isPolling && 'animate-spin')} />\n                    {isPolling ? 'Checking...' : 'Refresh Status'}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </ScrollArea>\n\n        <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isSubmitting}>\n            Cancel\n          </Button>\n          <div className=\"flex gap-2\">\n            <Button variant=\"secondary\" onClick={onRequestChanges} disabled={isSubmitting}>\n              <Edit2 className=\"h-4 w-4 mr-2\" />\n              Request Changes\n            </Button>\n            <Button\n              onClick={handleApprove}\n              disabled={isSubmitting || isRejected || enabledHeadlineCount < 1}\n              className=\"gap-2\"\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Check className=\"h-4 w-4\" />\n              )}\n              {platformStatus.status === 'approved' ? 'Approve & Launch' : 'Approve'}\n            </Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default AdCreativeApproval;\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalBadge.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalBadge.tsx:66:5\n  64 |   useEffect(() => {\n  65 |     const allApprovals = [...approvals, ...clientApprovals];\n> 66 |     setIsUrgent(hasUrgentApprovals(allApprovals));\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  67 |     setUrgentCount(getUrgentCount(allApprovals));\n  68 |   }, [approvals, clientApprovals]);\n  69 |","line":66,"column":5,"nodeType":null,"endLine":66,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ApprovalBadge Component\n *\n * Navigation badge showing pending approval count with urgency indicator.\n * Uses Supabase Realtime for live updates.\n *\n * @story US-F03\n */\n\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport { Bell, AlertTriangle } from 'lucide-react';\nimport { useApprovals } from '@/hooks/useApprovals';\nimport type { ApprovalRequest } from '@/types/crewai';\n\ninterface ApprovalBadgeProps {\n  className?: string;\n  variant?: 'icon' | 'full';\n}\n\n/**\n * Check if any approvals are expiring within 24 hours\n */\nfunction hasUrgentApprovals(approvals: ApprovalRequest[]): boolean {\n  const now = new Date();\n  const twentyFourHours = 24 * 60 * 60 * 1000;\n\n  return approvals.some((approval) => {\n    const expiresAt = new Date(approval.expires_at);\n    return expiresAt.getTime() - now.getTime() < twentyFourHours;\n  });\n}\n\n/**\n * Get the most urgent expiration time\n */\nfunction getUrgentCount(approvals: ApprovalRequest[]): number {\n  const now = new Date();\n  const twentyFourHours = 24 * 60 * 60 * 1000;\n\n  return approvals.filter((approval) => {\n    const expiresAt = new Date(approval.expires_at);\n    return expiresAt.getTime() - now.getTime() < twentyFourHours;\n  }).length;\n}\n\nexport function ApprovalBadge({ className, variant = 'icon' }: ApprovalBadgeProps) {\n  const { approvals, clientApprovals, pendingCount, isLoading, error } = useApprovals('pending');\n  const [isUrgent, setIsUrgent] = useState(false);\n  const [urgentCount, setUrgentCount] = useState(0);\n\n  // Check for urgent approvals\n  useEffect(() => {\n    const allApprovals = [...approvals, ...clientApprovals];\n    setIsUrgent(hasUrgentApprovals(allApprovals));\n    setUrgentCount(getUrgentCount(allApprovals));\n  }, [approvals, clientApprovals]);\n\n  // Don't render if loading, error, or no pending approvals\n  if (isLoading || error) {\n    return null;\n  }\n\n  if (pendingCount === 0) {\n    return variant === 'full' ? (\n      <Link href=\"/approvals\" className={className}>\n        <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n          <Bell className=\"h-4 w-4\" />\n          <span>Approvals</span>\n        </Button>\n      </Link>\n    ) : null;\n  }\n\n  const badge = (\n    <Link href=\"/approvals\" className={className}>\n      <Button\n        variant={isUrgent ? 'destructive' : 'ghost'}\n        size={variant === 'icon' ? 'icon' : 'sm'}\n        className={cn(\n          'relative',\n          variant === 'full' && 'gap-2',\n          isUrgent && variant === 'icon' && 'bg-red-100 hover:bg-red-200 text-red-600'\n        )}\n      >\n        {isUrgent ? (\n          <AlertTriangle className=\"h-4 w-4\" />\n        ) : (\n          <Bell className=\"h-4 w-4\" />\n        )}\n        {variant === 'full' && <span>Approvals</span>}\n        <Badge\n          variant={isUrgent ? 'destructive' : 'secondary'}\n          className={cn(\n            variant === 'icon' && 'absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs',\n            variant === 'full' && 'ml-1'\n          )}\n        >\n          {pendingCount > 99 ? '99+' : pendingCount}\n        </Badge>\n      </Button>\n    </Link>\n  );\n\n  if (variant === 'full') {\n    return badge;\n  }\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          {badge}\n        </TooltipTrigger>\n        <TooltipContent side=\"bottom\">\n          <div className=\"text-sm\">\n            <p className=\"font-medium\">\n              {pendingCount} pending approval{pendingCount !== 1 ? 's' : ''}\n            </p>\n            {urgentCount > 0 && (\n              <p className=\"text-red-500 text-xs\">\n                {urgentCount} expiring soon\n              </p>\n            )}\n          </div>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n\nexport default ApprovalBadge;\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalDetailModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/ApprovalTypeIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/EvidenceSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/FounderAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/approvals/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/assistant/DashboardAIAssistant.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadConversationHistory' and 'messages.length'. Either include them or remove the dependency array.","line":93,"column":6,"nodeType":"ArrayExpression","endLine":93,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, loadConversationHistory, messages.length]","fix":{"range":[3071,3079],"text":"[isOpen, loadConversationHistory, messages.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP09\n */\n/**\n * DashboardAIAssistant - Persistent AI Assistant for Ongoing Strategic Support\n *\n * This component provides a conversational AI interface in the founder/consultant\n * dashboards that can:\n * - Discuss CrewAI analysis reports\n * - Answer questions about project status\n * - Dispatch new CrewAI workflows via tool calling\n * - Maintain conversation context across sessions\n *\n * Based on proven patterns from OnboardingWizardV2 and ConversationInterfaceV2.\n */\n\n'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { Send, Loader2, X, MessageSquare, Brain, Sparkles, Minimize2, Maximize2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport { Badge } from '@/components/ui/badge';\nimport { Card } from '@/components/ui/card';\nimport { toast } from 'sonner';\n\n// ============================================================================\n// Types and Interfaces\n// ============================================================================\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: string;\n}\n\ninterface DashboardAIAssistantProps {\n  userId: string;\n  userRole: 'founder' | 'consultant';\n  projectId?: string;\n  clientId?: string; // For consultants managing specific client\n  className?: string;\n}\n\n// ============================================================================\n// DashboardAIAssistant Component\n// ============================================================================\n\nexport function DashboardAIAssistant({\n  userId,\n  userRole,\n  projectId,\n  clientId,\n  className = '',\n}: DashboardAIAssistantProps) {\n  // State\n  const [isOpen, setIsOpen] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasUnreadNotification, setHasUnreadNotification] = useState(false);\n\n  // Refs\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (scrollAreaRef.current && !isMinimized) {\n      const scrollContainer = scrollAreaRef.current.querySelector('[data-radix-scroll-area-viewport]');\n      if (scrollContainer) {\n        scrollContainer.scrollTop = scrollContainer.scrollHeight;\n      }\n    }\n  }, [messages, isMinimized]);\n\n  // Focus textarea when opening\n  useEffect(() => {\n    if (isOpen && !isMinimized && textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  }, [isOpen, isMinimized]);\n\n  // Load conversation history on mount\n  useEffect(() => {\n    if (isOpen && messages.length === 0) {\n      loadConversationHistory();\n    }\n  }, [isOpen]);\n\n  // Load conversation history from API\n  const loadConversationHistory = async () => {\n    try {\n      const params = new URLSearchParams({\n        userId,\n        userRole,\n        ...(projectId && { projectId }),\n        ...(clientId && { clientId }),\n      });\n\n      const response = await fetch(`/api/assistant/history?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.messages && data.messages.length > 0) {\n          setMessages(data.messages);\n        } else {\n          // Add welcome message if no history\n          setMessages([\n            {\n              role: 'assistant',\n              content: getWelcomeMessage(),\n              timestamp: new Date().toISOString(),\n            },\n          ]);\n        }\n      }\n    } catch (error) {\n      console.error('[DashboardAIAssistant] Failed to load history:', error);\n      // Add welcome message on error\n      setMessages([\n        {\n          role: 'assistant',\n          content: getWelcomeMessage(),\n          timestamp: new Date().toISOString(),\n        },\n      ]);\n    }\n  };\n\n  // Get context-aware welcome message\n  const getWelcomeMessage = () => {\n    if (userRole === 'founder') {\n      return `Hi! I'm your AI Strategic Assistant. I'm here to help you:\\n\\n Discuss your CrewAI analysis reports\\n Answer questions about your validation progress\\n Run new strategic analysis when needed\\n Provide guidance on next steps\\n\\nWhat would you like to explore today?`;\n    } else {\n      return `Hi! I'm your AI Practice Assistant. I'm here to help you:\\n\\n Analyze client projects and opportunities\\n Generate strategic recommendations\\n Discuss findings and next steps\\n Manage your consulting workflow\\n\\nWhat can I help you with?`;\n    }\n  };\n\n  // Handle form submit - stream AI response\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading) return;\n\n    const userMessage = input.trim();\n    setInput('');\n    setIsLoading(true);\n\n    // Add user message\n    const newUserMessage: Message = {\n      role: 'user',\n      content: userMessage,\n      timestamp: new Date().toISOString(),\n    };\n    setMessages((prev) => [...prev, newUserMessage]);\n\n    // Create abort controller for this request\n    abortControllerRef.current = new AbortController();\n\n    try {\n      const response = await fetch('/api/assistant/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          messages: [...messages, newUserMessage].map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n          userId,\n          userRole,\n          projectId,\n          clientId,\n        }),\n        signal: abortControllerRef.current.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`API error: ${response.status}`);\n      }\n\n      // Handle streaming response (Vercel AI SDK UI stream format)\n      const reader = response.body?.getReader();\n      const decoder = new TextDecoder();\n      let accumulatedText = '';\n      let buffer = '';\n\n      if (reader) {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          buffer += decoder.decode(value, { stream: true });\n\n          // Parse SSE events (lines starting with \"data: \")\n          const lines = buffer.split('\\n');\n          buffer = lines.pop() || ''; // Keep incomplete line in buffer\n\n          for (const line of lines) {\n            if (!line.startsWith('data: ')) continue;\n            const data = line.slice(6); // Remove \"data: \" prefix\n\n            if (data === '[DONE]') continue;\n\n            try {\n              const event = JSON.parse(data);\n\n              // Extract text from text-delta events\n              if (event.type === 'text-delta' && event.textDelta) {\n                accumulatedText += event.textDelta;\n\n                // Update AI message in real-time\n                setMessages((prev) => {\n                  const lastMessage = prev[prev.length - 1];\n                  if (lastMessage?.role === 'assistant') {\n                    return [\n                      ...prev.slice(0, -1),\n                      { ...lastMessage, content: accumulatedText },\n                    ];\n                  } else {\n                    return [\n                      ...prev,\n                      {\n                        role: 'assistant',\n                        content: accumulatedText,\n                        timestamp: new Date().toISOString(),\n                      },\n                    ];\n                  }\n                });\n              }\n\n              // Handle tool calls - show status message\n              if (event.type === 'tool-input-start') {\n                const toolMessage = ` Checking ${event.toolName}...`;\n                setMessages((prev) => {\n                  const lastMessage = prev[prev.length - 1];\n                  if (lastMessage?.role === 'assistant') {\n                    return prev;\n                  }\n                  return [\n                    ...prev,\n                    {\n                      role: 'assistant',\n                      content: toolMessage,\n                      timestamp: new Date().toISOString(),\n                    },\n                  ];\n                });\n              }\n            } catch {\n              // Ignore parse errors for malformed JSON\n            }\n          }\n        }\n\n        // If no text was accumulated but we had tool calls, the model may not have responded\n        if (!accumulatedText) {\n          setMessages((prev) => {\n            const lastMessage = prev[prev.length - 1];\n            if (lastMessage?.role === 'assistant' && lastMessage.content.startsWith('')) {\n              return [\n                ...prev.slice(0, -1),\n                { ...lastMessage, content: \"I checked the project status but couldn't find the project. Could you make sure you have an active project selected?\" },\n              ];\n            }\n            return prev;\n          });\n        }\n      }\n    } catch (error: any) {\n      if (error.name !== 'AbortError') {\n        console.error('[DashboardAIAssistant] Chat error:', error);\n        toast.error(`Failed to send message: ${error.message}`);\n      }\n    } finally {\n      setIsLoading(false);\n      abortControllerRef.current = null;\n    }\n  };\n\n  // Handle keyboard shortcuts\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      const form = e.currentTarget.closest('form');\n      if (form) {\n        form.requestSubmit();\n      }\n    }\n  }, []);\n\n  // Format timestamp for display\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  // Toggle open/close\n  const toggleOpen = () => {\n    setIsOpen(!isOpen);\n    if (!isOpen) {\n      setHasUnreadNotification(false);\n    }\n  };\n\n  // Toggle minimize/maximize\n  const toggleMinimize = () => {\n    setIsMinimized(!isMinimized);\n  };\n\n  if (!isOpen) {\n    // Floating trigger button\n    return (\n      <div className={`fixed bottom-6 right-6 z-50 ${className}`}>\n        <Button\n          onClick={toggleOpen}\n          size=\"lg\"\n          className=\"rounded-full shadow-lg h-14 w-14 p-0 relative\"\n        >\n          <Brain className=\"h-6 w-6\" />\n          {hasUnreadNotification && (\n            <span className=\"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full border-2 border-white\" />\n          )}\n        </Button>\n      </div>\n    );\n  }\n\n  // Full chat interface\n  return (\n    <div className={`fixed bottom-6 right-6 z-50 ${className}`}>\n      <Card className=\"w-[400px] h-[600px] flex flex-col shadow-2xl\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-lg\">\n          <div className=\"flex items-center gap-2\">\n            <Avatar className=\"h-8 w-8 border-2 border-white\">\n              <AvatarFallback className=\"bg-blue-500 text-white\">\n                <Brain className=\"h-4 w-4\" />\n              </AvatarFallback>\n            </Avatar>\n            <div>\n              <h3 className=\"font-semibold text-sm\">AI Strategic Assistant</h3>\n              <p className=\"text-xs text-blue-100\">Always here to help</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={toggleMinimize}\n              className=\"h-7 w-7 p-0 text-white hover:bg-white/20\"\n            >\n              {isMinimized ? (\n                <Maximize2 className=\"h-4 w-4\" />\n              ) : (\n                <Minimize2 className=\"h-4 w-4\" />\n              )}\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={toggleOpen}\n              className=\"h-7 w-7 p-0 text-white hover:bg-white/20\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {!isMinimized && (\n          <>\n            {/* Conversation Area */}\n            <ScrollArea className=\"flex-1 p-4\" ref={scrollAreaRef}>\n              <div className=\"space-y-4\">\n                {messages.map((message, index) => (\n                  <div\n                    key={index}\n                    className={`flex gap-3 ${\n                      message.role === 'user' ? 'justify-end' : 'justify-start'\n                    }`}\n                  >\n                    {message.role === 'assistant' && (\n                      <Avatar className=\"h-8 w-8 flex-shrink-0\">\n                        <AvatarFallback className=\"bg-gradient-to-br from-blue-500 to-purple-500 text-white\">\n                          <Brain className=\"h-4 w-4\" />\n                        </AvatarFallback>\n                      </Avatar>\n                    )}\n                    <div\n                      className={`flex flex-col gap-1 max-w-[80%] ${\n                        message.role === 'user' ? 'items-end' : 'items-start'\n                      }`}\n                    >\n                      <div\n                        className={`rounded-lg px-4 py-2 ${\n                          message.role === 'user'\n                            ? 'bg-blue-600 text-white'\n                            : 'bg-gray-100 text-gray-900'\n                        }`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap break-words\">\n                          {message.content}\n                        </p>\n                      </div>\n                      <span className=\"text-xs text-muted-foreground px-1\">\n                        {formatTime(message.timestamp)}\n                      </span>\n                    </div>\n                    {message.role === 'user' && (\n                      <Avatar className=\"h-8 w-8 flex-shrink-0\">\n                        <AvatarFallback className=\"bg-gray-300\">\n                          U\n                        </AvatarFallback>\n                      </Avatar>\n                    )}\n                  </div>\n                ))}\n                {isLoading && (\n                  <div className=\"flex gap-3 justify-start\">\n                    <Avatar className=\"h-8 w-8 flex-shrink-0\">\n                      <AvatarFallback className=\"bg-gradient-to-br from-blue-500 to-purple-500 text-white\">\n                        <Brain className=\"h-4 w-4\" />\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"bg-gray-100 rounded-lg px-4 py-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin text-gray-600\" />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n\n            {/* Input Area */}\n            <div className=\"border-t p-4 bg-gray-50\">\n              <form onSubmit={handleSubmit} className=\"flex gap-2\">\n                <Textarea\n                  ref={textareaRef}\n                  value={input}\n                  onChange={(e) => setInput(e.target.value)}\n                  onKeyDown={handleKeyDown}\n                  placeholder=\"Ask me anything about your project...\"\n                  className=\"min-h-[44px] max-h-[120px] resize-none\"\n                  disabled={isLoading}\n                />\n                <Button\n                  type=\"submit\"\n                  size=\"icon\"\n                  disabled={!input.trim() || isLoading}\n                  className=\"flex-shrink-0\"\n                >\n                  <Send className=\"h-4 w-4\" />\n                </Button>\n              </form>\n              <p className=\"text-xs text-muted-foreground mt-2 text-center\">\n                Powered by AI  Press Enter to send\n              </p>\n            </div>\n          </>\n        )}\n\n        {isMinimized && (\n          <div className=\"p-4 text-center text-sm text-muted-foreground\">\n            Chat minimized. Click to expand.\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/auth/AutoOAuthTrigger.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":94,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2837,2910],"text":"\n            You&apos;ll be redirected to authorize the application\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2837,2910],"text":"\n            You&lsquo;ll be redirected to authorize the application\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2837,2910],"text":"\n            You&#39;ll be redirected to authorize the application\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2837,2910],"text":"\n            You&rsquo;ll be redirected to authorize the application\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-AU01, US-AU02\n */\n\"use client\"\n\n/**\n * Auto OAuth Trigger Component\n * \n * Automatically initiates OAuth flow when component mounts.\n * Used to handle cross-domain OAuth redirects from marketing site.\n * \n * This solves the PKCE code verifier mismatch issue by ensuring\n * OAuth flow starts and completes on the same domain.\n */\n\nimport { useEffect, useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { Loader2 } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\n\ninterface AutoOAuthTriggerProps {\n  provider: 'github' | 'google';\n  next?: string;\n}\n\nexport function AutoOAuthTrigger({ provider, next = '/dashboard' }: AutoOAuthTriggerProps) {\n  const [error, setError] = useState<string | null>(null);\n  const [isInitiating, setIsInitiating] = useState(true);\n\n  useEffect(() => {\n    const initiateOAuth = async () => {\n      try {\n        const supabase = createClient();\n        const redirectUrl = `${window.location.origin}/auth/callback?next=${encodeURIComponent(next)}`;\n\n        console.log('Auto-initiating OAuth:', { provider, redirectUrl });\n\n        const { data, error } = await supabase.auth.signInWithOAuth({\n          provider,\n          options: {\n            redirectTo: redirectUrl,\n          },\n        });\n\n        if (error) {\n          console.error('OAuth initiation error:', error);\n          setError(error.message);\n          setIsInitiating(false);\n          return;\n        }\n\n        if (data.url) {\n          // Redirect to OAuth provider\n          console.log('Redirecting to OAuth provider:', data.url);\n          window.location.href = data.url;\n        } else {\n          setError('No OAuth URL received from Supabase');\n          setIsInitiating(false);\n        }\n      } catch (err) {\n        console.error('OAuth trigger error:', err);\n        setError(err instanceof Error ? err.message : 'Failed to initiate OAuth');\n        setIsInitiating(false);\n      }\n    };\n\n    initiateOAuth();\n  }, [provider, next]);\n\n  if (error) {\n    return (\n      <Alert variant=\"destructive\" className=\"mb-6\">\n        <AlertDescription>\n          <strong>OAuth Error:</strong> {error}\n          <br />\n          <button \n            onClick={() => window.location.reload()} \n            className=\"underline mt-2\"\n          >\n            Try again\n          </button>\n        </AlertDescription>\n      </Alert>\n    );\n  }\n\n  return (\n    <div className=\"mb-6 p-6 border rounded-lg bg-muted/50\">\n      <div className=\"flex items-center justify-center gap-3\">\n        <Loader2 className=\"h-5 w-5 animate-spin text-primary\" />\n        <div className=\"text-center\">\n          <p className=\"font-medium\">Connecting to {provider === 'github' ? 'GitHub' : 'Google'}...</p>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            You'll be redirected to authorize the application\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/auth/LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BMCViabilityOverlay.tsx","messages":[{"ruleId":"import/no-anonymous-default-export","severity":1,"message":"Assign object to a variable before exporting as module default","line":455,"column":1,"nodeType":"ExportDefaultDeclaration","endLine":459,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP03\n */\n\"use client\"\n\n/**\n * BMC Viability Overlay Component\n *\n * Adds viability metrics overlay to Business Model Canvas Revenue Streams\n * and Cost Structure blocks. Displays Ledger Crew economics alongside\n * the standard BMC content.\n *\n * Usage:\n * - Use as standalone overlay cards for Revenue/Cost sections\n * - Or integrate into existing BMC component\n */\n\nimport React from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Progress } from '@/components/ui/progress'\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip'\nimport {\n  Coins,\n  DollarSign,\n  TrendingUp,\n  TrendingDown,\n  AlertTriangle,\n  Info,\n  Percent,\n  RefreshCcw,\n  ChevronDown,\n  ChevronUp\n} from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport type { ViabilityMetrics, ViabilityEvidence, ViabilitySignal } from '@/types/crewai'\nimport {\n  VIABILITY_BENCHMARKS,\n  formatBusinessModelType,\n  calculateBreakdownPercentages,\n  LTV_BREAKDOWN_CATEGORIES,\n  CAC_BREAKDOWN_CATEGORIES,\n  type MetricStatus\n} from '@/lib/viability/benchmarks'\nimport type { BusinessModelType } from '@/types/crewai'\n\ninterface ViabilityOverlayProps {\n  metrics?: ViabilityMetrics | null\n  evidence?: ViabilityEvidence | null\n  signal?: ViabilitySignal\n  businessModelType?: BusinessModelType\n  className?: string\n}\n\n/**\n * Revenue Streams with LTV Overlay\n *\n * Enhances the Revenue Streams block with:\n * - LTV estimate\n * - LTV breakdown (subscription, expansion, services)\n * - Monthly churn indicator\n */\ninterface RevenueStreamsOverlayProps extends ViabilityOverlayProps {\n  items: string[]\n}\n\nexport function RevenueStreamsOverlay({\n  items,\n  metrics,\n  evidence,\n  signal,\n  businessModelType = 'unknown',\n  className\n}: RevenueStreamsOverlayProps) {\n  const ltv = metrics?.ltv_usd ?? evidence?.ltv ?? 0\n  const ltvBreakdown = metrics?.ltv_breakdown ?? {}\n  const monthlyChurn = metrics?.monthly_churn_pct ?? 0\n  const hasBreakdown = Object.keys(ltvBreakdown).length > 0\n\n  const benchmark = VIABILITY_BENCHMARKS[businessModelType]\n  const breakdownPercentages = calculateBreakdownPercentages(ltvBreakdown)\n\n  return (\n    <Card className={cn('h-full border hover:shadow-md transition-all', className)}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-base font-medium\">\n            <Coins className=\"w-4 h-4 text-green-600\" />\n            Revenue Streams\n          </CardTitle>\n          {ltv > 0 && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge variant=\"outline\" className=\"text-green-700 border-green-300 bg-green-50\">\n                    LTV: ${formatNumber(ltv)}\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p className=\"text-xs\">Customer Lifetime Value from Ledger Crew</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n        </div>\n        <CardDescription className=\"text-sm\">\n          For what value are customers willing to pay?\n        </CardDescription>\n      </CardHeader>\n\n      <CardContent className=\"space-y-3\">\n        {/* Revenue Items */}\n        {items.length > 0 ? (\n          <div className=\"space-y-2\">\n            {items.map((item, index) => (\n              item.trim() && (\n                <div key={index} className=\"p-3 bg-muted/30 rounded-md text-sm leading-relaxed\">\n                  {item}\n                </div>\n              )\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-4 text-muted-foreground\">\n            <Coins className=\"w-6 h-6 mx-auto mb-2 opacity-40\" />\n            <p className=\"text-sm\">No revenue streams added</p>\n          </div>\n        )}\n\n        {/* LTV Metrics Overlay */}\n        {ltv > 0 && (\n          <div className=\"mt-4 p-3 rounded-lg bg-green-50 border border-green-100 space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-medium text-green-800 uppercase tracking-wide\">\n                Unit Economics\n              </span>\n              <TrendingUp className=\"h-4 w-4 text-green-600\" />\n            </div>\n\n            {/* LTV Breakdown Bar */}\n            {hasBreakdown && (\n              <div className=\"space-y-1\">\n                <div className=\"text-xs text-green-700 mb-1\">LTV Sources</div>\n                <div className=\"h-2 rounded-full overflow-hidden flex\">\n                  {breakdownPercentages.map((item, idx) => {\n                    const category = LTV_BREAKDOWN_CATEGORIES.find(c => c.key === item.key)\n                    return (\n                      <TooltipProvider key={item.key}>\n                        <Tooltip>\n                          <TooltipTrigger asChild>\n                            <div\n                              className={cn('h-full', category?.color ?? 'bg-gray-400')}\n                              style={{ width: `${item.percentage}%` }}\n                            />\n                          </TooltipTrigger>\n                          <TooltipContent>\n                            <p className=\"text-xs\">\n                              {category?.label ?? item.key}: ${formatNumber(item.value)} ({item.percentage.toFixed(0)}%)\n                            </p>\n                          </TooltipContent>\n                        </Tooltip>\n                      </TooltipProvider>\n                    )\n                  })}\n                </div>\n                <div className=\"flex flex-wrap gap-2 text-[10px] text-green-700\">\n                  {breakdownPercentages.map(item => {\n                    const category = LTV_BREAKDOWN_CATEGORIES.find(c => c.key === item.key)\n                    return (\n                      <span key={item.key} className=\"flex items-center gap-1\">\n                        <div className={cn('w-1.5 h-1.5 rounded-full', category?.color ?? 'bg-gray-400')} />\n                        {category?.label ?? item.key}: {item.percentage.toFixed(0)}%\n                      </span>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Churn Indicator */}\n            {monthlyChurn > 0 && (\n              <div className=\"flex items-center justify-between text-xs\">\n                <span className=\"text-green-700 flex items-center gap-1\">\n                  <RefreshCcw className=\"h-3 w-3\" />\n                  Monthly Churn\n                </span>\n                <span className={cn(\n                  'font-medium',\n                  monthlyChurn <= benchmark.typical_churn_pct ? 'text-green-700' :\n                  monthlyChurn <= benchmark.typical_churn_pct * 1.5 ? 'text-yellow-700' :\n                  'text-red-700'\n                )}>\n                  {(monthlyChurn * 100).toFixed(1)}%\n                  {monthlyChurn <= benchmark.typical_churn_pct && ' (healthy)'}\n                </span>\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n/**\n * Cost Structure with CAC Overlay\n *\n * Enhances the Cost Structure block with:\n * - CAC estimate\n * - CAC breakdown (marketing, sales, onboarding)\n * - Infrastructure costs from Build Crew\n */\ninterface CostStructureOverlayProps extends ViabilityOverlayProps {\n  items: string[]\n  infraCosts?: Record<string, number>\n  apiCosts?: Record<string, number>\n}\n\nexport function CostStructureOverlay({\n  items,\n  metrics,\n  evidence,\n  signal,\n  businessModelType = 'unknown',\n  infraCosts = {},\n  apiCosts = {},\n  className\n}: CostStructureOverlayProps) {\n  const cac = metrics?.cac_usd ?? evidence?.cac ?? 0\n  const cacBreakdown = metrics?.cac_breakdown ?? {}\n  const hasBreakdown = Object.keys(cacBreakdown).length > 0\n\n  const totalInfra = Object.values(infraCosts).reduce((sum, v) => sum + v, 0)\n  const totalApi = Object.values(apiCosts).reduce((sum, v) => sum + v, 0)\n  const totalMonthlyCost = totalInfra + totalApi\n\n  const benchmark = VIABILITY_BENCHMARKS[businessModelType]\n  const breakdownPercentages = calculateBreakdownPercentages(cacBreakdown)\n\n  return (\n    <Card className={cn('h-full border hover:shadow-md transition-all', className)}>\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-base font-medium\">\n            <DollarSign className=\"w-4 h-4 text-red-600\" />\n            Cost Structure\n          </CardTitle>\n          {cac > 0 && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge variant=\"outline\" className=\"text-red-700 border-red-300 bg-red-50\">\n                    CAC: ${formatNumber(cac)}\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p className=\"text-xs\">Customer Acquisition Cost from Ledger Crew</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n        </div>\n        <CardDescription className=\"text-sm\">\n          What are the most important costs in your business model?\n        </CardDescription>\n      </CardHeader>\n\n      <CardContent className=\"space-y-3\">\n        {/* Cost Items */}\n        {items.length > 0 ? (\n          <div className=\"space-y-2\">\n            {items.map((item, index) => (\n              item.trim() && (\n                <div key={index} className=\"p-3 bg-muted/30 rounded-md text-sm leading-relaxed\">\n                  {item}\n                </div>\n              )\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-4 text-muted-foreground\">\n            <DollarSign className=\"w-6 h-6 mx-auto mb-2 opacity-40\" />\n            <p className=\"text-sm\">No costs added</p>\n          </div>\n        )}\n\n        {/* CAC Metrics Overlay */}\n        {cac > 0 && (\n          <div className=\"mt-4 p-3 rounded-lg bg-red-50 border border-red-100 space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-xs font-medium text-red-800 uppercase tracking-wide\">\n                Acquisition Costs\n              </span>\n              <TrendingDown className=\"h-4 w-4 text-red-600\" />\n            </div>\n\n            {/* CAC Breakdown Bar */}\n            {hasBreakdown && (\n              <div className=\"space-y-1\">\n                <div className=\"text-xs text-red-700 mb-1\">CAC Sources</div>\n                <div className=\"h-2 rounded-full overflow-hidden flex\">\n                  {breakdownPercentages.map((item, idx) => {\n                    const category = CAC_BREAKDOWN_CATEGORIES.find(c => c.key === item.key)\n                    return (\n                      <TooltipProvider key={item.key}>\n                        <Tooltip>\n                          <TooltipTrigger asChild>\n                            <div\n                              className={cn('h-full', category?.color ?? 'bg-gray-400')}\n                              style={{ width: `${item.percentage}%` }}\n                            />\n                          </TooltipTrigger>\n                          <TooltipContent>\n                            <p className=\"text-xs\">\n                              {category?.label ?? item.key}: ${formatNumber(item.value)} ({item.percentage.toFixed(0)}%)\n                            </p>\n                          </TooltipContent>\n                        </Tooltip>\n                      </TooltipProvider>\n                    )\n                  })}\n                </div>\n                <div className=\"flex flex-wrap gap-2 text-[10px] text-red-700\">\n                  {breakdownPercentages.map(item => {\n                    const category = CAC_BREAKDOWN_CATEGORIES.find(c => c.key === item.key)\n                    return (\n                      <span key={item.key} className=\"flex items-center gap-1\">\n                        <div className={cn('w-1.5 h-1.5 rounded-full', category?.color ?? 'bg-gray-400')} />\n                        {category?.label ?? item.key}: {item.percentage.toFixed(0)}%\n                      </span>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Infrastructure Costs (from Build Crew) */}\n        {totalMonthlyCost > 0 && (\n          <div className=\"mt-2 p-3 rounded-lg bg-blue-50 border border-blue-100\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-xs font-medium text-blue-800 uppercase tracking-wide\">\n                Monthly Infrastructure\n              </span>\n              <span className=\"text-sm font-bold text-blue-700\">\n                ${formatNumber(totalMonthlyCost)}/mo\n              </span>\n            </div>\n\n            {Object.keys(infraCosts).length > 0 && (\n              <div className=\"space-y-1 text-xs text-blue-700\">\n                {Object.entries(infraCosts).map(([key, value]) => (\n                  <div key={key} className=\"flex justify-between\">\n                    <span className=\"capitalize\">{key}</span>\n                    <span>${formatNumber(value)}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {Object.keys(apiCosts).length > 0 && (\n              <div className=\"space-y-1 text-xs text-blue-700 mt-2 pt-2 border-t border-blue-200\">\n                {Object.entries(apiCosts).map(([key, value]) => (\n                  <div key={key} className=\"flex justify-between\">\n                    <span className=\"capitalize\">{key} API</span>\n                    <span>${formatNumber(value)}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\n/**\n * Compact LTV/CAC Summary\n *\n * A small inline display of the key viability metrics\n * for use in BMC headers or compact views.\n */\nexport function ViabilitySummaryBar({\n  metrics,\n  evidence,\n  signal,\n  className\n}: ViabilityOverlayProps) {\n  const cac = metrics?.cac_usd ?? evidence?.cac ?? 0\n  const ltv = metrics?.ltv_usd ?? evidence?.ltv ?? 0\n  const ratio = metrics?.ltv_cac_ratio ?? evidence?.ltv_cac_ratio ?? 0\n  const grossMargin = metrics?.gross_margin_pct ?? evidence?.gross_margin ?? 0\n\n  if (cac === 0 && ltv === 0) {\n    return (\n      <div className={cn('flex items-center gap-2 text-sm text-muted-foreground', className)}>\n        <Info className=\"h-4 w-4\" />\n        <span>No viability data available</span>\n      </div>\n    )\n  }\n\n  const getSignalColor = () => {\n    if (signal === 'profitable') return 'text-green-600'\n    if (signal === 'marginal') return 'text-yellow-600'\n    if (signal === 'underwater') return 'text-red-600'\n    if (signal === 'zombie_market') return 'text-purple-600'\n    return 'text-gray-600'\n  }\n\n  return (\n    <div className={cn('flex items-center gap-4 text-sm', className)}>\n      <div className=\"flex items-center gap-1\">\n        <span className=\"text-muted-foreground\">LTV:</span>\n        <span className=\"font-medium text-green-600\">${formatNumber(ltv)}</span>\n      </div>\n      <div className=\"text-muted-foreground\">/</div>\n      <div className=\"flex items-center gap-1\">\n        <span className=\"text-muted-foreground\">CAC:</span>\n        <span className=\"font-medium text-red-600\">${formatNumber(cac)}</span>\n      </div>\n      <div className=\"text-muted-foreground\">=</div>\n      <div className={cn('flex items-center gap-1 font-bold', getSignalColor())}>\n        {ratio.toFixed(1)}x\n        {ratio >= 3 && <TrendingUp className=\"h-4 w-4\" />}\n        {ratio < 1 && <TrendingDown className=\"h-4 w-4\" />}\n      </div>\n      {grossMargin > 0 && (\n        <>\n          <div className=\"text-muted-foreground\">|</div>\n          <div className=\"flex items-center gap-1\">\n            <span className=\"text-muted-foreground\">Margin:</span>\n            <span className=\"font-medium\">{Math.round(grossMargin * 100)}%</span>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n\n// Helper function\nfunction formatNumber(n: number): string {\n  if (n >= 1_000_000) return `${(n / 1_000_000).toFixed(1)}M`\n  if (n >= 1_000) return `${(n / 1_000).toFixed(1)}K`\n  return n.toLocaleString()\n}\n\nexport default {\n  RevenueStreamsOverlay,\n  CostStructureOverlay,\n  ViabilitySummaryBar\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:76:7\n  74 |         revenueStreams: Array.isArray(initialData.revenueStreams) ? initialData.revenueStreams : []\n  75 |       };\n> 76 |       setCanvasData(mergedData);\n     |       ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  77 |     } else if (canvasId) {\n  78 |       // Try to load from localStorage\n  79 |       const saved = localStorage.getItem(`bmc-canvas-${canvasId}`);","line":76,"column":7,"nodeType":null,"endLine":76,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:358:10\n  356 |       <div className=\"grid grid-cols-5 gap-4 min-h-[800px]\">\n  357 |         {/* Row 1 */}\n> 358 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  359 |           title=\"Key Partners\"\n  360 |           items={canvasData.keyPartners}\n  361 |           section=\"keyPartners\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":358,"column":10,"nodeType":null,"endLine":358,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:366:10\n  364 |         />\n  365 |         \n> 366 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  367 |           title=\"Key Activities\"\n  368 |           items={canvasData.keyActivities}\n  369 |           section=\"keyActivities\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":366,"column":10,"nodeType":null,"endLine":366,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:374:10\n  372 |         />\n  373 |         \n> 374 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  375 |           title=\"Value Propositions\"\n  376 |           items={canvasData.valuePropositions}\n  377 |           section=\"valuePropositions\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":374,"column":10,"nodeType":null,"endLine":374,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:382:10\n  380 |         />\n  381 |         \n> 382 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  383 |           title=\"Customer Relationships\"\n  384 |           items={canvasData.customerRelationships}\n  385 |           section=\"customerRelationships\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":382,"column":10,"nodeType":null,"endLine":382,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:390:10\n  388 |         />\n  389 |         \n> 390 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  391 |           title=\"Customer Segments\"\n  392 |           items={canvasData.customerSegments}\n  393 |           section=\"customerSegments\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":390,"column":10,"nodeType":null,"endLine":390,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:399:10\n  397 |\n  398 |         {/* Row 2 */}\n> 399 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  400 |           title=\"Key Resources\"\n  401 |           items={canvasData.keyResources}\n  402 |           section=\"keyResources\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":399,"column":10,"nodeType":null,"endLine":399,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:410:10\n  408 |         <div></div> {/* Empty cell for layout */}\n  409 |         \n> 410 |         <BMCSection\n      |          ^^^^^^^^^^ This component is created during render\n  411 |           title=\"Channels\"\n  412 |           items={canvasData.channels}\n  413 |           section=\"channels\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":410,"column":10,"nodeType":null,"endLine":410,"endColumn":20},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:422:12\n  420 |         {/* Row 3 */}\n  421 |         <div className=\"col-span-2\">\n> 422 |           <BMCSection\n      |            ^^^^^^^^^^ This component is created during render\n  423 |             title=\"Cost Structure\"\n  424 |             items={canvasData.costStructure}\n  425 |             section=\"costStructure\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":422,"column":12,"nodeType":null,"endLine":422,"endColumn":22},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:434:12\n  432 |         \n  433 |         <div className=\"col-span-2\">\n> 434 |           <BMCSection\n      |            ^^^^^^^^^^ This component is created during render\n  435 |             title=\"Revenue Streams\"\n  436 |             items={canvasData.revenueStreams}\n  437 |             section=\"revenueStreams\"\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/BusinessModelCanvas.tsx:238:22\n  236 |   };\n  237 |\n> 238 |   const BMCSection = ({ \n      |                      ^^^\n> 239 |     title, \n      | ^^^^^^^^^^^\n> 240 |     items, \n      \n      | ^^^^^^^^^^^\n> 312 |     );\n      | ^^^^^^^^^^^\n> 313 |   };\n      | ^^^^ The component is created during render here\n  314 |\n  315 |   return (\n  316 |     <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">","line":434,"column":12,"nodeType":null,"endLine":434,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * BusinessModelCanvas Component\n *\n * Interactive canvas for editing Business Model Canvas data.\n *\n * @story US-F12\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Input } from '@/components/ui/input';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/components/ui/dialog';\nimport { Plus, Save, X, Sparkles, Building2, Users, DollarSign, Zap, Heart, Truck, UserCheck, Coins, Target } from 'lucide-react';\n\ninterface BusinessModelCanvasProps {\n  canvasId?: string;\n  clientId?: string;\n  initialData?: any;\n  onSave?: (data: any) => void;\n  readOnly?: boolean;\n}\n\ninterface BMCData {\n  keyPartners: string[];\n  keyActivities: string[];\n  keyResources: string[];\n  valuePropositions: string[];\n  customerRelationships: string[];\n  channels: string[];\n  customerSegments: string[];\n  costStructure: string[];\n  revenueStreams: string[];\n}\n\nconst defaultBMC: BMCData = {\n  keyPartners: [],\n  keyActivities: [],\n  keyResources: [],\n  valuePropositions: [],\n  customerRelationships: [],\n  channels: [],\n  customerSegments: [],\n  costStructure: [],\n  revenueStreams: []\n};\n\nexport default function BusinessModelCanvas({ \n  canvasId, \n  initialData, \n  onSave, \n  readOnly = false \n}: BusinessModelCanvasProps) {\n  const [canvasData, setCanvasData] = useState<BMCData>(defaultBMC);\n\n  const [editingSection, setEditingSection] = useState<string | null>(null);\n  const [newItem, setNewItem] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  useEffect(() => {\n    if (initialData) {\n      // Merge with default data to ensure all fields exist and are arrays\n      const mergedData: BMCData = {\n        keyPartners: Array.isArray(initialData.keyPartners) ? initialData.keyPartners : [],\n        keyActivities: Array.isArray(initialData.keyActivities) ? initialData.keyActivities : [],\n        keyResources: Array.isArray(initialData.keyResources) ? initialData.keyResources : [],\n        valuePropositions: Array.isArray(initialData.valuePropositions) ? initialData.valuePropositions : [],\n        customerRelationships: Array.isArray(initialData.customerRelationships) ? initialData.customerRelationships : [],\n        channels: Array.isArray(initialData.channels) ? initialData.channels : [],\n        customerSegments: Array.isArray(initialData.customerSegments) ? initialData.customerSegments : [],\n        costStructure: Array.isArray(initialData.costStructure) ? initialData.costStructure : [],\n        revenueStreams: Array.isArray(initialData.revenueStreams) ? initialData.revenueStreams : []\n      };\n      setCanvasData(mergedData);\n    } else if (canvasId) {\n      // Try to load from localStorage\n      const saved = localStorage.getItem(`bmc-canvas-${canvasId}`);\n      if (saved) {\n        try {\n          const parsedData = JSON.parse(saved);\n          const mergedData: BMCData = {\n            keyPartners: Array.isArray(parsedData.keyPartners) ? parsedData.keyPartners : [],\n            keyActivities: Array.isArray(parsedData.keyActivities) ? parsedData.keyActivities : [],\n            keyResources: Array.isArray(parsedData.keyResources) ? parsedData.keyResources : [],\n            valuePropositions: Array.isArray(parsedData.valuePropositions) ? parsedData.valuePropositions : [],\n            customerRelationships: Array.isArray(parsedData.customerRelationships) ? parsedData.customerRelationships : [],\n            channels: Array.isArray(parsedData.channels) ? parsedData.channels : [],\n            customerSegments: Array.isArray(parsedData.customerSegments) ? parsedData.customerSegments : [],\n            costStructure: Array.isArray(parsedData.costStructure) ? parsedData.costStructure : [],\n            revenueStreams: Array.isArray(parsedData.revenueStreams) ? parsedData.revenueStreams : []\n          };\n          setCanvasData(mergedData);\n        } catch (error) {\n          console.error('Error parsing saved canvas data:', error);\n        }\n      }\n    }\n  }, [initialData, canvasId]);\n\n  const addItem = (section: keyof BMCData) => {\n    if (!newItem.trim()) return;\n    \n    setCanvasData(prev => ({\n      ...prev,\n      [section]: [...prev[section], newItem.trim()]\n    }));\n    \n    setNewItem('');\n    setEditingSection(null);\n  };\n\n  const handleAddClick = (section: keyof BMCData) => {\n    setEditingSection(section);\n    setNewItem('');\n  };\n\n  const handleAddSubmit = () => {\n    if (editingSection && newItem.trim()) {\n      addItem(editingSection as keyof BMCData);\n      // Dialog will close automatically via addItem -> setEditingSection(null)\n    }\n  };\n\n  const handleAddCancel = () => {\n    setEditingSection(null);\n    setNewItem('');\n  };\n\n  const updateItem = (section: keyof BMCData, index: number, value: string) => {\n    setCanvasData(prev => ({\n      ...prev,\n      [section]: prev[section].map((item, i) => i === index ? value : item)\n    }));\n  };\n\n  // Stable controlled input pattern to prevent typing interruption\n  const handleTextareaChange = React.useCallback(\n    (section: keyof BMCData, index: number, value: string) => {\n      // Use functional update to prevent re-render interruption during typing\n      setCanvasData(prev => {\n        const newData = { ...prev };\n        const newArray = [...newData[section]];\n        newArray[index] = value;\n        newData[section] = newArray;\n        return newData;\n      });\n    },\n    []\n  );\n\n  const removeItem = (section: keyof BMCData, index: number) => {\n    setCanvasData(prev => ({\n      ...prev,\n      [section]: prev[section].filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleSave = () => {\n    if (onSave) {\n      onSave(canvasData);\n    } else if (canvasId) {\n      // Save to localStorage if no callback provided\n      localStorage.setItem(`bmc-canvas-${canvasId}`, JSON.stringify(canvasData));\n    }\n  };\n\n  const generateWithAI = async () => {\n    setIsGenerating(true);\n    try {\n      // Mock AI generation for now\n      setTimeout(() => {\n        setCanvasData({\n          keyPartners: [\n            \"Technology vendors\",\n            \"Cloud infrastructure providers\",\n            \"Integration partners\",\n            \"Channel partners\"\n          ],\n          keyActivities: [\n            \"Software development\",\n            \"AI model training\",\n            \"Customer support\",\n            \"Platform maintenance\"\n          ],\n          keyResources: [\n            \"AI technology stack\",\n            \"Development team\",\n            \"Customer data\",\n            \"Brand reputation\"\n          ],\n          valuePropositions: [\n            \"AI-powered business insights\",\n            \"Automated decision making\",\n            \"Real-time analytics\",\n            \"Cost reduction solutions\"\n          ],\n          customerRelationships: [\n            \"Dedicated account management\",\n            \"Self-service platform\",\n            \"Community support\",\n            \"Training programs\"\n          ],\n          channels: [\n            \"Direct sales\",\n            \"Online platform\",\n            \"Partner channels\",\n            \"Digital marketing\"\n          ],\n          customerSegments: [\n            \"Enterprise businesses\",\n            \"Mid-market companies\",\n            \"Technology startups\",\n            \"Consulting firms\"\n          ],\n          costStructure: [\n            \"R&D and development\",\n            \"Cloud infrastructure\",\n            \"Sales and marketing\",\n            \"Customer support\"\n          ],\n          revenueStreams: [\n            \"SaaS subscriptions\",\n            \"Professional services\",\n            \"Training and certification\",\n            \"API usage fees\"\n          ]\n        });\n        setIsGenerating(false);\n      }, 2000);\n    } catch (error) {\n      console.error('AI generation failed:', error);\n      setIsGenerating(false);\n    }\n  };\n\n  const BMCSection = ({ \n    title, \n    items, \n    section, \n    icon: Icon,\n    description \n  }: {\n    title: string;\n    items: string[];\n    section: keyof BMCData;\n    icon: any;\n    description: string;\n  }) => {\n    const hasContent = items.some(item => item.trim());\n    \n    return (\n      <Card className=\"h-full border hover:shadow-md transition-all\">\n        <CardHeader className=\"pb-4\">\n          <CardTitle className=\"flex items-center gap-2 text-base font-medium\">\n            <Icon className=\"w-4 h-4 text-muted-foreground\" />\n            {title}\n          </CardTitle>\n          <CardDescription className=\"text-sm\">\n            {description}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          {hasContent ? (\n            <div className=\"space-y-2\">\n              {items.map((item, index) => {\n                if (!item.trim()) {\n                  return null;\n                }\n\n                return (\n                  <div key={`${section}-${index}`} className=\"group relative\">\n                  <div className=\"p-3 bg-muted/30 rounded-md text-sm leading-relaxed\">\n                    {item}\n                  </div>\n                  {!readOnly && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => removeItem(section, index)}\n                      className=\"absolute top-1 right-1 opacity-0 group-hover:opacity-100 h-6 w-6 p-0 text-muted-foreground hover:text-destructive\"\n                      aria-label={`Remove ${item ? `${item} from ${title}` : `item ${index + 1} from ${title}`}`}\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </Button>\n                  )}\n                </div>\n                );\n              })}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <Icon className=\"w-8 h-8 mx-auto mb-2 opacity-40\" />\n              <p className=\"text-sm\">No items added yet</p>\n            </div>\n          )}\n          \n          {!readOnly && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => handleAddClick(section)}\n              className=\"w-full mt-3\"\n            >\n              <Plus className=\"w-3 h-3 mr-2\" />\n              Add {title.slice(0, -1)}\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n            <Building2 className=\"w-6 h-6 text-blue-600\" />\n            Business Model Canvas\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Visualize and design your business model\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          {!readOnly && (\n            <>\n              <Button\n                variant=\"outline\"\n                onClick={generateWithAI}\n                disabled={isGenerating}\n                className=\"flex items-center gap-2\"\n              >\n                <Sparkles className=\"w-4 h-4\" />\n                {isGenerating ? 'Generating...' : 'AI Generate'}\n              </Button>\n              <button \n                onClick={handleSave} \n                aria-label=\"Save Canvas\" \n                data-testid=\"save-canvas-button\"\n                className=\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 cursor-pointer\"\n                style={{ pointerEvents: 'auto' }}\n              >\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save Canvas\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* 9-Block Canvas Layout */}\n      <div className=\"grid grid-cols-5 gap-4 min-h-[800px]\">\n        {/* Row 1 */}\n        <BMCSection\n          title=\"Key Partners\"\n          items={canvasData.keyPartners}\n          section=\"keyPartners\"\n          icon={UserCheck}\n          description=\"Who are your key partners and suppliers?\"\n        />\n        \n        <BMCSection\n          title=\"Key Activities\"\n          items={canvasData.keyActivities}\n          section=\"keyActivities\"\n          icon={Zap}\n          description=\"What key activities does your value proposition require?\"\n        />\n        \n        <BMCSection\n          title=\"Value Propositions\"\n          items={canvasData.valuePropositions}\n          section=\"valuePropositions\"\n          icon={Target}\n          description=\"What value do you deliver to customers?\"\n        />\n        \n        <BMCSection\n          title=\"Customer Relationships\"\n          items={canvasData.customerRelationships}\n          section=\"customerRelationships\"\n          icon={Heart}\n          description=\"What type of relationship do you establish?\"\n        />\n        \n        <BMCSection\n          title=\"Customer Segments\"\n          items={canvasData.customerSegments}\n          section=\"customerSegments\"\n          icon={Users}\n          description=\"For whom are you creating value?\"\n        />\n\n        {/* Row 2 */}\n        <BMCSection\n          title=\"Key Resources\"\n          items={canvasData.keyResources}\n          section=\"keyResources\"\n          icon={Building2}\n          description=\"What key resources does your value proposition require?\"\n        />\n        \n        <div></div> {/* Empty cell for layout */}\n        <div></div> {/* Empty cell for layout */}\n        \n        <BMCSection\n          title=\"Channels\"\n          items={canvasData.channels}\n          section=\"channels\"\n          icon={Truck}\n          description=\"Through which channels do you reach customers?\"\n        />\n        \n        <div></div> {/* Empty cell for layout */}\n\n        {/* Row 3 */}\n        <div className=\"col-span-2\">\n          <BMCSection\n            title=\"Cost Structure\"\n            items={canvasData.costStructure}\n            section=\"costStructure\"\n            icon={DollarSign}\n            description=\"What are the most important costs in your business model?\"\n          />\n        </div>\n        \n        <div></div> {/* Empty cell for layout */}\n        \n        <div className=\"col-span-2\">\n          <BMCSection\n            title=\"Revenue Streams\"\n            items={canvasData.revenueStreams}\n            section=\"revenueStreams\"\n            icon={Coins}\n            description=\"For what value are customers willing to pay?\"\n          />\n        </div>\n      </div>\n\n      {/* Add Item Dialog */}\n      <Dialog open={editingSection !== null} onOpenChange={(open) => !open && handleAddCancel()}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              Add {editingSection ? editingSection.replace(/([A-Z])/g, ' $1').toLowerCase() : ''}\n            </DialogTitle>\n            <DialogDescription>\n              Provide the details for the new entry and choose Add to include it in the canvas.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Input\n              placeholder={`Enter ${editingSection ? editingSection.replace(/([A-Z])/g, ' $1').toLowerCase() : 'item'}...`}\n              value={newItem}\n              onChange={(e) => setNewItem(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && newItem.trim()) {\n                  handleAddSubmit();\n                }\n                if (e.key === 'Escape') {\n                  handleAddCancel();\n                }\n              }}\n              autoFocus\n            />\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleAddCancel}>\n              Cancel\n            </Button>\n            <Button onClick={handleAddSubmit} disabled={!newItem.trim()}>\n              Add\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* AI Generation Status */}\n      {isGenerating && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <Card className=\"p-6 max-w-md\">\n            <div className=\"text-center space-y-4\">\n              <Sparkles className=\"w-8 h-8 mx-auto animate-spin text-blue-600\" />\n              <h3 className=\"font-semibold\">AI Generating Business Model</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Analyzing business requirements and creating comprehensive model...\n              </p>\n            </div>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/CanvasEditor.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadCanvas' and 'mode'. Either include them or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [canvasId, canvasType, clientId, loadCanvas, mode]","fix":{"range":[1968,2000],"text":"[canvasId, canvasType, clientId, loadCanvas, mode]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP02, US-CP03, US-CP04\n */\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Save, Download, Share2, History, Eye, Edit3, Sparkles, Users, MessageSquare } from 'lucide-react';\nimport ValuePropositionCanvas from './ValuePropositionCanvas';\nimport BusinessModelCanvas from './BusinessModelCanvas';\nimport TestingBusinessIdeasCanvas from './TestingBusinessIdeasCanvas';\nimport api from '@/services/api';\n\ninterface CanvasEditorProps {\n  canvasId?: string;\n  canvasType: 'value-proposition' | 'business-model' | 'testing-business-ideas';\n  clientId: string;\n  mode?: 'view' | 'edit' | 'collaborate';\n}\n\ninterface CanvasMetadata {\n  id: string;\n  name: string;\n  type: string;\n  status: string;\n  lastModified: string;\n  collaborators: Array<{\n    id: string;\n    name: string;\n    avatar?: string;\n    role: string;\n  }>;\n  aiGenerated: boolean;\n  version: number;\n}\n\nexport default function CanvasEditor({ \n  canvasId, \n  canvasType, \n  clientId, \n  mode = 'edit' \n}: CanvasEditorProps) {\n  const [canvasData, setCanvasData] = useState<any>(null);\n  const [metadata, setMetadata] = useState<CanvasMetadata | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [activeCollaborators, setActiveCollaborators] = useState<string[]>([]);\n  const [showHistory, setShowHistory] = useState(false);\n  const [aiSuggestions, setAiSuggestions] = useState<any[]>([]);\n\n  useEffect(() => {\n    loadCanvas();\n    if (mode === 'collaborate') {\n      // Initialize real-time collaboration\n      initializeCollaboration();\n    }\n  }, [canvasId, canvasType, clientId]);\n\n  const loadCanvas = async () => {\n    setLoading(true);\n    try {\n      // Validate required clientId\n      if (!clientId || clientId.trim() === '') {\n        // Keep loading state when clientId is missing\n        return;\n      }\n\n      if (canvasId) {\n        // Load existing canvas\n        const response = await api.canvas.getById(canvasId);\n        setCanvasData(response.canvas.data);\n        setMetadata(response.metadata);\n      } else {\n        // Create new canvas\n        setCanvasData(getEmptyCanvasData());\n        setMetadata({\n          id: 'new',\n          name: `New ${getCanvasTypeName()}`,\n          type: canvasType,\n          status: 'draft',\n          lastModified: new Date().toISOString(),\n          collaborators: [],\n          aiGenerated: false,\n          version: 1\n        });\n      }\n    } catch (error) {\n      console.error('Failed to load canvas:', error);\n    } finally {\n      // Only set loading to false if clientId is valid\n      if (clientId && clientId.trim() !== '') {\n        setLoading(false);\n      }\n    }\n  };\n\n  const initializeCollaboration = () => {\n    // This would set up WebSocket connection for real-time collaboration\n    // For now, simulate active collaborators\n    setActiveCollaborators(['user1', 'user2']);\n  };\n\n  const getEmptyCanvasData = () => {\n    switch (canvasType) {\n      case 'value-proposition':\n        return {\n          customerProfile: {\n            customerJobs: [],\n            pains: [],\n            gains: []\n          },\n          valueMap: {\n            products: [],\n            painRelievers: [],\n            gainCreators: []\n          }\n        };\n      case 'business-model':\n        return {\n          keyPartners: [],\n          keyActivities: [],\n          keyResources: [],\n          valuePropositions: [],\n          customerRelationships: [],\n          channels: [],\n          customerSegments: [],\n          costStructure: [],\n          revenueStreams: []\n        };\n      default:\n        return {};\n    }\n  };\n\n  const getCanvasTypeName = () => {\n    switch (canvasType) {\n      case 'value-proposition':\n        return 'Value Proposition Canvas';\n      case 'business-model':\n        return 'Business Model Canvas';\n      case 'testing-business-ideas':\n        return 'Testing Business Ideas';\n      default:\n        return 'Canvas';\n    }\n  };\n\n  const handleSave = async (data: any) => {\n    setSaving(true);\n    try {\n      if (canvasId && canvasId !== 'new') {\n        await api.canvas.updateCanvas(canvasId, data);\n      } else {\n        // Create new canvas\n        const response = await api.canvas.generateValueProposition({\n          clientId,\n          title: metadata?.name,\n          description: 'Canvas created via editor'\n        });\n        // Handle response\n      }\n      setCanvasData(data);\n      if (metadata) {\n        setMetadata({\n          ...metadata,\n          lastModified: new Date().toISOString(),\n          version: metadata.version + 1\n        });\n      }\n    } catch (error) {\n      console.error('Failed to save canvas:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleExport = async (format: 'svg' | 'png' | 'pdf') => {\n    if (!canvasId || canvasId === 'new') return;\n    \n    try {\n      const response = await api.canvas.exportCanvas(canvasId, format);\n      // Handle export download\n      const blob = new Blob([response], { type: `image/${format}` });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${metadata?.name || 'canvas'}.${format}`;\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Export failed:', error);\n    }\n  };\n\n  const generateAISuggestions = async () => {\n    try {\n      // This would call AI to generate suggestions based on current canvas state\n      setAiSuggestions([\n        {\n          type: 'improvement',\n          section: 'customerJobs',\n          suggestion: 'Consider adding \"Automate repetitive tasks\" to customer jobs',\n          confidence: 0.85\n        },\n        {\n          type: 'validation',\n          section: 'valuePropositions',\n          suggestion: 'Your value propositions align well with identified customer pains',\n          confidence: 0.92\n        }\n      ]);\n    } catch (error) {\n      console.error('AI suggestions failed:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"text-muted-foreground\">Loading canvas...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const renderCanvas = () => {\n    switch (canvasType) {\n      case 'value-proposition':\n        return (\n          <ValuePropositionCanvas\n            canvasId={canvasId}\n            clientId={clientId}\n            initialData={canvasData}\n            onSave={handleSave}\n            readOnly={mode === 'view'}\n          />\n        );\n      case 'business-model':\n        return (\n          <BusinessModelCanvas\n            canvasId={canvasId}\n            clientId={clientId}\n            initialData={canvasData}\n            onSave={handleSave}\n            readOnly={mode === 'view'}\n          />\n        );\n      case 'testing-business-ideas':\n        return (\n          <TestingBusinessIdeasCanvas\n            canvasId={canvasId}\n            clientId={clientId}\n            initialData={canvasData}\n            onSave={handleSave}\n            readOnly={mode === 'view'}\n          />\n        );\n      default:\n        return <div>Canvas type not supported yet</div>;\n    }\n  };\n\n  return (\n    <div className=\"w-full space-y-6\">\n      {/* Canvas Header */}\n      <div className=\"flex items-center justify-between p-6 border-b bg-muted/20\">\n        <div className=\"flex items-center gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">{metadata?.name}</h1>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <Badge variant={metadata?.status === 'completed' ? 'default' : 'secondary'}>\n                {metadata?.status}\n              </Badge>\n              {metadata?.aiGenerated && (\n                <Badge variant=\"outline\" className=\"text-blue-600\">\n                  <Sparkles className=\"w-3 h-3 mr-1\" />\n                  AI Generated\n                </Badge>\n              )}\n              <span className=\"text-sm text-muted-foreground\">\n                v{metadata?.version}  Last modified {new Date(metadata?.lastModified || '').toLocaleDateString()}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {/* Active Collaborators */}\n          {mode === 'collaborate' && activeCollaborators.length > 0 && (\n            <div className=\"flex items-center gap-2 mr-4\">\n              <Users className=\"w-4 h-4 text-muted-foreground\" />\n              <div className=\"flex -space-x-2\">\n                {activeCollaborators.slice(0, 3).map((id, index) => (\n                  <div\n                    key={id}\n                    className=\"w-8 h-8 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center text-white text-xs font-medium\"\n                  >\n                    {index + 1}\n                  </div>\n                ))}\n              </div>\n              <span className=\"text-sm text-muted-foreground\">\n                {activeCollaborators.length} active\n              </span>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={generateAISuggestions}\n          >\n            <Sparkles className=\"w-4 h-4 mr-2\" />\n            AI Suggestions\n          </Button>\n\n          <Dialog>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\">\n                <Download className=\"w-4 h-4 mr-2\" />\n                Export\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>Export Canvas</DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Choose your preferred export format:\n                </p>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => handleExport('svg')}\n                    className=\"flex flex-col h-20\"\n                  >\n                    <div className=\"text-lg\"></div>\n                    <span className=\"text-xs\">SVG</span>\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => handleExport('png')}\n                    className=\"flex flex-col h-20\"\n                  >\n                    <div className=\"text-lg\"></div>\n                    <span className=\"text-xs\">PNG</span>\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => handleExport('pdf')}\n                    className=\"flex flex-col h-20\"\n                  >\n                    <div className=\"text-lg\"></div>\n                    <span className=\"text-xs\">PDF</span>\n                  </Button>\n                </div>\n              </div>\n            </DialogContent>\n          </Dialog>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowHistory(true)}\n          >\n            <History className=\"w-4 h-4 mr-2\" />\n            History\n          </Button>\n\n          <Button\n            size=\"sm\"\n            disabled={saving}\n          >\n            {saving ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Saving...\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n\n      {/* Canvas Content */}\n      <div className=\"relative\">\n        {renderCanvas()}\n\n        {/* AI Suggestions Panel */}\n        {aiSuggestions.length > 0 && (\n          <Card className=\"absolute top-4 right-4 w-80 max-h-96 overflow-y-auto\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Sparkles className=\"w-4 h-4 text-blue-600\" />\n                AI Suggestions\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {aiSuggestions.map((suggestion, index) => (\n                <div key={index} className=\"p-3 border rounded-lg space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {suggestion.type}\n                    </Badge>\n                    <span className=\"text-xs text-muted-foreground\">\n                      {Math.round(suggestion.confidence * 100)}% confidence\n                    </span>\n                  </div>\n                  <p className=\"text-sm\">{suggestion.suggestion}</p>\n                  <div className=\"flex gap-2\">\n                    <Button size=\"sm\" variant=\"outline\" className=\"h-6 text-xs\">\n                      Apply\n                    </Button>\n                    <Button size=\"sm\" variant=\"ghost\" className=\"h-6 text-xs\">\n                      Dismiss\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/CanvasGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/EditableValuePropositionCanvas.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":814,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[28996,29007],"text":"Relieves: &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[28996,29007],"text":"Relieves: &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[28996,29007],"text":"Relieves: &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[28996,29007],"text":"Relieves: &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":814,"column":102,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[29029,29030],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[29029,29030],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[29029,29030],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[29029,29030],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":851,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[30731,30741],"text":"Creates: &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[30731,30741],"text":"Creates: &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[30731,30741],"text":"Creates: &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[30731,30741],"text":"Creates: &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":851,"column":102,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[30763,30764],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[30763,30764],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[30763,30764],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[30763,30764],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP02\n */\n/**\n * Editable Value Proposition Canvas\n *\n * Inline-editable version of the VPC based on EnhancedValuePropositionCanvas design.\n * Supports click-to-edit, add/remove items, and shows source badges (AI vs Manual).\n *\n * Features:\n * - Same canonical Strategyzer VPC layout (purple Value Map, teal Customer Profile)\n * - Click-to-edit on any item\n * - Inline add/remove buttons\n * - Source badges (blue=AI, green=Manual)\n * - Integrates with useVPC hook\n */\n\n'use client';\n\nimport React, { useState, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Separator } from '@/components/ui/separator';\nimport { Slider } from '@/components/ui/slider';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from '@/components/ui/alert-dialog';\nimport {\n  Gift,\n  TrendingUp,\n  Pill,\n  Smile,\n  Frown,\n  Briefcase,\n  Heart,\n  Users,\n  Plus,\n  Trash2,\n  Edit2,\n  Check,\n  X,\n  Sparkles,\n  Bot,\n  User,\n  RotateCcw,\n  Loader2,\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport type {\n  VPCJobItem,\n  VPCPainItem,\n  VPCGainItem,\n  VPCItem,\n  VPCPainRelieverItem,\n  VPCGainCreatorItem,\n  ValuePropositionCanvas,\n} from '@/db/schema/value-proposition-canvas';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\ninterface EditableValuePropositionCanvasProps {\n  segment: ValuePropositionCanvas;\n  onAddJob: (job: Omit<VPCJobItem, 'id' | 'source' | 'createdAt' | 'updatedAt'>) => Promise<void>;\n  onUpdateJob: (jobId: string, updates: Partial<VPCJobItem>) => Promise<void>;\n  onRemoveJob: (jobId: string) => Promise<void>;\n  onAddPain: (pain: Omit<VPCPainItem, 'id' | 'source' | 'createdAt' | 'updatedAt'>) => Promise<void>;\n  onUpdatePain: (painId: string, updates: Partial<VPCPainItem>) => Promise<void>;\n  onRemovePain: (painId: string) => Promise<void>;\n  onAddGain: (gain: Omit<VPCGainItem, 'id' | 'source' | 'createdAt' | 'updatedAt'>) => Promise<void>;\n  onUpdateGain: (gainId: string, updates: Partial<VPCGainItem>) => Promise<void>;\n  onRemoveGain: (gainId: string) => Promise<void>;\n  onAddProductOrService: (text: string) => Promise<void>;\n  onUpdateProductOrService: (itemId: string, text: string) => Promise<void>;\n  onRemoveProductOrService: (itemId: string) => Promise<void>;\n  onAddPainReliever: (item: Omit<VPCPainRelieverItem, 'id' | 'source' | 'createdAt' | 'updatedAt'>) => Promise<void>;\n  onUpdatePainReliever: (itemId: string, updates: Partial<VPCPainRelieverItem>) => Promise<void>;\n  onRemovePainReliever: (itemId: string) => Promise<void>;\n  onAddGainCreator: (item: Omit<VPCGainCreatorItem, 'id' | 'source' | 'createdAt' | 'updatedAt'>) => Promise<void>;\n  onUpdateGainCreator: (itemId: string, updates: Partial<VPCGainCreatorItem>) => Promise<void>;\n  onRemoveGainCreator: (itemId: string) => Promise<void>;\n  onAddDifferentiator: (text: string) => Promise<void>;\n  onUpdateDifferentiator: (itemId: string, text: string) => Promise<void>;\n  onRemoveDifferentiator: (itemId: string) => Promise<void>;\n  onResetToCrewAI?: () => Promise<void>;\n  isSaving?: boolean;\n  className?: string;\n}\n\n// ============================================================================\n// SOURCE BADGE\n// ============================================================================\n\nfunction SourceBadge({ source }: { source: 'crewai' | 'manual' }) {\n  if (source === 'crewai') {\n    return (\n      <Badge variant=\"outline\" className=\"text-xs bg-blue-50 border-blue-200 text-blue-700\">\n        <Bot className=\"w-3 h-3 mr-1\" />\n        AI\n      </Badge>\n    );\n  }\n  return (\n    <Badge variant=\"outline\" className=\"text-xs bg-green-50 border-green-200 text-green-700\">\n      <User className=\"w-3 h-3 mr-1\" />\n      Manual\n    </Badge>\n  );\n}\n\n// ============================================================================\n// EDITABLE JOB CARD\n// ============================================================================\n\nfunction EditableJobCard({\n  job,\n  index,\n  onUpdate,\n  onRemove,\n  isSaving,\n}: {\n  job: VPCJobItem;\n  index: number;\n  onUpdate: (updates: Partial<VPCJobItem>) => Promise<void>;\n  onRemove: () => Promise<void>;\n  isSaving?: boolean;\n}) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({\n    functional: job.functional,\n    emotional: job.emotional,\n    social: job.social,\n    importance: job.importance,\n  });\n\n  const handleSave = async () => {\n    await onUpdate(editData);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditData({\n      functional: job.functional,\n      emotional: job.emotional,\n      social: job.social,\n      importance: job.importance,\n    });\n    setIsEditing(false);\n  };\n\n  if (isEditing) {\n    return (\n      <div className=\"p-3 bg-white border-2 border-blue-300 rounded-lg space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-xs font-medium text-muted-foreground\">Job {index + 1}</span>\n          <div className=\"flex gap-1\">\n            <Button size=\"sm\" variant=\"ghost\" onClick={handleCancel} disabled={isSaving}>\n              <X className=\"w-4 h-4\" />\n            </Button>\n            <Button size=\"sm\" onClick={handleSave} disabled={isSaving}>\n              {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <div>\n            <label htmlFor=\"edit-functional\" className=\"text-xs text-muted-foreground flex items-center gap-1\">\n              <Briefcase className=\"w-3 h-3\" aria-hidden=\"true\" /> Functional\n            </label>\n            <Textarea\n              id=\"edit-functional\"\n              value={editData.functional}\n              onChange={(e) => setEditData({ ...editData, functional: e.target.value })}\n              placeholder=\"What task are they trying to accomplish?\"\n              className=\"text-sm\"\n              rows={2}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"edit-emotional\" className=\"text-xs text-muted-foreground flex items-center gap-1\">\n              <Heart className=\"w-3 h-3\" aria-hidden=\"true\" /> Emotional\n            </label>\n            <Textarea\n              id=\"edit-emotional\"\n              value={editData.emotional}\n              onChange={(e) => setEditData({ ...editData, emotional: e.target.value })}\n              placeholder=\"How do they want to feel?\"\n              className=\"text-sm\"\n              rows={2}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"edit-social\" className=\"text-xs text-muted-foreground flex items-center gap-1\">\n              <Users className=\"w-3 h-3\" aria-hidden=\"true\" /> Social\n            </label>\n            <Textarea\n              id=\"edit-social\"\n              value={editData.social}\n              onChange={(e) => setEditData({ ...editData, social: e.target.value })}\n              placeholder=\"How do they want to be perceived?\"\n              className=\"text-sm\"\n              rows={2}\n            />\n          </div>\n          <div>\n            <label className=\"text-xs text-muted-foreground\">Importance: {editData.importance}/10</label>\n            <Slider\n              value={[editData.importance]}\n              onValueChange={([val]) => setEditData({ ...editData, importance: val })}\n              min={1}\n              max={10}\n              step={1}\n              className=\"mt-2\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"group p-3 bg-white border rounded-lg shadow-sm space-y-2 hover:border-blue-300 transition-colors\">\n      <div className=\"flex items-center justify-between\">\n        <span className=\"text-xs font-medium text-muted-foreground\">Job {index + 1}</span>\n        <div className=\"flex items-center gap-2\">\n          <SourceBadge source={job.source} />\n          <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1\">\n            <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\" onClick={() => setIsEditing(true)}>\n              <Edit2 className=\"w-3 h-3\" />\n            </Button>\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0 text-red-500 hover:text-red-700\">\n                  <Trash2 className=\"w-3 h-3\" />\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent>\n                <AlertDialogHeader>\n                  <AlertDialogTitle>Delete Job?</AlertDialogTitle>\n                  <AlertDialogDescription>This action cannot be undone.</AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\n                  <AlertDialogAction onClick={onRemove} className=\"bg-red-500 hover:bg-red-600\">\n                    Delete\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n          </div>\n        </div>\n      </div>\n\n      {job.functional && (\n        <div className=\"flex items-start gap-2\">\n          <Briefcase className=\"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0\" />\n          <div>\n            <span className=\"text-xs text-muted-foreground block\">Functional</span>\n            <span className=\"text-sm\">{job.functional}</span>\n          </div>\n        </div>\n      )}\n\n      {job.emotional && (\n        <div className=\"flex items-start gap-2\">\n          <Heart className=\"w-4 h-4 text-pink-500 mt-0.5 flex-shrink-0\" />\n          <div>\n            <span className=\"text-xs text-muted-foreground block\">Emotional</span>\n            <span className=\"text-sm\">{job.emotional}</span>\n          </div>\n        </div>\n      )}\n\n      {job.social && (\n        <div className=\"flex items-start gap-2\">\n          <Users className=\"w-4 h-4 text-purple-500 mt-0.5 flex-shrink-0\" />\n          <div>\n            <span className=\"text-xs text-muted-foreground block\">Social</span>\n            <span className=\"text-sm\">{job.social}</span>\n          </div>\n        </div>\n      )}\n\n      <div className=\"text-xs text-muted-foreground\">Importance: {job.importance}/10</div>\n    </div>\n  );\n}\n\n// ============================================================================\n// EDITABLE PAIN CARD\n// ============================================================================\n\nfunction EditablePainCard({\n  pain,\n  onUpdate,\n  onRemove,\n  isSaving,\n}: {\n  pain: VPCPainItem;\n  onUpdate: (updates: Partial<VPCPainItem>) => Promise<void>;\n  onRemove: () => Promise<void>;\n  isSaving?: boolean;\n}) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({\n    description: pain.description,\n    intensity: pain.intensity || 5,\n  });\n\n  const handleSave = async () => {\n    await onUpdate(editData);\n    setIsEditing(false);\n  };\n\n  if (isEditing) {\n    return (\n      <div className=\"p-3 border-2 border-red-300 rounded-lg space-y-2\">\n        <Textarea\n          value={editData.description}\n          onChange={(e) => setEditData({ ...editData, description: e.target.value })}\n          placeholder=\"Describe the customer pain...\"\n          className=\"text-sm\"\n          rows={2}\n        />\n        <div>\n          <label className=\"text-xs text-muted-foreground\">Intensity: {editData.intensity}/10</label>\n          <Slider\n            value={[editData.intensity]}\n            onValueChange={([val]) => setEditData({ ...editData, intensity: val })}\n            min={1}\n            max={10}\n            step={1}\n            className=\"mt-2\"\n          />\n        </div>\n        <div className=\"flex justify-end gap-2\">\n          <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsEditing(false)}>\n            Cancel\n          </Button>\n          <Button size=\"sm\" onClick={handleSave} disabled={isSaving}>\n            {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Save'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"group p-3 border rounded-lg space-y-2 bg-white hover:border-red-300 transition-colors\">\n      <div className=\"flex items-start justify-between gap-2\">\n        <div className=\"flex items-start gap-2 flex-1\">\n          <Frown className=\"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0\" />\n          <span className=\"text-sm\">{pain.description}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <SourceBadge source={pain.source} />\n          {pain.intensity && (\n            <Badge variant=\"outline\" className={cn(\n              'text-xs',\n              pain.intensity >= 7 ? 'bg-red-100 text-red-800 border-red-200' :\n              pain.intensity >= 4 ? 'bg-orange-100 text-orange-800 border-orange-200' :\n              'bg-green-100 text-green-800 border-green-200'\n            )}>\n              {pain.intensity}/10\n            </Badge>\n          )}\n          <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1\">\n            <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\" onClick={() => setIsEditing(true)}>\n              <Edit2 className=\"w-3 h-3\" />\n            </Button>\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0 text-red-500\">\n                  <Trash2 className=\"w-3 h-3\" />\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent>\n                <AlertDialogHeader>\n                  <AlertDialogTitle>Delete Pain?</AlertDialogTitle>\n                  <AlertDialogDescription>This action cannot be undone.</AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\n                  <AlertDialogAction onClick={onRemove} className=\"bg-red-500 hover:bg-red-600\">\n                    Delete\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// EDITABLE GAIN CARD\n// ============================================================================\n\nfunction EditableGainCard({\n  gain,\n  onUpdate,\n  onRemove,\n  isSaving,\n}: {\n  gain: VPCGainItem;\n  onUpdate: (updates: Partial<VPCGainItem>) => Promise<void>;\n  onRemove: () => Promise<void>;\n  isSaving?: boolean;\n}) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({\n    description: gain.description,\n    importance: gain.importance || 5,\n  });\n\n  const handleSave = async () => {\n    await onUpdate(editData);\n    setIsEditing(false);\n  };\n\n  if (isEditing) {\n    return (\n      <div className=\"p-3 border-2 border-green-300 rounded-lg space-y-2\">\n        <Textarea\n          value={editData.description}\n          onChange={(e) => setEditData({ ...editData, description: e.target.value })}\n          placeholder=\"Describe the customer gain...\"\n          className=\"text-sm\"\n          rows={2}\n        />\n        <div>\n          <label className=\"text-xs text-muted-foreground\">Importance: {editData.importance}/10</label>\n          <Slider\n            value={[editData.importance]}\n            onValueChange={([val]) => setEditData({ ...editData, importance: val })}\n            min={1}\n            max={10}\n            step={1}\n            className=\"mt-2\"\n          />\n        </div>\n        <div className=\"flex justify-end gap-2\">\n          <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsEditing(false)}>\n            Cancel\n          </Button>\n          <Button size=\"sm\" onClick={handleSave} disabled={isSaving}>\n            {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Save'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"group p-3 border rounded-lg space-y-2 bg-white hover:border-green-300 transition-colors\">\n      <div className=\"flex items-start justify-between gap-2\">\n        <div className=\"flex items-start gap-2 flex-1\">\n          <Smile className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n          <span className=\"text-sm\">{gain.description}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <SourceBadge source={gain.source} />\n          {gain.importance && (\n            <Badge variant=\"outline\" className={cn(\n              'text-xs',\n              gain.importance >= 7 ? 'bg-emerald-100 text-emerald-800 border-emerald-200' :\n              gain.importance >= 4 ? 'bg-blue-100 text-blue-800 border-blue-200' :\n              'bg-slate-100 text-slate-800 border-slate-200'\n            )}>\n              {gain.importance}/10\n            </Badge>\n          )}\n          <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1\">\n            <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\" onClick={() => setIsEditing(true)}>\n              <Edit2 className=\"w-3 h-3\" />\n            </Button>\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0 text-red-500\">\n                  <Trash2 className=\"w-3 h-3\" />\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent>\n                <AlertDialogHeader>\n                  <AlertDialogTitle>Delete Gain?</AlertDialogTitle>\n                  <AlertDialogDescription>This action cannot be undone.</AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\n                  <AlertDialogAction onClick={onRemove} className=\"bg-red-500 hover:bg-red-600\">\n                    Delete\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// EDITABLE TEXT ITEM\n// ============================================================================\n\nfunction EditableTextItem({\n  item,\n  onUpdate,\n  onRemove,\n  isSaving,\n  placeholder,\n}: {\n  item: VPCItem;\n  onUpdate: (text: string) => Promise<void>;\n  onRemove: () => Promise<void>;\n  isSaving?: boolean;\n  placeholder?: string;\n}) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editText, setEditText] = useState(item.text);\n\n  const handleSave = async () => {\n    if (editText.trim()) {\n      await onUpdate(editText.trim());\n      setIsEditing(false);\n    }\n  };\n\n  if (isEditing) {\n    return (\n      <div className=\"flex gap-2\">\n        <Input\n          value={editText}\n          onChange={(e) => setEditText(e.target.value)}\n          placeholder={placeholder}\n          className=\"flex-1 text-sm\"\n          onKeyDown={(e) => e.key === 'Enter' && handleSave()}\n        />\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsEditing(false)}>\n          <X className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" onClick={handleSave} disabled={isSaving}>\n          {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"group flex items-center gap-2 p-2 bg-white border rounded-md text-sm hover:border-purple-300 transition-colors\">\n      <span className=\"flex-1\">{item.text}</span>\n      <SourceBadge source={item.source} />\n      <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1\">\n        <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\" onClick={() => setIsEditing(true)}>\n          <Edit2 className=\"w-3 h-3\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0 text-red-500\" onClick={onRemove}>\n          <Trash2 className=\"w-3 h-3\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// ADD ITEM FORMS\n// ============================================================================\n\nfunction AddJobForm({ onAdd, isSaving }: { onAdd: (job: any) => Promise<void>; isSaving?: boolean }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [data, setData] = useState({ functional: '', emotional: '', social: '', importance: 5 });\n\n  const handleSubmit = async () => {\n    if (data.functional || data.emotional || data.social) {\n      await onAdd(data);\n      setData({ functional: '', emotional: '', social: '', importance: 5 });\n      setIsOpen(false);\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" className=\"w-full\" onClick={() => setIsOpen(true)}>\n        <Plus className=\"w-4 h-4 mr-2\" /> Add Job\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"p-3 border-2 border-dashed border-blue-300 rounded-lg space-y-2 bg-blue-50/50\">\n      <div>\n        <label htmlFor=\"new-functional\" className=\"text-xs text-muted-foreground\">Functional Job</label>\n        <Textarea\n          id=\"new-functional\"\n          value={data.functional}\n          onChange={(e) => setData({ ...data, functional: e.target.value })}\n          placeholder=\"What task are they trying to accomplish?\"\n          className=\"text-sm\"\n          rows={2}\n        />\n      </div>\n      <div>\n        <label htmlFor=\"new-emotional\" className=\"text-xs text-muted-foreground\">Emotional Job</label>\n        <Textarea\n          id=\"new-emotional\"\n          value={data.emotional}\n          onChange={(e) => setData({ ...data, emotional: e.target.value })}\n          placeholder=\"How do they want to feel?\"\n          className=\"text-sm\"\n          rows={2}\n        />\n      </div>\n      <div>\n        <label htmlFor=\"new-social\" className=\"text-xs text-muted-foreground\">Social Job</label>\n        <Textarea\n          id=\"new-social\"\n          value={data.social}\n          onChange={(e) => setData({ ...data, social: e.target.value })}\n          placeholder=\"How do they want to be perceived?\"\n          className=\"text-sm\"\n          rows={2}\n        />\n      </div>\n      <div>\n        <label className=\"text-xs text-muted-foreground\">Importance: {data.importance}/10</label>\n        <Slider\n          value={[data.importance]}\n          onValueChange={([val]) => setData({ ...data, importance: val })}\n          min={1}\n          max={10}\n          step={1}\n          className=\"mt-2\"\n        />\n      </div>\n      <div className=\"flex justify-end gap-2\">\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsOpen(false)}>\n          Cancel\n        </Button>\n        <Button size=\"sm\" onClick={handleSubmit} disabled={isSaving}>\n          {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Add Job'}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction AddTextItemForm({\n  onAdd,\n  isSaving,\n  label,\n  placeholder,\n}: {\n  onAdd: (text: string) => Promise<void>;\n  isSaving?: boolean;\n  label: string;\n  placeholder: string;\n}) {\n  const [text, setText] = useState('');\n\n  const handleSubmit = async () => {\n    if (text.trim()) {\n      await onAdd(text.trim());\n      setText('');\n    }\n  };\n\n  return (\n    <div className=\"flex gap-2\">\n      <Input\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        placeholder={placeholder}\n        className=\"flex-1 text-sm\"\n        onKeyDown={(e) => e.key === 'Enter' && handleSubmit()}\n      />\n      <Button size=\"sm\" onClick={handleSubmit} disabled={isSaving || !text.trim()}>\n        {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Plus className=\"w-4 h-4\" />}\n      </Button>\n    </div>\n  );\n}\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nexport default function EditableValuePropositionCanvas({\n  segment,\n  onAddJob,\n  onUpdateJob,\n  onRemoveJob,\n  onAddPain,\n  onUpdatePain,\n  onRemovePain,\n  onAddGain,\n  onUpdateGain,\n  onRemoveGain,\n  onAddProductOrService,\n  onUpdateProductOrService,\n  onRemoveProductOrService,\n  onAddPainReliever,\n  onUpdatePainReliever,\n  onRemovePainReliever,\n  onAddGainCreator,\n  onUpdateGainCreator,\n  onRemoveGainCreator,\n  onAddDifferentiator,\n  onUpdateDifferentiator,\n  onRemoveDifferentiator,\n  onResetToCrewAI,\n  isSaving,\n  className,\n}: EditableValuePropositionCanvasProps) {\n  const jobs = (segment.jobs as VPCJobItem[]) || [];\n  const pains = (segment.pains as VPCPainItem[]) || [];\n  const gains = (segment.gains as VPCGainItem[]) || [];\n  const productsAndServices = (segment.productsAndServices as VPCItem[]) || [];\n  const painRelievers = (segment.painRelievers as VPCPainRelieverItem[]) || [];\n  const gainCreators = (segment.gainCreators as VPCGainCreatorItem[]) || [];\n  const differentiators = (segment.differentiators as VPCItem[]) || [];\n\n  return (\n    <div className={cn('w-full', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">{segment.segmentName}</h2>\n          <p className=\"text-muted-foreground\">Value Proposition Canvas (Editing)</p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"outline\" className={cn(\n            segment.source === 'crewai' ? 'bg-blue-50 border-blue-200 text-blue-700' :\n            segment.source === 'manual' ? 'bg-green-50 border-green-200 text-green-700' :\n            'bg-yellow-50 border-yellow-200 text-yellow-700'\n          )}>\n            {segment.source === 'crewai' ? 'AI Generated' : segment.source === 'manual' ? 'Manual' : 'Hybrid'}\n          </Badge>\n          {onResetToCrewAI && segment.originalCrewaiData && (\n            <Button variant=\"outline\" size=\"sm\" onClick={onResetToCrewAI} disabled={isSaving}>\n              <RotateCcw className=\"w-4 h-4 mr-2\" />\n              Reset to AI\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Main Canvas */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* VALUE MAP (Left Side) */}\n        <Card className=\"border-2 border-purple-200 bg-purple-50/30\">\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"flex items-center gap-2 text-purple-800\">\n              <Gift className=\"w-5 h-5\" />\n              Value Map\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Products & Services */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-purple-700 mb-3 flex items-center gap-2\">\n                <Gift className=\"w-4 h-4\" />\n                Products & Services\n                <Badge variant=\"secondary\" className=\"ml-auto\">{productsAndServices.length}</Badge>\n              </h4>\n              <div className=\"space-y-2\">\n                {productsAndServices.map((item) => (\n                  <EditableTextItem\n                    key={item.id}\n                    item={item}\n                    onUpdate={(text) => onUpdateProductOrService(item.id, text)}\n                    onRemove={() => onRemoveProductOrService(item.id)}\n                    isSaving={isSaving}\n                  />\n                ))}\n                <AddTextItemForm\n                  onAdd={onAddProductOrService}\n                  isSaving={isSaving}\n                  label=\"Add Product/Service\"\n                  placeholder=\"Add a product or service...\"\n                />\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Pain Relievers */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2\">\n                <Pill className=\"w-4 h-4\" />\n                Pain Relievers\n                <Badge variant=\"secondary\" className=\"ml-auto\">{painRelievers.length}</Badge>\n              </h4>\n              <div className=\"space-y-2\">\n                {painRelievers.map((item) => (\n                  <div key={item.id} className=\"group p-2 bg-blue-50 border border-blue-200 rounded-md\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"text-xs text-blue-600 mb-1\">Relieves: \"{item.painDescription}\"</div>\n                        <div className=\"text-sm text-blue-900\">{item.relief}</div>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <SourceBadge source={item.source} />\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 text-red-500\"\n                          onClick={() => onRemovePainReliever(item.id)}\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                {painRelievers.length === 0 && (\n                  <p className=\"text-sm text-muted-foreground italic\">No pain relievers mapped</p>\n                )}\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Gain Creators */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-green-700 mb-3 flex items-center gap-2\">\n                <TrendingUp className=\"w-4 h-4\" />\n                Gain Creators\n                <Badge variant=\"secondary\" className=\"ml-auto\">{gainCreators.length}</Badge>\n              </h4>\n              <div className=\"space-y-2\">\n                {gainCreators.map((item) => (\n                  <div key={item.id} className=\"group p-2 bg-green-50 border border-green-200 rounded-md\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"text-xs text-green-600 mb-1\">Creates: \"{item.gainDescription}\"</div>\n                        <div className=\"text-sm text-green-900\">{item.creator}</div>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <SourceBadge source={item.source} />\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 text-red-500\"\n                          onClick={() => onRemoveGainCreator(item.id)}\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                {gainCreators.length === 0 && (\n                  <p className=\"text-sm text-muted-foreground italic\">No gain creators mapped</p>\n                )}\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Differentiators */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-amber-700 mb-3 flex items-center gap-2\">\n                <Sparkles className=\"w-4 h-4\" />\n                Differentiators\n                <Badge variant=\"secondary\" className=\"ml-auto\">{differentiators.length}</Badge>\n              </h4>\n              <div className=\"space-y-2\">\n                {differentiators.map((item) => (\n                  <EditableTextItem\n                    key={item.id}\n                    item={item}\n                    onUpdate={(text) => onUpdateDifferentiator(item.id, text)}\n                    onRemove={() => onRemoveDifferentiator(item.id)}\n                    isSaving={isSaving}\n                  />\n                ))}\n                <AddTextItemForm\n                  onAdd={onAddDifferentiator}\n                  isSaving={isSaving}\n                  label=\"Add Differentiator\"\n                  placeholder=\"What makes you unique?\"\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* CUSTOMER PROFILE (Right Side) */}\n        <Card className=\"border-2 border-teal-200 bg-teal-50/30\">\n          <CardHeader className=\"pb-4\">\n            <CardTitle className=\"flex items-center gap-2 text-teal-800\">\n              <Users className=\"w-5 h-5\" />\n              Customer Profile\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Jobs */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-blue-700 mb-3 flex items-center gap-2\">\n                <Briefcase className=\"w-4 h-4\" />\n                Customer Jobs\n                <Badge variant=\"secondary\" className=\"ml-auto\">{jobs.length}</Badge>\n              </h4>\n              <div className=\"space-y-3\">\n                {jobs.map((job, i) => (\n                  <EditableJobCard\n                    key={job.id}\n                    job={job}\n                    index={i}\n                    onUpdate={(updates) => onUpdateJob(job.id, updates)}\n                    onRemove={() => onRemoveJob(job.id)}\n                    isSaving={isSaving}\n                  />\n                ))}\n                <AddJobForm onAdd={onAddJob} isSaving={isSaving} />\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Pains */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-red-700 mb-3 flex items-center gap-2\">\n                <Frown className=\"w-4 h-4\" />\n                Pains\n                <Badge variant=\"secondary\" className=\"ml-auto\">{pains.length}</Badge>\n              </h4>\n              <div className=\"space-y-3\">\n                {pains.map((pain) => (\n                  <EditablePainCard\n                    key={pain.id}\n                    pain={pain}\n                    onUpdate={(updates) => onUpdatePain(pain.id, updates)}\n                    onRemove={() => onRemovePain(pain.id)}\n                    isSaving={isSaving}\n                  />\n                ))}\n                <AddPainForm onAdd={onAddPain} isSaving={isSaving} />\n              </div>\n            </div>\n\n            <Separator />\n\n            {/* Gains */}\n            <div>\n              <h4 className=\"text-sm font-semibold text-green-700 mb-3 flex items-center gap-2\">\n                <Smile className=\"w-4 h-4\" />\n                Gains\n                <Badge variant=\"secondary\" className=\"ml-auto\">{gains.length}</Badge>\n              </h4>\n              <div className=\"space-y-3\">\n                {gains.map((gain) => (\n                  <EditableGainCard\n                    key={gain.id}\n                    gain={gain}\n                    onUpdate={(updates) => onUpdateGain(gain.id, updates)}\n                    onRemove={() => onRemoveGain(gain.id)}\n                    isSaving={isSaving}\n                  />\n                ))}\n                <AddGainForm onAdd={onAddGain} isSaving={isSaving} />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// ADD PAIN/GAIN FORMS\n// ============================================================================\n\nfunction AddPainForm({ onAdd, isSaving }: { onAdd: (pain: any) => Promise<void>; isSaving?: boolean }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [data, setData] = useState({ description: '', intensity: 5 });\n\n  const handleSubmit = async () => {\n    if (data.description.trim()) {\n      await onAdd(data);\n      setData({ description: '', intensity: 5 });\n      setIsOpen(false);\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" className=\"w-full\" onClick={() => setIsOpen(true)}>\n        <Plus className=\"w-4 h-4 mr-2\" /> Add Pain\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"p-3 border-2 border-dashed border-red-300 rounded-lg space-y-2 bg-red-50/50\">\n      <Textarea\n        value={data.description}\n        onChange={(e) => setData({ ...data, description: e.target.value })}\n        placeholder=\"Describe the customer pain...\"\n        className=\"text-sm\"\n        rows={2}\n      />\n      <div>\n        <label className=\"text-xs text-muted-foreground\">Intensity: {data.intensity}/10</label>\n        <Slider\n          value={[data.intensity]}\n          onValueChange={([val]) => setData({ ...data, intensity: val })}\n          min={1}\n          max={10}\n          step={1}\n          className=\"mt-2\"\n        />\n      </div>\n      <div className=\"flex justify-end gap-2\">\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsOpen(false)}>\n          Cancel\n        </Button>\n        <Button size=\"sm\" onClick={handleSubmit} disabled={isSaving || !data.description.trim()}>\n          {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Add Pain'}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nfunction AddGainForm({ onAdd, isSaving }: { onAdd: (gain: any) => Promise<void>; isSaving?: boolean }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [data, setData] = useState({ description: '', importance: 5 });\n\n  const handleSubmit = async () => {\n    if (data.description.trim()) {\n      await onAdd(data);\n      setData({ description: '', importance: 5 });\n      setIsOpen(false);\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button variant=\"outline\" size=\"sm\" className=\"w-full\" onClick={() => setIsOpen(true)}>\n        <Plus className=\"w-4 h-4 mr-2\" /> Add Gain\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"p-3 border-2 border-dashed border-green-300 rounded-lg space-y-2 bg-green-50/50\">\n      <Textarea\n        value={data.description}\n        onChange={(e) => setData({ ...data, description: e.target.value })}\n        placeholder=\"Describe the customer gain...\"\n        className=\"text-sm\"\n        rows={2}\n      />\n      <div>\n        <label className=\"text-xs text-muted-foreground\">Importance: {data.importance}/10</label>\n        <Slider\n          value={[data.importance]}\n          onValueChange={([val]) => setData({ ...data, importance: val })}\n          min={1}\n          max={10}\n          step={1}\n          className=\"mt-2\"\n        />\n      </div>\n      <div className=\"flex justify-end gap-2\">\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => setIsOpen(false)}>\n          Cancel\n        </Button>\n        <Button size=\"sm\" onClick={handleSubmit} disabled={isSaving || !data.description.trim()}>\n          {isSaving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Add Gain'}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport { EditableValuePropositionCanvas };\nexport type { EditableValuePropositionCanvasProps };\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/EnhancedValuePropositionCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/GuidedBusinessModelCanvas.tsx","messages":[{"ruleId":"react-hooks/purity","severity":1,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/GuidedBusinessModelCanvas.tsx:193:11\n  191 |     \n  192 |     const newBMCItem: BMCItem = {\n> 193 |       id: Date.now().toString(),\n      |           ^^^^^^^^^^ Cannot call impure function\n  194 |       text: newItem.trim(),\n  195 |       assumptions: generateAssumptions(currentStepData.id, newItem.trim()),\n  196 |       validationStatus: 'untested',","line":193,"column":11,"nodeType":null,"endLine":193,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP03\n */\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { ChevronRight, ChevronLeft, CheckCircle, Users, Target, Truck, Heart, Coins, Zap, Building2, UserCheck, DollarSign, Cog, Package, Handshake, Calculator, ArrowRight, Lightbulb, TestTube, AlertTriangle, Shield } from 'lucide-react';\n\ninterface GuidedBusinessModelCanvasProps {\n  canvasId?: string;\n  clientId?: string;\n  initialData?: any;\n  onSave?: (data: any) => void;\n  readOnly?: boolean;\n}\n\ninterface BMCItem {\n  id: string;\n  text: string;\n  assumptions: string[];\n  validationStatus: 'untested' | 'testing' | 'validated' | 'failed';\n  confidence: number;\n  experiments: string[];\n}\n\ninterface BMCData {\n  customerSegments: BMCItem[];\n  valuePropositions: BMCItem[];\n  channels: BMCItem[];\n  customerRelationships: BMCItem[];\n  revenueStreams: BMCItem[];\n  keyActivities: BMCItem[];\n  keyResources: BMCItem[];\n  keyPartners: BMCItem[];\n  costStructure: BMCItem[];\n}\n\nconst defaultBMC: BMCData = {\n  customerSegments: [],\n  valuePropositions: [],\n  channels: [],\n  customerRelationships: [],\n  revenueStreams: [],\n  keyActivities: [],\n  keyResources: [],\n  keyPartners: [],\n  costStructure: []\n};\n\nconst bmcSteps = [\n  {\n    id: 'valuePropositions',\n    title: 'Value Propositions',\n    icon: Target,\n    description: 'What value do you deliver to customers?',\n    guidance: 'Start with your core value proposition. What unique value do you provide? What problems do you solve or needs do you fulfill?',\n    examples: ['Save 50% time on reporting', 'Reduce operational costs by 30%', 'Improve customer satisfaction', 'Simplify complex processes'],\n    why: 'Your value proposition is the heart of your business model. Everything else is designed to create, deliver, and capture this value.',\n    phase: 'Value Proposition',\n    phaseColor: 'purple'\n  },\n  {\n    id: 'customerSegments',\n    title: 'Customer Segments',\n    icon: Users,\n    description: 'Who are you creating value for?',\n    guidance: 'Now identify your target customers. Who are the most important people or organizations that will value your proposition?',\n    examples: ['Small business owners', 'Enterprise IT managers', 'Healthcare professionals', 'Students and educators'],\n    why: 'Understanding your customers helps you refine your value proposition and design the right delivery mechanisms.',\n    phase: 'Value Capture',\n    phaseColor: 'orange'\n  },\n  {\n    id: 'channels',\n    title: 'Channels',\n    icon: Truck,\n    description: 'How do you reach and deliver to customers?',\n    guidance: 'Identify how you will communicate with, reach, and deliver value to your customer segments.',\n    examples: ['Direct sales team', 'Online platform', 'Partner networks', 'Mobile app', 'Retail stores'],\n    why: 'Channels connect your value proposition to your customers. The right channels ensure efficient delivery and customer experience.',\n    phase: 'Value Proposition',\n    phaseColor: 'purple'\n  },\n  {\n    id: 'customerRelationships',\n    title: 'Customer Relationships',\n    icon: Heart,\n    description: 'What relationship do you establish with customers?',\n    guidance: 'Define the type of relationship you want to establish with each customer segment.',\n    examples: ['Personal assistance', 'Self-service', 'Automated services', 'Communities', 'Co-creation'],\n    why: 'Customer relationships determine how you acquire, retain, and grow your customer base.',\n    phase: 'Value Proposition',\n    phaseColor: 'purple'\n  },\n  {\n    id: 'revenueStreams',\n    title: 'Revenue Streams',\n    icon: Coins,\n    description: 'How do you generate revenue from customers?',\n    guidance: 'Identify how you will generate revenue from each customer segment.',\n    examples: ['Subscription fees', 'One-time sales', 'Usage fees', 'Licensing', 'Advertising', 'Commission'],\n    why: 'Revenue streams are the cash your company generates from each customer segment. This determines your financial viability.',\n    phase: 'Value Capture',\n    phaseColor: 'orange'\n  },\n  {\n    id: 'keyActivities',\n    title: 'Key Activities',\n    icon: Zap,\n    description: 'What key activities does your value proposition require?',\n    guidance: 'List the most important activities your company must perform to make your business model work.',\n    examples: ['Software development', 'Marketing campaigns', 'Customer support', 'Quality assurance', 'Supply chain management'],\n    why: 'Key activities are the critical actions needed to deliver your value proposition and operate successfully.',\n    phase: 'Value Creation',\n    phaseColor: 'blue'\n  },\n  {\n    id: 'keyResources',\n    title: 'Key Resources',\n    icon: Building2,\n    description: 'What key resources does your value proposition require?',\n    guidance: 'Identify the most important assets required to make your business model work.',\n    examples: ['Technology platform', 'Skilled team', 'Brand reputation', 'Patents', 'Customer data', 'Physical facilities'],\n    why: 'Key resources are the assets that enable you to create and deliver value, reach markets, and generate revenue.',\n    phase: 'Value Creation',\n    phaseColor: 'blue'\n  },\n  {\n    id: 'keyPartners',\n    title: 'Key Partners',\n    icon: UserCheck,\n    description: 'Who are your key partners and suppliers?',\n    guidance: 'Identify the network of suppliers and partners that help your business model work.',\n    examples: ['Technology vendors', 'Distribution partners', 'Strategic alliances', 'Suppliers', 'Joint ventures'],\n    why: 'Key partnerships help you optimize your business model, reduce risk, and acquire resources you don\\'t own.',\n    phase: 'Value Creation',\n    phaseColor: 'blue'\n  },\n  {\n    id: 'costStructure',\n    title: 'Cost Structure',\n    icon: DollarSign,\n    description: 'What are the most important costs in your business model?',\n    guidance: 'Identify all the important costs incurred while operating your business model.',\n    examples: ['Personnel costs', 'Technology infrastructure', 'Marketing expenses', 'Office rent', 'Research & development'],\n    why: 'Understanding your cost structure helps ensure profitability and guides pricing decisions.',\n    phase: 'Value Creation',\n    phaseColor: 'blue'\n  }\n];\n\nexport default function GuidedBusinessModelCanvas({ \n  canvasId, \n  initialData, \n  onSave, \n  readOnly = false \n}: GuidedBusinessModelCanvasProps) {\n  const [canvasData, setCanvasData] = useState<BMCData>(defaultBMC);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [newItem, setNewItem] = useState('');\n  const [showAddDialog, setShowAddDialog] = useState(false);\n\n  useEffect(() => {\n    if (initialData) {\n      setCanvasData({ ...defaultBMC, ...initialData });\n    } else if (canvasId) {\n      const saved = localStorage.getItem(`guided-bmc-${canvasId}`);\n      if (saved) {\n        try {\n          setCanvasData({ ...defaultBMC, ...JSON.parse(saved) });\n        } catch (error) {\n          console.error('Error parsing saved canvas data:', error);\n        }\n      }\n    }\n  }, [initialData, canvasId]);\n\n  const currentStepData = bmcSteps[currentStep];\n  const currentItems = canvasData[currentStepData.id as keyof BMCData];\n  const progress = ((currentStep + 1) / bmcSteps.length) * 100;\n  const completedSteps = bmcSteps.slice(0, currentStep).filter(step => \n    canvasData[step.id as keyof BMCData].length > 0\n  ).length;\n\n  const addItem = () => {\n    if (!newItem.trim()) return;\n    \n    const newBMCItem: BMCItem = {\n      id: Date.now().toString(),\n      text: newItem.trim(),\n      assumptions: generateAssumptions(currentStepData.id, newItem.trim()),\n      validationStatus: 'untested',\n      confidence: 0,\n      experiments: []\n    };\n    \n    setCanvasData(prev => ({\n      ...prev,\n      [currentStepData.id]: [...prev[currentStepData.id as keyof BMCData], newBMCItem]\n    }));\n    \n    setNewItem('');\n    setShowAddDialog(false);\n  };\n\n  const generateAssumptions = (stepId: string, text: string): string[] => {\n    const assumptionMap: Record<string, string[]> = {\n      valuePropositions: [\n        `Customers will pay for \"${text}\"`,\n        `\"${text}\" solves a real customer problem`,\n        `Customers prefer this over alternatives`\n      ],\n      customerSegments: [\n        `\"${text}\" has the budget to pay`,\n        `\"${text}\" experiences the problem we solve`,\n        `We can effectively reach \"${text}\"`\n      ],\n      channels: [\n        `\"${text}\" is cost-effective for customer acquisition`,\n        `Customers prefer to buy through \"${text}\"`,\n        `\"${text}\" can scale with our growth`\n      ],\n      revenueStreams: [\n        `Customers will pay \"${text}\" pricing model`,\n        `\"${text}\" generates sufficient profit margins`,\n        `Payment timing for \"${text}\" works for cash flow`\n      ]\n    };\n    \n    return assumptionMap[stepId] || [`\"${text}\" will work as expected`];\n  };\n\n  const removeItem = (index: number) => {\n    setCanvasData(prev => ({\n      ...prev,\n      [currentStepData.id]: prev[currentStepData.id as keyof BMCData].filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleSave = () => {\n    if (onSave) {\n      onSave(canvasData);\n    } else if (canvasId) {\n      localStorage.setItem(`guided-bmc-${canvasId}`, JSON.stringify(canvasData));\n    }\n  };\n\n  const canGoNext = currentItems.length > 0 || currentStep === bmcSteps.length - 1;\n  const canGoPrevious = currentStep > 0;\n\n  const nextStep = () => {\n    if (currentStep < bmcSteps.length - 1) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const previousStep = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const Icon = currentStepData.icon;\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto p-6 space-y-6\">\n      {/* Progress Header */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Business Model Canvas</h1>\n            <p className=\"text-muted-foreground\">Step-by-step guided creation</p>\n          </div>\n          <Badge variant=\"outline\" className=\"text-sm\">\n            Step {currentStep + 1} of {bmcSteps.length}\n          </Badge>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Progress</span>\n            <span className=\"font-medium\">{Math.round(progress)}% complete</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n      </div>\n\n      {/* Current Step */}\n      <Card className=\"border-2\">\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-lg bg-primary/10\">\n              <Icon className=\"w-6 h-6 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-xl\">{currentStepData.title}</CardTitle>\n              <CardDescription>{currentStepData.description}</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-6\">\n          {/* Phase Badge and Guidance Section */}\n          <div className={`bg-${currentStepData.phaseColor}-50 border border-${currentStepData.phaseColor}-200 rounded-lg p-4`}>\n            <div className=\"flex items-start gap-2\">\n              <Lightbulb className={`w-5 h-5 text-${currentStepData.phaseColor}-600 mt-0.5 flex-shrink-0`} />\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <h4 className={`font-medium text-${currentStepData.phaseColor}-900`}>\n                    {currentStepData.phase} - Guidance\n                  </h4>\n                  <Badge variant=\"outline\" className={`text-xs bg-${currentStepData.phaseColor}-100 border-${currentStepData.phaseColor}-300`}>\n                    {currentStepData.phase}\n                  </Badge>\n                </div>\n                <p className={`text-${currentStepData.phaseColor}-800 text-sm mb-3`}>{currentStepData.guidance}</p>\n                <div className={`text-${currentStepData.phaseColor}-700 text-sm`}>\n                  <strong>Why this matters:</strong> {currentStepData.why}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Examples */}\n          <div className=\"bg-muted/30 rounded-lg p-4\">\n            <h4 className=\"font-medium mb-2\">Examples:</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n              {currentStepData.examples.map((example, index) => (\n                <div key={index} className=\"text-sm text-muted-foreground bg-background rounded px-3 py-2\">\n                  {example}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Current Items */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium\">Your {currentStepData.title}</h4>\n              {!readOnly && (\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => setShowAddDialog(true)}\n                >\n                  Add Item\n                </Button>\n              )}\n            </div>\n            \n            {currentItems.length > 0 ? (\n              <div className=\"space-y-3\">\n                {currentItems.map((item, index) => (\n                  <div key={item.id || index} className=\"group relative\">\n                    <div className=\"p-4 bg-muted/30 rounded-md border-l-4 border-l-gray-300\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div className=\"flex-1 text-sm leading-relaxed pr-8\">\n                          {item.text}\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge \n                            variant={\n                              item.validationStatus === 'validated' ? 'default' :\n                              item.validationStatus === 'testing' ? 'secondary' :\n                              item.validationStatus === 'failed' ? 'destructive' : 'outline'\n                            }\n                            className=\"text-xs\"\n                          >\n                            {item.validationStatus === 'untested' && <AlertTriangle className=\"w-3 h-3 mr-1\" />}\n                            {item.validationStatus === 'testing' && <TestTube className=\"w-3 h-3 mr-1\" />}\n                            {item.validationStatus === 'validated' && <Shield className=\"w-3 h-3 mr-1\" />}\n                            {item.validationStatus === 'failed' && <AlertTriangle className=\"w-3 h-3 mr-1\" />}\n                            {item.validationStatus}\n                          </Badge>\n                          {!readOnly && (\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => removeItem(index)}\n                              className=\"opacity-0 group-hover:opacity-100 h-6 w-6 p-0 text-muted-foreground hover:text-destructive\"\n                            >\n                              \n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {item.assumptions.length > 0 && (\n                        <div className=\"mt-3 pt-3 border-t border-muted\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <h5 className=\"text-xs font-medium text-muted-foreground\">Key Assumptions</h5>\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\" \n                              className=\"h-6 text-xs\"\n                              onClick={() => {/* TODO: Open experiment creation */}}\n                            >\n                              <TestTube className=\"w-3 h-3 mr-1\" />\n                              Test\n                            </Button>\n                          </div>\n                          <ul className=\"space-y-1\">\n                            {item.assumptions.map((assumption, idx) => (\n                              <li key={idx} className=\"text-xs text-muted-foreground flex items-start gap-2\">\n                                <span className=\"text-orange-500 mt-0.5\"></span>\n                                {assumption}\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg\">\n                <Icon className=\"w-8 h-8 mx-auto mb-2 opacity-40\" />\n                <p className=\"text-sm\">No items added yet</p>\n                <p className=\"text-xs mt-1\">Add your first item to continue</p>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Navigation */}\n      <div className=\"flex items-center justify-between\">\n        <Button \n          variant=\"outline\" \n          onClick={previousStep}\n          disabled={!canGoPrevious}\n        >\n          <ChevronLeft className=\"w-4 h-4 mr-2\" />\n          Previous\n        </Button>\n        \n        <div className=\"flex items-center gap-4\">\n          {!readOnly && (\n            <Button variant=\"outline\" onClick={handleSave}>\n              Save Progress\n            </Button>\n          )}\n          \n          <Button \n            onClick={nextStep}\n            disabled={!canGoNext}\n            className=\"min-w-[100px]\"\n          >\n            {currentStep === bmcSteps.length - 1 ? (\n              <>\n                <CheckCircle className=\"w-4 h-4 mr-2\" />\n                Complete\n              </>\n            ) : (\n              <>\n                Next\n                <ChevronRight className=\"w-4 h-4 ml-2\" />\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n\n      {/* Step Overview */}\n      <Card className=\"bg-muted/30\">\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Your Progress</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {bmcSteps.map((step, index) => {\n              const StepIcon = step.icon;\n              const isCompleted = canvasData[step.id as keyof BMCData].length > 0;\n              const isCurrent = index === currentStep;\n              \n              return (\n                <div \n                  key={step.id}\n                  className={`p-3 rounded-lg border transition-all ${\n                    isCurrent ? 'border-primary bg-primary/5' : \n                    isCompleted ? 'border-green-200 bg-green-50' : \n                    'border-muted bg-background'\n                  }`}\n                >\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <StepIcon className={`w-4 h-4 ${\n                      isCurrent ? 'text-primary' : \n                      isCompleted ? 'text-green-600' : \n                      'text-muted-foreground'\n                    }`} />\n                    <span className=\"text-sm font-medium\">{step.title}</span>\n                    {isCompleted && <CheckCircle className=\"w-3 h-3 text-green-600 ml-auto\" />}\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">{step.description}</p>\n                </div>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Add Item Dialog */}\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Add {currentStepData.title}</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Textarea\n              placeholder={`Enter your ${currentStepData.title.toLowerCase()}...`}\n              value={newItem}\n              onChange={(e) => setNewItem(e.target.value)}\n              className=\"min-h-[100px]\"\n              autoFocus\n            />\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAddDialog(false)}>\n              Cancel\n            </Button>\n            <Button onClick={addItem} disabled={!newItem.trim()}>\n              Add Item\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/GuidedTestingBusinessIdeasCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/GuidedValuePropositionCanvas.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'vpc'. Either include it or remove the dependency array.","line":147,"column":6,"nodeType":"ArrayExpression","endLine":147,"endColumn":78,"suggestions":[{"desc":"Update the dependencies array to be: [projectId, initialSegmentKey, vpc.segmentKeys, vpc.setActiveSegmentKey, vpc]","fix":{"range":[5827,5899],"text":"[projectId, initialSegmentKey, vpc.segmentKeys, vpc.setActiveSegmentKey, vpc]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-CP02\n */\n'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { ChevronRight, ChevronLeft, CheckCircle, Users, Gift, TrendingUp, Pill, Smile, Frown, List, ArrowRight, Lightbulb, Loader2, Bot } from 'lucide-react';\nimport { useVPC } from '@/hooks/useVPC';\nimport type {\n  VPCJobItem,\n  VPCPainItem,\n  VPCGainItem,\n  VPCItem,\n  ValuePropositionCanvas,\n} from '@/db/schema/value-proposition-canvas';\n\ninterface GuidedValuePropositionCanvasProps {\n  projectId?: string;\n  segmentKey?: string; // Optional: edit existing segment\n  clientId?: string; // Legacy prop\n  canvasId?: string; // Legacy prop for localStorage fallback\n  initialData?: any;\n  onSave?: (data: any) => void;\n  onComplete?: () => void;\n  readOnly?: boolean;\n}\n\ninterface VPCData {\n  customerJobs: string[];\n  customerPains: string[];\n  customerGains: string[];\n  productsAndServices: string[];\n  painRelievers: string[];\n  gainCreators: string[];\n}\n\nconst defaultVPC: VPCData = {\n  customerJobs: [],\n  customerPains: [],\n  customerGains: [],\n  productsAndServices: [],\n  painRelievers: [],\n  gainCreators: []\n};\n\nconst vpcSteps = [\n  {\n    id: 'customerJobs',\n    title: 'Customer Jobs',\n    icon: List,\n    description: 'What jobs is your customer trying to get done?',\n    guidance: 'Start by understanding what your customers are trying to accomplish. What functional, emotional, or social jobs are they hiring your product to do?',\n    examples: ['Manage team communications', 'Track project progress', 'Reduce manual data entry', 'Stay connected with family'],\n    why: 'Customer jobs are the foundation of value creation. Everything you build should help customers get these jobs done better.',\n    side: 'Customer Profile',\n    sideColor: 'blue'\n  },\n  {\n    id: 'customerPains',\n    title: 'Customer Pains',\n    icon: Frown,\n    description: 'What pains do customers experience?',\n    guidance: 'Identify the frustrations, obstacles, and risks customers face when trying to get their jobs done.',\n    examples: ['Too many tools to manage', 'Slow response times', 'Confusing interfaces', 'High costs'],\n    why: 'Understanding pains helps you prioritize which problems to solve and how to position your solution.',\n    side: 'Customer Profile',\n    sideColor: 'blue'\n  },\n  {\n    id: 'customerGains',\n    title: 'Customer Gains',\n    icon: Smile,\n    description: 'What gains do customers want to achieve?',\n    guidance: 'Define the outcomes, benefits, and positive experiences customers want when getting their jobs done.',\n    examples: ['Save 2 hours per day', 'Increase team productivity', 'Better work-life balance', 'Cost savings'],\n    why: 'Gains represent the value customers seek. Your solution should deliver these desired outcomes.',\n    side: 'Customer Profile',\n    sideColor: 'blue'\n  },\n  {\n    id: 'productsAndServices',\n    title: 'Products & Services',\n    icon: Gift,\n    description: 'What products and services do you offer?',\n    guidance: 'List all the products, services, and features you provide to help customers get their jobs done.',\n    examples: ['Project management software', 'Mobile app', 'Customer support', 'Training programs'],\n    why: 'Your offerings are the building blocks of your value proposition. They should directly address customer jobs.',\n    side: 'Value Map',\n    sideColor: 'green'\n  },\n  {\n    id: 'painRelievers',\n    title: 'Pain Relievers',\n    icon: Pill,\n    description: 'How do you relieve customer pains?',\n    guidance: 'Describe how your products and services eliminate or reduce the pains customers experience.',\n    examples: ['Single dashboard for all tools', 'Real-time notifications', 'Intuitive user interface', 'Transparent pricing'],\n    why: 'Pain relievers show how you solve customer problems. They should directly address the pains you identified.',\n    side: 'Value Map',\n    sideColor: 'green'\n  },\n  {\n    id: 'gainCreators',\n    title: 'Gain Creators',\n    icon: TrendingUp,\n    description: 'How do you create customer gains?',\n    guidance: 'Explain how your products and services create the gains customers want to achieve.',\n    examples: ['Automated workflows save time', 'Analytics improve decision making', 'Mobile access increases flexibility', 'Integration reduces costs'],\n    why: 'Gain creators demonstrate the positive value you deliver. They should directly produce the gains customers desire.',\n    side: 'Value Map',\n    sideColor: 'green'\n  }\n];\n\nexport default function GuidedValuePropositionCanvas({\n  projectId,\n  segmentKey: initialSegmentKey,\n  canvasId,\n  clientId,\n  initialData,\n  onSave,\n  onComplete,\n  readOnly = false\n}: GuidedValuePropositionCanvasProps) {\n  const [canvasData, setCanvasData] = useState<VPCData>(defaultVPC);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [newItem, setNewItem] = useState('');\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [segmentName, setSegmentName] = useState('');\n  const [showSegmentNameDialog, setShowSegmentNameDialog] = useState(false);\n\n  // Use VPC hook when projectId is provided\n  const vpc = useVPC({ projectId: projectId || undefined });\n\n  useEffect(() => {\n    if (projectId && initialSegmentKey && vpc.segmentKeys.includes(initialSegmentKey)) {\n      vpc.setActiveSegmentKey(initialSegmentKey);\n    }\n  }, [projectId, initialSegmentKey, vpc.segmentKeys, vpc.setActiveSegmentKey]);\n\n  // Sync data from VPC hook if editing an existing segment\n  useEffect(() => {\n    if (projectId && vpc.activeSegment && initialSegmentKey) {\n      // Convert VPC format to wizard format\n      const segment = vpc.activeSegment;\n      const jobs = (segment.jobs as VPCJobItem[]) || [];\n      const pains = (segment.pains as VPCPainItem[]) || [];\n      const gains = (segment.gains as VPCGainItem[]) || [];\n      const products = (segment.productsAndServices as VPCItem[]) || [];\n      const painRelievers = (segment.painRelievers as any[]) || [];\n      const gainCreators = (segment.gainCreators as any[]) || [];\n\n      setCanvasData({\n        customerJobs: jobs.map(j => `${j.functional}${j.emotional ? ` | ${j.emotional}` : ''}${j.social ? ` | ${j.social}` : ''}`),\n        customerPains: pains.map(p => p.description),\n        customerGains: gains.map(g => g.description),\n        productsAndServices: products.map(p => p.text),\n        painRelievers: painRelievers.map(p => `${p.painDescription}: ${p.relief}`),\n        gainCreators: gainCreators.map(g => `${g.gainDescription}: ${g.creator}`),\n      });\n      setSegmentName(segment.segmentName);\n    }\n  }, [projectId, vpc.activeSegment, initialSegmentKey]);\n\n  // Legacy localStorage support\n  useEffect(() => {\n    if (!projectId) {\n      if (initialData) {\n        setCanvasData({ ...defaultVPC, ...initialData });\n      } else if (canvasId) {\n        const saved = localStorage.getItem(`guided-vpc-${canvasId}`);\n        if (saved) {\n          try {\n            setCanvasData({ ...defaultVPC, ...JSON.parse(saved) });\n          } catch (error) {\n            console.error('Error parsing saved canvas data:', error);\n          }\n        }\n      }\n    }\n  }, [initialData, canvasId, projectId]);\n\n  const currentStepData = vpcSteps[currentStep];\n  const currentItems = canvasData[currentStepData.id as keyof VPCData];\n  const progress = ((currentStep + 1) / vpcSteps.length) * 100;\n\n  const addItem = () => {\n    if (!newItem.trim()) return;\n    \n    setCanvasData(prev => ({\n      ...prev,\n      [currentStepData.id]: [...prev[currentStepData.id as keyof VPCData], newItem.trim()]\n    }));\n    \n    setNewItem('');\n    setShowAddDialog(false);\n  };\n\n  const removeItem = (index: number) => {\n    setCanvasData(prev => ({\n      ...prev,\n      [currentStepData.id]: prev[currentStepData.id as keyof VPCData].filter((_, i) => i !== index)\n    }));\n  };\n\n  // Convert wizard format to VPC format and save\n  const handleSave = useCallback(async () => {\n    if (projectId && segmentName) {\n      // Convert wizard data to VPC format\n      const timestamp = new Date().toISOString();\n      const generateId = () => crypto.randomUUID();\n\n      // Convert jobs (simplified format -> full format)\n      const jobs: VPCJobItem[] = canvasData.customerJobs.map(text => {\n        // Try to parse \"functional | emotional | social\" format\n        const parts = text.split('|').map(p => p.trim());\n        return {\n          id: generateId(),\n          functional: parts[0] || text,\n          emotional: parts[1] || '',\n          social: parts[2] || '',\n          importance: 5,\n          source: 'manual' as const,\n          createdAt: timestamp,\n          updatedAt: timestamp,\n        };\n      });\n\n      // Convert pains\n      const pains: VPCPainItem[] = canvasData.customerPains.map(text => ({\n        id: generateId(),\n        description: text,\n        intensity: 5,\n        source: 'manual' as const,\n        createdAt: timestamp,\n        updatedAt: timestamp,\n      }));\n\n      // Convert gains\n      const gains: VPCGainItem[] = canvasData.customerGains.map(text => ({\n        id: generateId(),\n        description: text,\n        importance: 5,\n        source: 'manual' as const,\n        createdAt: timestamp,\n        updatedAt: timestamp,\n      }));\n\n      // Convert products & services\n      const productsAndServices: VPCItem[] = canvasData.productsAndServices.map(text => ({\n        id: generateId(),\n        text,\n        source: 'manual' as const,\n        createdAt: timestamp,\n        updatedAt: timestamp,\n      }));\n\n      // Convert pain relievers (try to parse \"pain: relief\" format)\n      const painRelievers = canvasData.painRelievers.map(text => {\n        const colonIdx = text.indexOf(':');\n        return {\n          id: generateId(),\n          painDescription: colonIdx > 0 ? text.slice(0, colonIdx).trim() : '',\n          relief: colonIdx > 0 ? text.slice(colonIdx + 1).trim() : text,\n          source: 'manual' as const,\n          createdAt: timestamp,\n          updatedAt: timestamp,\n        };\n      });\n\n      // Convert gain creators (try to parse \"gain: creator\" format)\n      const gainCreators = canvasData.gainCreators.map(text => {\n        const colonIdx = text.indexOf(':');\n        return {\n          id: generateId(),\n          gainDescription: colonIdx > 0 ? text.slice(0, colonIdx).trim() : '',\n          creator: colonIdx > 0 ? text.slice(colonIdx + 1).trim() : text,\n          source: 'manual' as const,\n          createdAt: timestamp,\n          updatedAt: timestamp,\n        };\n      });\n\n      // Save via API\n      try {\n        const response = await fetch(`/api/vpc/${projectId}`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            segmentKey: segmentName.toLowerCase().replace(/[^a-z0-9]+/g, '_'),\n            segmentName,\n            source: 'manual',\n            jobs,\n            pains,\n            gains,\n            productsAndServices,\n            painRelievers,\n            gainCreators,\n            differentiators: [],\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to save VPC');\n        }\n\n        // Refresh data\n        await vpc.refetch();\n        onComplete?.();\n      } catch (error) {\n        console.error('Error saving VPC:', error);\n      }\n    } else if (onSave) {\n      onSave(canvasData);\n    } else if (canvasId) {\n      localStorage.setItem(`guided-vpc-${canvasId}`, JSON.stringify(canvasData));\n    }\n  }, [projectId, segmentName, canvasData, canvasId, onSave, onComplete, vpc]);\n\n  const canGoNext = currentItems.length > 0 || currentStep === vpcSteps.length - 1;\n  const canGoPrevious = currentStep > 0;\n  const isLastStep = currentStep === vpcSteps.length - 1;\n\n  const nextStep = () => {\n    if (currentStep < vpcSteps.length - 1) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const handleComplete = () => {\n    // If using projectId and no segment name, prompt for it\n    if (projectId && !segmentName) {\n      setShowSegmentNameDialog(true);\n    } else {\n      handleSave();\n    }\n  };\n\n  const handleSegmentNameSubmit = () => {\n    if (segmentName.trim()) {\n      setShowSegmentNameDialog(false);\n      handleSave();\n    }\n  };\n\n  const previousStep = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const Icon = currentStepData.icon;\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto p-6 space-y-6\">\n      {/* Progress Header */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Value Proposition Canvas</h1>\n            <p className=\"text-muted-foreground\">Step-by-step guided creation</p>\n          </div>\n          <Badge variant=\"outline\" className=\"text-sm\">\n            Step {currentStep + 1} of {vpcSteps.length}\n          </Badge>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Progress</span>\n            <span className=\"font-medium\">{Math.round(progress)}% complete</span>\n          </div>\n          <Progress value={progress} className=\"h-2\" />\n        </div>\n      </div>\n\n      {/* Current Step */}\n      <Card className=\"border-2\">\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-lg bg-primary/10\">\n              <Icon className=\"w-6 h-6 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-xl\">{currentStepData.title}</CardTitle>\n              <CardDescription>{currentStepData.description}</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-6\">\n          {/* Side Badge and Guidance Section */}\n          <div className={`bg-${currentStepData.sideColor}-50 border border-${currentStepData.sideColor}-200 rounded-lg p-4`}>\n            <div className=\"flex items-start gap-2\">\n              <Lightbulb className={`w-5 h-5 text-${currentStepData.sideColor}-600 mt-0.5 flex-shrink-0`} />\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <h4 className={`font-medium text-${currentStepData.sideColor}-900`}>\n                    {currentStepData.side} - Guidance\n                  </h4>\n                  <Badge variant=\"outline\" className={`text-xs bg-${currentStepData.sideColor}-100 border-${currentStepData.sideColor}-300`}>\n                    {currentStepData.side}\n                  </Badge>\n                </div>\n                <p className={`text-${currentStepData.sideColor}-800 text-sm mb-3`}>{currentStepData.guidance}</p>\n                <div className={`text-${currentStepData.sideColor}-700 text-sm`}>\n                  <strong>Why this matters:</strong> {currentStepData.why}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Examples */}\n          <div className=\"bg-muted/30 rounded-lg p-4\">\n            <h4 className=\"font-medium mb-2\">Examples:</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n              {currentStepData.examples.map((example, index) => (\n                <div key={index} className=\"text-sm text-muted-foreground bg-background rounded px-3 py-2\">\n                  {example}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Current Items */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <h4 className=\"font-medium\">Your {currentStepData.title}</h4>\n              {!readOnly && (\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => setShowAddDialog(true)}\n                >\n                  Add Item\n                </Button>\n              )}\n            </div>\n            \n            {currentItems.length > 0 ? (\n              <div className=\"space-y-2\">\n                {currentItems.map((item, index) => (\n                  <div key={index} className=\"group relative\">\n                    <div className=\"p-3 bg-muted/30 rounded-md text-sm leading-relaxed pr-8\">\n                      {item}\n                    </div>\n                    {!readOnly && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => removeItem(index)}\n                        className=\"absolute top-1 right-1 opacity-0 group-hover:opacity-100 h-6 w-6 p-0 text-muted-foreground hover:text-destructive\"\n                      >\n                        \n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg\">\n                <Icon className=\"w-8 h-8 mx-auto mb-2 opacity-40\" />\n                <p className=\"text-sm\">No items added yet</p>\n                <p className=\"text-xs mt-1\">Add your first item to continue</p>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Navigation */}\n      <div className=\"flex items-center justify-between\">\n        <Button\n          variant=\"outline\"\n          onClick={previousStep}\n          disabled={!canGoPrevious}\n        >\n          <ChevronLeft className=\"w-4 h-4 mr-2\" />\n          Previous\n        </Button>\n\n        <div className=\"flex items-center gap-4\">\n          {!readOnly && !isLastStep && (\n            <Button variant=\"outline\" onClick={handleSave} disabled={vpc.isSaving}>\n              {vpc.isSaving ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : null}\n              Save Progress\n            </Button>\n          )}\n\n          <Button\n            onClick={isLastStep ? handleComplete : nextStep}\n            disabled={!canGoNext || vpc.isSaving}\n            className=\"min-w-[100px]\"\n          >\n            {vpc.isSaving ? (\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n            ) : isLastStep ? (\n              <>\n                <CheckCircle className=\"w-4 h-4 mr-2\" />\n                Complete\n              </>\n            ) : (\n              <>\n                Next\n                <ChevronRight className=\"w-4 h-4 ml-2\" />\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n\n      {/* Step Overview */}\n      <Card className=\"bg-muted/30\">\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Your Progress</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <h4 className=\"font-medium mb-3 text-blue-700\">Customer Profile</h4>\n              {vpcSteps.filter(step => step.side === 'Customer Profile').map((step, index) => {\n                const StepIcon = step.icon;\n                const isCompleted = canvasData[step.id as keyof VPCData].length > 0;\n                const isCurrent = vpcSteps.findIndex(s => s.id === step.id) === currentStep;\n                \n                return (\n                  <div \n                    key={step.id}\n                    className={`p-3 rounded-lg border transition-all mb-2 ${\n                      isCurrent ? 'border-primary bg-primary/5' : \n                      isCompleted ? 'border-blue-200 bg-blue-50' : \n                      'border-muted bg-background'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <StepIcon className={`w-4 h-4 ${\n                        isCurrent ? 'text-primary' : \n                        isCompleted ? 'text-blue-600' : \n                        'text-muted-foreground'\n                      }`} />\n                      <span className=\"text-sm font-medium\">{step.title}</span>\n                      {isCompleted && <CheckCircle className=\"w-3 h-3 text-blue-600 ml-auto\" />}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">{step.description}</p>\n                  </div>\n                );\n              })}\n            </div>\n            \n            <div>\n              <h4 className=\"font-medium mb-3 text-green-700\">Value Map</h4>\n              {vpcSteps.filter(step => step.side === 'Value Map').map((step, index) => {\n                const StepIcon = step.icon;\n                const isCompleted = canvasData[step.id as keyof VPCData].length > 0;\n                const isCurrent = vpcSteps.findIndex(s => s.id === step.id) === currentStep;\n                \n                return (\n                  <div \n                    key={step.id}\n                    className={`p-3 rounded-lg border transition-all mb-2 ${\n                      isCurrent ? 'border-primary bg-primary/5' : \n                      isCompleted ? 'border-green-200 bg-green-50' : \n                      'border-muted bg-background'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <StepIcon className={`w-4 h-4 ${\n                        isCurrent ? 'text-primary' : \n                        isCompleted ? 'text-green-600' : \n                        'text-muted-foreground'\n                      }`} />\n                      <span className=\"text-sm font-medium\">{step.title}</span>\n                      {isCompleted && <CheckCircle className=\"w-3 h-3 text-green-600 ml-auto\" />}\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">{step.description}</p>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Add Item Dialog */}\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Add {currentStepData.title}</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Textarea\n              placeholder={`Enter your ${currentStepData.title.toLowerCase()}...`}\n              value={newItem}\n              onChange={(e) => setNewItem(e.target.value)}\n              className=\"min-h-[100px]\"\n              autoFocus\n            />\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAddDialog(false)}>\n              Cancel\n            </Button>\n            <Button onClick={addItem} disabled={!newItem.trim()}>\n              Add Item\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Segment Name Dialog (for Supabase saving) */}\n      {projectId && (\n        <Dialog open={showSegmentNameDialog} onOpenChange={setShowSegmentNameDialog}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Name Your Customer Segment</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"segmentName\">Segment Name</Label>\n                <Input\n                  id=\"segmentName\"\n                  placeholder=\"e.g., Small Business Owners, Enterprise IT Managers\"\n                  value={segmentName}\n                  onChange={(e) => setSegmentName(e.target.value)}\n                  autoFocus\n                />\n                <p className=\"text-sm text-muted-foreground\">\n                  Give your customer segment a descriptive name. This will help you identify it later.\n                </p>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setShowSegmentNameDialog(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleSegmentNameSubmit} disabled={!segmentName.trim() || vpc.isSaving}>\n                {vpc.isSaving ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : null}\n                Save VPC\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n\n      {/* Loading/Initializing from CrewAI indicator */}\n      {projectId && vpc.isLoading && (\n        <div className=\"fixed inset-0 bg-background/80 flex items-center justify-center z-50\">\n          <div className=\"flex items-center gap-3 p-4 bg-card rounded-lg shadow-lg\">\n            <Loader2 className=\"w-5 h-5 animate-spin\" />\n            <span>Loading VPC data...</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/TestingBusinessIdeasCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/TestingBusinessIdeasTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/ValuePropositionCanvas.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/canvas/ValuePropositionCanvas.tsx:82:7\n  80 |         }\n  81 |       }\n> 82 |       setVpcData(validatedData)\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  83 |     } else {\n  84 |       // Load from localStorage\n  85 |       const storageKey = canvasId ? `vpc-canvas-${canvasId}` : 'vpc:v1'","line":82,"column":7,"nodeType":null,"endLine":82,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'canvasId'. Either include it or remove the dependency array.","line":112,"column":6,"nodeType":"ArrayExpression","endLine":112,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [canvasId, initialData]","fix":{"range":[3514,3527],"text":"[canvasId, initialData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ValuePropositionCanvas Component\n *\n * Interactive canvas for editing Value Proposition Canvas data.\n *\n * @story US-F12\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Separator } from '@/components/ui/separator';\nimport { Input } from '@/components/ui/input';\nimport { Gift, TrendingUp, Pill, Smile, Frown, List, Save, Download, Upload } from 'lucide-react';\n\ninterface VPCData {\n  valuePropositionTitle: string\n  customerSegmentTitle: string\n  valueMap: {\n    productsAndServices: string[]\n    gainCreators: string[]\n    painRelievers: string[]\n  }\n  customerProfile: {\n    gains: string[]\n    pains: string[]\n    jobs: string[]\n  }\n}\n\nconst defaultVPC: VPCData = {\n  valuePropositionTitle: \"\",\n  customerSegmentTitle: \"\",\n  valueMap: { \n    productsAndServices: [\"\"], \n    gainCreators: [\"\"], \n    painRelievers: [\"\"] \n  },\n  customerProfile: { \n    gains: [\"\"], \n    pains: [\"\"], \n    jobs: [\"\"] \n  }\n}\n\ninterface ValuePropositionCanvasProps {\n  canvasId?: string\n  clientId?: string\n  initialData?: VPCData\n  onSave?: (data: VPCData) => void\n  readOnly?: boolean\n}\n\nexport default function ValuePropositionCanvas({ \n  canvasId, \n  clientId, \n  initialData, \n  onSave, \n  readOnly = false \n}: ValuePropositionCanvasProps) {\n  const [vpcData, setVpcData] = useState<VPCData>(defaultVPC)\n\n  useEffect(() => {\n    if (initialData) {\n      // Merge initialData with defaultVPC to ensure all required fields exist\n      const validatedData = {\n        valuePropositionTitle: initialData.valuePropositionTitle || \"\",\n        customerSegmentTitle: initialData.customerSegmentTitle || \"\",\n        valueMap: {\n          productsAndServices: initialData.valueMap?.productsAndServices || [\"\"],\n          gainCreators: initialData.valueMap?.gainCreators || [\"\"],\n          painRelievers: initialData.valueMap?.painRelievers || [\"\"]\n        },\n        customerProfile: {\n          gains: initialData.customerProfile?.gains || [\"\"],\n          pains: initialData.customerProfile?.pains || [\"\"],\n          jobs: initialData.customerProfile?.jobs || [\"\"]\n        }\n      }\n      setVpcData(validatedData)\n    } else {\n      // Load from localStorage\n      const storageKey = canvasId ? `vpc-canvas-${canvasId}` : 'vpc:v1'\n      const saved = localStorage.getItem(storageKey)\n      if (saved) {\n        try {\n          const parsedData = JSON.parse(saved)\n          // Validate and merge with defaults\n          const validatedData = {\n            valuePropositionTitle: parsedData.valuePropositionTitle || \"\",\n            customerSegmentTitle: parsedData.customerSegmentTitle || \"\",\n            valueMap: {\n              productsAndServices: parsedData.valueMap?.productsAndServices || [\"\"],\n              gainCreators: parsedData.valueMap?.gainCreators || [\"\"],\n              painRelievers: parsedData.valueMap?.painRelievers || [\"\"]\n            },\n            customerProfile: {\n              gains: parsedData.customerProfile?.gains || [\"\"],\n              pains: parsedData.customerProfile?.pains || [\"\"],\n              jobs: parsedData.customerProfile?.jobs || [\"\"]\n            }\n          }\n          setVpcData(validatedData)\n        } catch (e) {\n          console.error('Failed to load VPC data:', e)\n          setVpcData(defaultVPC)\n        }\n      }\n    }\n  }, [initialData])\n\n  const saveToLocalStorage = () => {\n    const storageKey = canvasId ? `vpc-canvas-${canvasId}` : 'vpc:v1'\n    localStorage.setItem(storageKey, JSON.stringify(vpcData))\n  }\n\n  const handleSave = () => {\n    saveToLocalStorage()\n    onSave?.(vpcData)\n  }\n\n  const exportJSON = () => {\n    const dataStr = JSON.stringify(vpcData, null, 2)\n    const dataBlob = new Blob([dataStr], { type: 'application/json' })\n    const url = URL.createObjectURL(dataBlob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = 'value-proposition-canvas.json'\n    link.click()\n    URL.revokeObjectURL(url)\n  }\n\n  const importJSON = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (file) {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        try {\n          const imported = JSON.parse(e.target?.result as string)\n          setVpcData(imported)\n        } catch (error) {\n          console.error('Failed to import JSON:', error)\n        }\n      }\n      reader.readAsText(file)\n    }\n  }\n\n  const updateField = (section: keyof VPCData, field: string, value: string | string[]) => {\n    setVpcData(prev => ({\n      ...prev,\n      [section]: typeof prev[section] === 'object' && !Array.isArray(prev[section])\n        ? { ...prev[section], [field]: value }\n        : value\n    }))\n  }\n\n  const updateArrayField = (section: 'valueMap' | 'customerProfile', field: string, index: number, value: string) => {\n    setVpcData(prev => ({\n      ...prev,\n      [section]: {\n        ...prev[section],\n        [field]: prev[section][field].map((item, i) => i === index ? value : item)\n      }\n    }))\n  }\n\n  const addArrayItem = (section: 'valueMap' | 'customerProfile', field: string) => {\n    setVpcData(prev => ({\n      ...prev,\n      [section]: {\n        ...prev[section],\n        [field]: [...prev[section][field], \"\"]\n      }\n    }))\n  }\n\n  const removeArrayItem = (section: 'valueMap' | 'customerProfile', field: string, index: number) => {\n    setVpcData(prev => ({\n      ...prev,\n      [section]: {\n        ...prev[section],\n        [field]: prev[section][field].filter((_, i) => i !== index)\n      }\n    }))\n  }\n\n  return (\n    <div className=\"w-full max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen print:bg-white print:p-0\">\n      {/* Header */}\n      <div className=\"text-center mb-8 print:mb-4\">\n        <h1 className=\"text-3xl font-bold mb-4 print:text-2xl\">Value Proposition Canvas</h1>\n        \n        {!readOnly && (\n          <div className=\"flex justify-center gap-2 mb-6 print:hidden\">\n            <Button onClick={handleSave} className=\"flex items-center gap-2\">\n              <Save className=\"w-4 h-4\" />\n              Save\n            </Button>\n            <Button onClick={exportJSON} variant=\"outline\" className=\"flex items-center gap-2\">\n              <Download className=\"w-4 h-4\" />\n              Export JSON\n            </Button>\n            <div className=\"relative\">\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={importJSON}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Button variant=\"outline\" className=\"flex items-center gap-2\">\n                <Upload className=\"w-4 h-4\" />\n                Import JSON\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Title Fields */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n        <div>\n          <Label htmlFor=\"vpTitle\" className=\"text-sm font-medium\">Value Proposition:</Label>\n          <Input\n            id=\"vpTitle\"\n            value={vpcData.valuePropositionTitle}\n            onChange={(e) => updateField('valuePropositionTitle', '', e.target.value)}\n            placeholder=\"Enter value proposition title...\"\n            disabled={readOnly}\n            className=\"mt-1\"\n          />\n        </div>\n        <div>\n          <Label htmlFor=\"csTitle\" className=\"text-sm font-medium\">Customer Segment:</Label>\n          <Input\n            id=\"csTitle\"\n            value={vpcData.customerSegmentTitle}\n            onChange={(e) => updateField('customerSegmentTitle', '', e.target.value)}\n            placeholder=\"Enter customer segment title...\"\n            disabled={readOnly}\n            className=\"mt-1\"\n          />\n        </div>\n      </div>\n\n      {/* Main Canvas */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-8\">\n        {/* Value Map (Left Side) */}\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-xl font-semibold mb-4\">Value Map</h2>\n          </div>\n\n          {/* Products & Services */}\n          <Card className=\"relative\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <Gift className=\"w-5 h-5 text-purple-600\" />\n                Products & Services\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.valueMap.productsAndServices.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('valueMap', 'productsAndServices', index, e.target.value)}\n                    placeholder=\"What products and services do you offer?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.valueMap.productsAndServices.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('valueMap', 'productsAndServices', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('valueMap', 'productsAndServices')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Product/Service\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Gain Creators */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <TrendingUp className=\"w-5 h-5 text-green-600\" />\n                Gain Creators\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.valueMap.gainCreators.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('valueMap', 'gainCreators', index, e.target.value)}\n                    placeholder=\"How do you create customer gains?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.valueMap.gainCreators.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('valueMap', 'gainCreators', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('valueMap', 'gainCreators')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Gain Creator\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Pain Relievers */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <Pill className=\"w-5 h-5 text-blue-600\" />\n                Pain Relievers\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.valueMap.painRelievers.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('valueMap', 'painRelievers', index, e.target.value)}\n                    placeholder=\"How do you relieve customer pains?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.valueMap.painRelievers.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('valueMap', 'painRelievers', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('valueMap', 'painRelievers')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Pain Reliever\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Customer Profile (Right Side) */}\n        <div className=\"space-y-6\">\n          <div className=\"text-center\">\n            <h2 className=\"text-xl font-semibold mb-4\">Customer Profile</h2>\n          </div>\n\n          {/* Customer Jobs */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <List className=\"w-5 h-5 text-blue-600\" />\n                Customer Jobs\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.customerProfile.jobs.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('customerProfile', 'jobs', index, e.target.value)}\n                    placeholder=\"What jobs is your customer trying to get done?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.customerProfile.jobs.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('customerProfile', 'jobs', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('customerProfile', 'jobs')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Customer Job\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Gains */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <Smile className=\"w-5 h-5 text-green-600\" />\n                Gains\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.customerProfile.gains.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('customerProfile', 'gains', index, e.target.value)}\n                    placeholder=\"What gains does your customer expect?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.customerProfile.gains.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('customerProfile', 'gains', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('customerProfile', 'gains')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Gain\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Pains */}\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"flex items-center gap-2 text-lg\">\n                <Frown className=\"w-5 h-5 text-red-600\" />\n                Pains\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {vpcData.customerProfile.pains.map((item, index) => (\n                <div key={index} className=\"flex gap-2\">\n                  <Textarea\n                    value={item}\n                    onChange={(e) => updateArrayField('customerProfile', 'pains', index, e.target.value)}\n                    placeholder=\"What pains does your customer experience?\"\n                    disabled={readOnly}\n                    className=\"min-h-[60px] resize-none\"\n                  />\n                  {!readOnly && vpcData.customerProfile.pains.length > 1 && (\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => removeArrayItem('customerProfile', 'pains', index)}\n                      className=\"px-2\"\n                    >\n                      \n                    </Button>\n                  )}\n                </div>\n              ))}\n              {!readOnly && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => addArrayItem('customerProfile', 'pains')}\n                  className=\"w-full border-2 border-dashed\"\n                >\n                  + Add Pain\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Footer Spacing */}\n      <div className=\"h-16\"></div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/VPCCanvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/VPCFitLines.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/VPCHoverContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/VPCSvgBackground.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/hooks/useVPCConnections.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/canvas/vpc/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/consultant/ClientValidationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/consultant/InviteClientModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/consultant/__tests__/ClientValidationCard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/consultant/__tests__/InviteClientModal.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/dashboard/IntegrationBanner.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/dashboard/IntegrationBanner.tsx:35:7\n  33 |     const dismissed = localStorage.getItem(storageKey);\n  34 |     if (dismissed === 'true') {\n> 35 |       setIsDismissed(true);\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |     } else {\n  37 |       setIsDismissed(false);\n  38 |     }","line":35,"column":7,"nodeType":null,"endLine":35,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * Integration Banner Component\n *\n * Displays a dismissible banner prompting users to connect integrations\n * if they skipped the integration selection during onboarding.\n *\n * @story US-BI04, US-BI05\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { X, Plug, ArrowRight } from 'lucide-react';\nimport { useIntegrations } from '@/hooks/useIntegrations';\n\ninterface IntegrationBannerProps {\n  /** Storage key for dismissal persistence */\n  storageKey?: string;\n}\n\nexport function IntegrationBanner({\n  storageKey = 'integration-banner-dismissed',\n}: IntegrationBannerProps) {\n  const router = useRouter();\n  const { integrations, isLoading } = useIntegrations();\n  const [isDismissed, setIsDismissed] = useState(true); // Start hidden to avoid flash\n\n  useEffect(() => {\n    // Check localStorage for dismissal state\n    const dismissed = localStorage.getItem(storageKey);\n    if (dismissed === 'true') {\n      setIsDismissed(true);\n    } else {\n      setIsDismissed(false);\n    }\n  }, [storageKey]);\n\n  const handleDismiss = () => {\n    localStorage.setItem(storageKey, 'true');\n    setIsDismissed(true);\n  };\n\n  const handleConnect = () => {\n    router.push('/settings?tab=integrations');\n  };\n\n  // Don't show if loading, dismissed, or user has active integrations\n  if (isLoading || isDismissed) {\n    return null;\n  }\n\n  // Check if user has any active integrations\n  const hasActiveIntegrations = integrations?.some(\n    (integration) => integration.status === 'active'\n  );\n\n  if (hasActiveIntegrations) {\n    return null;\n  }\n\n  return (\n    <Card className=\"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10\">\n      <CardContent className=\"py-4\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"hidden sm:flex h-10 w-10 items-center justify-center rounded-full bg-primary/10\">\n              <Plug className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <h4 className=\"font-medium\">Connect Your Tools</h4>\n              <p className=\"text-sm text-muted-foreground\">\n                Sync with Notion, Google Drive, Slack, and more to enhance your workflow.\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              onClick={handleConnect}\n              className=\"hidden sm:flex gap-1\"\n            >\n              Connect Integrations\n              <ArrowRight className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              onClick={handleConnect}\n              className=\"sm:hidden\"\n            >\n              Connect\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={handleDismiss}\n              className=\"h-8 w-8 text-muted-foreground hover:text-foreground\"\n              aria-label=\"Dismiss\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/dashboard/MetricsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/dev/ClickToComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/AIEvidenceCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/EvidenceDetailPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/EvidenceFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/EvidenceSummaryPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/EvidenceTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/UserEvidenceCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence-explorer/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence/EvidenceInputForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/evidence/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/fit/CrewAIEvidenceMetrics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/fit/EvidenceLedger.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/fit/ExperimentsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/fit/FitDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx","messages":[{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:141:14\n  139 |             )}\n  140 |           >\n> 141 |             <Icon className={cn('h-2.5 w-2.5', config.color)} />\n      |              ^^^^ This component is created during render\n  142 |           </div>\n  143 |         </TooltipTrigger>\n  144 |         <TooltipContent side=\"top\">\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:129:16\n  127 | function SignalDot({ type, signal }: SignalDotProps) {\n  128 |   const config = getSignalConfig(type, signal)\n> 129 |   const Icon = getSignalIcon(signal)\n      |                ^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  130 |\n  131 |   return (\n  132 |     <TooltipProvider>","line":141,"column":14,"nodeType":null,"endLine":141,"endColumn":18},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:186:16\n  184 |           <div className=\"flex items-center gap-2\">\n  185 |             <div className={cn('p-2 rounded-lg', typeColors[type])}>\n> 186 |               <TypeIcon className={cn('h-4 w-4', typeColors[type].split(' ')[0])} />\n      |                ^^^^^^^^ This component is created during render\n  187 |             </div>\n  188 |             <div>\n  189 |               <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:165:20\n  163 | function SignalCard({ type, signal, showLabel = true }: SignalCardProps) {\n  164 |   const config = getSignalConfig(type, signal)\n> 165 |   const TypeIcon = getTypeIcon(type)\n      |                    ^^^^^^^^^^^^^^^^^ The component is created during render here\n  166 |   const SignalIcon = getSignalIcon(signal)\n  167 |\n  168 |   const typeLabels = {","line":186,"column":16,"nodeType":null,"endLine":186,"endColumn":24},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:200:14\n  198 |           </div>\n  199 |           <div className={cn('p-2 rounded-full', config.bgColor)}>\n> 200 |             <SignalIcon className={cn('h-4 w-4', config.color)} />\n      |              ^^^^^^^^^^ This component is created during render\n  201 |           </div>\n  202 |         </div>\n  203 |       </CardContent>\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:166:22\n  164 |   const config = getSignalConfig(type, signal)\n  165 |   const TypeIcon = getTypeIcon(type)\n> 166 |   const SignalIcon = getSignalIcon(signal)\n      |                      ^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  167 |\n  168 |   const typeLabels = {\n  169 |     desirability: 'Desirability',","line":200,"column":14,"nodeType":null,"endLine":200,"endColumn":24},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:256:8\n  254 |       className={cn('gap-1.5', config.bgColor, 'border-transparent')}\n  255 |     >\n> 256 |       <TypeIcon className=\"h-3 w-3\" />\n      |        ^^^^^^^^ This component is created during render\n  257 |       <Icon className={cn('h-3 w-3', config.color)} />\n  258 |     </Badge>\n  259 |   )\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:249:20\n  247 |   const config = getSignalConfig(type, signal)\n  248 |   const Icon = getSignalIcon(signal)\n> 249 |   const TypeIcon = getTypeIcon(type)\n      |                    ^^^^^^^^^^^^^^^^^ The component is created during render here\n  250 |\n  251 |   return (\n  252 |     <Badge","line":256,"column":8,"nodeType":null,"endLine":256,"endColumn":16},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:257:8\n  255 |     >\n  256 |       <TypeIcon className=\"h-3 w-3\" />\n> 257 |       <Icon className={cn('h-3 w-3', config.color)} />\n      |        ^^^^ This component is created during render\n  258 |     </Badge>\n  259 |   )\n  260 | }\n\n/home/chris/projects/app.startupai.site/frontend/src/components/fit/InnovationPhysicsSignals.tsx:248:16\n  246 | function SignalBadge({ type, signal }: SignalBadgeProps) {\n  247 |   const config = getSignalConfig(type, signal)\n> 248 |   const Icon = getSignalIcon(signal)\n      |                ^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  249 |   const TypeIcon = getTypeIcon(type)\n  250 |\n  251 |   return (","line":257,"column":8,"nodeType":null,"endLine":257,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-F16\n */\n\"use client\"\n\nimport React from 'react'\nimport { cn } from '@/lib/utils'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger\n} from '@/components/ui/tooltip'\nimport {\n  Heart,\n  Cog,\n  DollarSign,\n  Circle,\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  Skull,\n  HelpCircle\n} from 'lucide-react'\nimport {\n  type DesirabilitySignal,\n  type FeasibilitySignal,\n  type ViabilitySignal\n} from '@/types/crewai'\nimport { signalConfig } from '@/components/strategyzer/types'\n\n// Type-safe helper to get signal config\ntype SignalConfigItem = { label: string; color: string; bgColor: string; icon: string }\n\nfunction getSignalConfig(\n  type: 'desirability' | 'feasibility' | 'viability',\n  signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal\n): SignalConfigItem {\n  const typeConfig = signalConfig[type]\n  // Default config for unknown signals\n  const defaultConfig: SignalConfigItem = {\n    label: 'Unknown',\n    color: 'text-gray-500',\n    bgColor: 'bg-gray-100',\n    icon: 'circle'\n  }\n\n  if (type === 'desirability' && signal in typeConfig) {\n    return typeConfig[signal as DesirabilitySignal]\n  }\n  if (type === 'feasibility' && signal in typeConfig) {\n    return typeConfig[signal as FeasibilitySignal]\n  }\n  if (type === 'viability' && signal in typeConfig) {\n    return typeConfig[signal as ViabilitySignal]\n  }\n\n  return defaultConfig\n}\n\ninterface InnovationPhysicsSignalsProps {\n  desirability: DesirabilitySignal\n  feasibility: FeasibilitySignal\n  viability: ViabilitySignal\n  compact?: boolean\n  showLabels?: boolean\n  className?: string\n}\n\n/**\n * Innovation Physics Signal Display\n *\n * Shows the current D-F-V signals from CrewAI validation:\n * - Desirability: no_signal | no_interest | weak_interest | strong_commitment\n * - Feasibility: unknown | green | orange_constrained | red_impossible\n * - Viability: unknown | profitable | marginal | underwater | zombie_market\n */\nexport function InnovationPhysicsSignals({\n  desirability,\n  feasibility,\n  viability,\n  compact = false,\n  showLabels = true,\n  className\n}: InnovationPhysicsSignalsProps) {\n  if (compact) {\n    return (\n      <div className={cn('flex items-center gap-2', className)}>\n        <SignalDot type=\"desirability\" signal={desirability} />\n        <SignalDot type=\"feasibility\" signal={feasibility} />\n        <SignalDot type=\"viability\" signal={viability} />\n      </div>\n    )\n  }\n\n  return (\n    <div className={cn('grid gap-3 md:grid-cols-3', className)}>\n      <SignalCard\n        type=\"desirability\"\n        signal={desirability}\n        showLabel={showLabels}\n      />\n      <SignalCard\n        type=\"feasibility\"\n        signal={feasibility}\n        showLabel={showLabels}\n      />\n      <SignalCard\n        type=\"viability\"\n        signal={viability}\n        showLabel={showLabels}\n      />\n    </div>\n  )\n}\n\n/**\n * Compact signal dot with tooltip\n */\ninterface SignalDotProps {\n  type: 'desirability' | 'feasibility' | 'viability'\n  signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal\n}\n\nfunction SignalDot({ type, signal }: SignalDotProps) {\n  const config = getSignalConfig(type, signal)\n  const Icon = getSignalIcon(signal)\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <div\n            className={cn(\n              'h-4 w-4 rounded-full flex items-center justify-center',\n              config.bgColor\n            )}\n          >\n            <Icon className={cn('h-2.5 w-2.5', config.color)} />\n          </div>\n        </TooltipTrigger>\n        <TooltipContent side=\"top\">\n          <div className=\"text-xs\">\n            <span className=\"font-medium capitalize\">{type}:</span> {config.label}\n          </div>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  )\n}\n\n/**\n * Full signal card with icon, label, and description\n */\ninterface SignalCardProps {\n  type: 'desirability' | 'feasibility' | 'viability'\n  signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal\n  showLabel?: boolean\n}\n\nfunction SignalCard({ type, signal, showLabel = true }: SignalCardProps) {\n  const config = getSignalConfig(type, signal)\n  const TypeIcon = getTypeIcon(type)\n  const SignalIcon = getSignalIcon(signal)\n\n  const typeLabels = {\n    desirability: 'Desirability',\n    feasibility: 'Feasibility',\n    viability: 'Viability'\n  }\n\n  const typeColors = {\n    desirability: 'text-pink-600 bg-pink-50',\n    feasibility: 'text-blue-600 bg-blue-50',\n    viability: 'text-green-600 bg-green-50'\n  }\n\n  return (\n    <Card className={cn('border-l-4', getBorderColor(signal))}>\n      <CardContent className=\"pt-4\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className={cn('p-2 rounded-lg', typeColors[type])}>\n              <TypeIcon className={cn('h-4 w-4', typeColors[type].split(' ')[0])} />\n            </div>\n            <div>\n              <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n                {typeLabels[type]}\n              </p>\n              {showLabel && (\n                <p className={cn('text-sm font-semibold', config.color)}>\n                  {config.label}\n                </p>\n              )}\n            </div>\n          </div>\n          <div className={cn('p-2 rounded-full', config.bgColor)}>\n            <SignalIcon className={cn('h-4 w-4', config.color)} />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n/**\n * Signal summary banner - shows all three signals in a compact header format\n */\ninterface SignalBannerProps {\n  desirability: DesirabilitySignal\n  feasibility: FeasibilitySignal\n  viability: ViabilitySignal\n  className?: string\n}\n\nexport function SignalBanner({\n  desirability,\n  feasibility,\n  viability,\n  className\n}: SignalBannerProps) {\n  return (\n    <div className={cn('flex items-center gap-4 p-3 rounded-lg bg-muted/50', className)}>\n      <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n        Innovation Physics\n      </span>\n      <div className=\"flex items-center gap-3\">\n        <SignalBadge type=\"desirability\" signal={desirability} />\n        <SignalBadge type=\"feasibility\" signal={feasibility} />\n        <SignalBadge type=\"viability\" signal={viability} />\n      </div>\n    </div>\n  )\n}\n\n/**\n * Individual signal badge\n */\ninterface SignalBadgeProps {\n  type: 'desirability' | 'feasibility' | 'viability'\n  signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal\n}\n\nfunction SignalBadge({ type, signal }: SignalBadgeProps) {\n  const config = getSignalConfig(type, signal)\n  const Icon = getSignalIcon(signal)\n  const TypeIcon = getTypeIcon(type)\n\n  return (\n    <Badge\n      variant=\"outline\"\n      className={cn('gap-1.5', config.bgColor, 'border-transparent')}\n    >\n      <TypeIcon className=\"h-3 w-3\" />\n      <Icon className={cn('h-3 w-3', config.color)} />\n    </Badge>\n  )\n}\n\n// Helper functions\n\nfunction getTypeIcon(type: 'desirability' | 'feasibility' | 'viability') {\n  switch (type) {\n    case 'desirability':\n      return Heart\n    case 'feasibility':\n      return Cog\n    case 'viability':\n      return DollarSign\n  }\n}\n\nfunction getSignalIcon(signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal) {\n  switch (signal) {\n    // Positive signals\n    case 'strong_commitment':\n    case 'green':\n    case 'profitable':\n      return CheckCircle\n\n    // Warning signals\n    case 'weak_interest':\n    case 'orange_constrained':\n    case 'marginal':\n      return AlertTriangle\n\n    // Negative signals\n    case 'no_interest':\n    case 'red_impossible':\n    case 'underwater':\n      return XCircle\n\n    // Special cases\n    case 'zombie_market':\n      return Skull\n\n    // Unknown/untested\n    case 'no_signal':\n    case 'unknown':\n    default:\n      return Circle\n  }\n}\n\nfunction getBorderColor(signal: DesirabilitySignal | FeasibilitySignal | ViabilitySignal): string {\n  switch (signal) {\n    case 'strong_commitment':\n    case 'green':\n    case 'profitable':\n      return 'border-l-green-500'\n\n    case 'weak_interest':\n    case 'orange_constrained':\n    case 'marginal':\n      return 'border-l-yellow-500'\n\n    case 'no_interest':\n    case 'red_impossible':\n    case 'underwater':\n      return 'border-l-red-500'\n\n    case 'zombie_market':\n      return 'border-l-purple-500'\n\n    default:\n      return 'border-l-gray-300'\n  }\n}\n\nexport default InnovationPhysicsSignals\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/founder/StageSelector.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":197,"column":44,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6377,6454],"text":"\n              Navigate through your startup&apos;s validation stages\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6377,6454],"text":"\n              Navigate through your startup&lsquo;s validation stages\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6377,6454],"text":"\n              Navigate through your startup&#39;s validation stages\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6377,6454],"text":"\n              Navigate through your startup&rsquo;s validation stages\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-F02\n */\n\"use client\"\n\nimport * as React from \"react\"\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { \n  Search, \n  CheckSquare, \n  TrendingUp, \n  Zap,\n  Target,\n  CheckCircle\n} from \"lucide-react\"\n\ninterface StageSelectorProps {\n  currentStage?: 'discovery' | 'validation' | 'scaling' | 'optimization'\n  onStageChange?: (stage: string) => void\n  className?: string\n}\n\nconst stageConfig = {\n  discovery: {\n    icon: Search,\n    label: \"Discovery\",\n    description: \"Understanding your market and customers\",\n    color: \"text-blue-600\",\n    bg: \"bg-blue-50\",\n    progress: 25,\n    focus: \"Desirability\",\n    keyActivities: [\n      \"Customer interviews and surveys\",\n      \"Problem validation research\", \n      \"Market size analysis\",\n      \"Competitor landscape mapping\"\n    ],\n    nextMilestone: \"Validate core problem-solution fit\",\n    tools: [\"Interview templates\", \"Survey builders\", \"Market research\"]\n  },\n  validation: {\n    icon: CheckSquare,\n    label: \"Validation\",\n    description: \"Testing your solution and business model\",\n    color: \"text-green-600\", \n    bg: \"bg-green-50\",\n    progress: 50,\n    focus: \"Feasibility\",\n    keyActivities: [\n      \"MVP development and testing\",\n      \"Technical feasibility validation\",\n      \"Business model experiments\",\n      \"Early customer acquisition\"\n    ],\n    nextMilestone: \"Prove product-market fit\",\n    tools: [\"A/B testing\", \"Analytics\", \"Prototype builders\"]\n  },\n  scaling: {\n    icon: TrendingUp,\n    label: \"Scaling\", \n    description: \"Growing your validated business model\",\n    color: \"text-purple-600\",\n    bg: \"bg-purple-50\", \n    progress: 75,\n    focus: \"Viability\",\n    keyActivities: [\n      \"Revenue model optimization\",\n      \"Unit economics validation\",\n      \"Operational scaling\",\n      \"Team building and processes\"\n    ],\n    nextMilestone: \"Achieve sustainable growth\",\n    tools: [\"Financial models\", \"Operations tools\", \"Team management\"]\n  },\n  optimization: {\n    icon: Zap,\n    label: \"Optimization\",\n    description: \"Maximizing efficiency and market position\", \n    color: \"text-orange-600\",\n    bg: \"bg-orange-50\",\n    progress: 100,\n    focus: \"Excellence\",\n    keyActivities: [\n      \"Performance optimization\",\n      \"Market expansion strategies\", \n      \"Competitive differentiation\",\n      \"Innovation and R&D\"\n    ],\n    nextMilestone: \"Market leadership position\",\n    tools: [\"Advanced analytics\", \"Automation\", \"Strategic planning\"]\n  }\n}\n\nfunction StageOverview({ stage }: { stage: keyof typeof stageConfig }) {\n  const config = stageConfig[stage]\n  const Icon = config.icon\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Stage Header */}\n      <Card className={`${config.bg} border-2`}>\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-3 rounded-lg bg-white shadow-sm\">\n              <Icon className={`h-6 w-6 ${config.color}`} />\n            </div>\n            <div className=\"flex-1\">\n              <CardTitle className=\"text-xl\">{config.label} Stage</CardTitle>\n              <CardDescription className=\"text-base\">{config.description}</CardDescription>\n            </div>\n            <Badge variant=\"outline\" className=\"text-sm\">\n              {config.focus} Focus\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-sm font-medium\">Stage Progress</span>\n              <span className=\"text-sm text-muted-foreground\">{config.progress}%</span>\n            </div>\n            <Progress value={config.progress} className=\"h-2\" />\n            <div className=\"flex items-center gap-2 text-sm\">\n              <Target className=\"h-4 w-4\" />\n              <span className=\"font-medium\">Next Milestone:</span>\n              <span className=\"text-muted-foreground\">{config.nextMilestone}</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Key Activities */}\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Key Activities</CardTitle>\n            <CardDescription>Focus areas for this stage</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {config.keyActivities.map((activity, index) => (\n                <div key={index} className=\"flex items-start gap-3\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5\" />\n                  <span className=\"text-sm\">{activity}</span>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Recommended Tools</CardTitle>\n            <CardDescription>Resources to accelerate progress</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {config.tools.map((tool, index) => (\n                <div key={index} className=\"flex items-center justify-between\">\n                  <span className=\"text-sm\">{tool}</span>\n                  <Button variant=\"ghost\" size=\"sm\">\n                    Access\n                  </Button>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nexport function StageSelector({ \n  currentStage = 'discovery', \n  onStageChange,\n  className = \"\" \n}: StageSelectorProps) {\n  const [activeStage, setActiveStage] = React.useState(currentStage)\n\n  const handleStageChange = (stage: string) => {\n    setActiveStage(stage as keyof typeof stageConfig)\n    onStageChange?.(stage)\n  }\n\n  return (\n    <div className={className}>\n      <Tabs value={activeStage} onValueChange={handleStageChange}>\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold tracking-tight\">Validation Journey</h2>\n            <p className=\"text-muted-foreground\">\n              Navigate through your startup's validation stages\n            </p>\n          </div>\n          <TabsList className=\"grid w-full max-w-2xl grid-cols-4\">\n            <TabsTrigger value=\"discovery\" className=\"flex items-center gap-2\">\n              <Search className=\"h-4 w-4\" />\n              Discovery\n            </TabsTrigger>\n            <TabsTrigger value=\"validation\" className=\"flex items-center gap-2\">\n              <CheckSquare className=\"h-4 w-4\" />\n              Validation\n            </TabsTrigger>\n            <TabsTrigger value=\"scaling\" className=\"flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4\" />\n              Scaling\n            </TabsTrigger>\n            <TabsTrigger value=\"optimization\" className=\"flex items-center gap-2\">\n              <Zap className=\"h-4 w-4\" />\n              Optimization\n            </TabsTrigger>\n          </TabsList>\n        </div>\n\n        <TabsContent value=\"discovery\">\n          <StageOverview stage=\"discovery\" />\n        </TabsContent>\n\n        <TabsContent value=\"validation\">\n          <StageOverview stage=\"validation\" />\n        </TabsContent>\n\n        <TabsContent value=\"scaling\">\n          <StageOverview stage=\"scaling\" />\n        </TabsContent>\n\n        <TabsContent value=\"optimization\">\n          <StageOverview stage=\"optimization\" />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/founders/FounderAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/founders/FounderBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/founders/FounderStatusPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/founders/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/gates/GateDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/gates/GateReadinessIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/gates/GateStatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/hypothesis/HypothesisManager.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":829,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[34440,34441],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[34440,34441],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[34440,34441],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[34440,34441],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":829,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[34469,34470],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[34469,34470],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[34469,34470],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[34469,34470],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Hypothesis Manager UI\n * @story US-F17\n */\n\nimport React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Plus, Target, Users, Cog, DollarSign, AlertTriangle, CheckCircle, XCircle, Clock, Pencil, Trash2 } from 'lucide-react'\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog'\nimport { createClient } from '@/lib/supabase/client'\nimport { useProjects } from '@/hooks/useProjects'\n\n// Types\ninterface Hypothesis {\n  id: string\n  statement: string\n  type: 'desirable' | 'feasible' | 'viable'\n  importance: 'high' | 'medium' | 'low'\n  evidence: 'none' | 'weak' | 'medium' | 'strong'\n  status: 'untested' | 'testing' | 'validated' | 'invalidated'\n  source: string // BMC section or VPC section\n  createdAt: Date\n  updatedAt: Date\n}\n\nconst typeConfig = {\n  desirable: { \n    label: 'Desirable', \n    color: 'bg-blue-100 text-blue-800 border-blue-200',\n    icon: Users,\n    description: 'Do they want this?'\n  },\n  feasible: { \n    label: 'Feasible', \n    color: 'bg-green-100 text-green-800 border-green-200',\n    icon: Cog,\n    description: 'Can we do this?'\n  },\n  viable: { \n    label: 'Viable', \n    color: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n    icon: DollarSign,\n    description: 'Should we do this?'\n  }\n}\n\nconst importanceConfig = {\n  high: { label: 'High', color: 'bg-red-100 text-red-800' },\n  medium: { label: 'Medium', color: 'bg-orange-100 text-orange-800' },\n  low: { label: 'Low', color: 'bg-gray-100 text-gray-800' }\n}\n\nconst evidenceConfig = {\n  none: { label: 'No Evidence', color: 'bg-red-100 text-red-800' },\n  weak: { label: 'Weak Evidence', color: 'bg-orange-100 text-orange-800' },\n  medium: { label: 'Moderate Evidence', color: 'bg-yellow-100 text-yellow-800' },\n  strong: { label: 'Strong Evidence', color: 'bg-green-100 text-green-800' }\n}\n\nconst statusConfig = {\n  untested: { label: 'Untested', color: 'bg-gray-100 text-gray-800', icon: Clock },\n  testing: { label: 'Testing', color: 'bg-blue-100 text-blue-800', icon: Target },\n  validated: { label: 'Validated', color: 'bg-green-100 text-green-800', icon: CheckCircle },\n  invalidated: { label: 'Invalidated', color: 'bg-red-100 text-red-800', icon: XCircle }\n}\n\n// Defensive fallbacks for unknown values (prevents crashes from invalid DB data)\nconst defaultTypeConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800', icon: Target, description: 'Unknown type' }\nconst defaultImportanceConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800' }\nconst defaultEvidenceConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800' }\nconst defaultStatusConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800', icon: Clock }\n\n// Helper functions for safe config access\nconst getTypeConfig = (type: string | undefined | null) => {\n  if (!type) return defaultTypeConfig\n  return typeConfig[type as keyof typeof typeConfig] || defaultTypeConfig\n}\n\nconst getImportanceConfig = (importance: string | undefined | null) => {\n  if (!importance) return defaultImportanceConfig\n  return importanceConfig[importance as keyof typeof importanceConfig] || defaultImportanceConfig\n}\n\nconst getEvidenceConfig = (evidence: string | undefined | null) => {\n  if (!evidence) return defaultEvidenceConfig\n  return evidenceConfig[evidence as keyof typeof evidenceConfig] || defaultEvidenceConfig\n}\n\nconst getStatusConfigSafe = (status: string | undefined | null) => {\n  if (!status) return defaultStatusConfig\n  return statusConfig[status as keyof typeof statusConfig] || defaultStatusConfig\n}\n\ntype DbHypothesis = {\n  id: string\n  project_id: string\n  statement: string\n  type: Hypothesis['type']\n  importance: Hypothesis['importance']\n  evidence_strength: Hypothesis['evidence']\n  status: Hypothesis['status']\n  source: string | null\n  created_at: string\n  updated_at: string\n}\n\nfunction transformHypothesis(record: DbHypothesis): Hypothesis {\n  return {\n    id: record.id,\n    statement: record.statement,\n    type: record.type,\n    importance: record.importance,\n    evidence: record.evidence_strength,\n    status: record.status,\n    source: record.source ?? 'Unspecified',\n    createdAt: new Date(record.created_at),\n    updatedAt: new Date(record.updated_at)\n  }\n}\n\nexport default function HypothesisManager() {\n  const supabase = useMemo(() => createClient(), [])\n  const { projects, isLoading: projectsLoading, error: projectsError } = useProjects()\n  const activeProjectId = useMemo(() => projects[0]?.id ?? null, [projects])\n\n  const [hypotheses, setHypotheses] = useState<Hypothesis[]>([])\n  const [selectedType, setSelectedType] = useState<string>('all')\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false)\n  const [newHypothesis, setNewHypothesis] = useState({\n    statement: '',\n    type: 'desirable' as const,\n    importance: 'medium' as const,\n    source: ''\n  })\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Edit dialog state\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false)\n  const [editHypothesis, setEditHypothesis] = useState<Hypothesis | null>(null)\n\n  // Delete confirmation state\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false)\n  const [deleteHypothesis, setDeleteHypothesis] = useState<Hypothesis | null>(null)\n\n  const fetchHypotheses = useCallback(async () => {\n    if (!activeProjectId) {\n      setHypotheses([])\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      setIsLoading(true)\n      const { data, error: queryError } = await supabase\n        .from('hypotheses')\n        .select('*')\n        .eq('project_id', activeProjectId)\n        .order('created_at', { ascending: false })\n\n      if (queryError) throw queryError\n\n      const transformed = ((data as DbHypothesis[]) ?? []).map(transformHypothesis)\n      setHypotheses(transformed)\n      setError(null)\n    } catch (err) {\n      console.error('Error fetching hypotheses:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsLoading(false)\n    }\n  }, [activeProjectId, supabase])\n\n  useEffect(() => {\n    if (projectsLoading) return\n    fetchHypotheses()\n  }, [projectsLoading, fetchHypotheses])\n\n  const filteredHypotheses = useMemo(() => {\n    if (selectedType === 'all') return hypotheses\n    return hypotheses.filter(h => h.type === selectedType)\n  }, [selectedType, hypotheses])\n\n  const handleCreateHypothesis = useCallback(async () => {\n    if (!activeProjectId) return\n\n    try {\n      setIsSubmitting(true)\n      const { error: insertError } = await supabase\n        .from('hypotheses')\n        .insert({\n          project_id: activeProjectId,\n          statement: newHypothesis.statement,\n          type: newHypothesis.type,\n          importance: newHypothesis.importance,\n          evidence_strength: 'none',\n          status: 'untested',\n          source: newHypothesis.source || null\n        })\n\n      if (insertError) throw insertError\n\n      setNewHypothesis({ statement: '', type: 'desirable', importance: 'medium', source: '' })\n      setIsCreateDialogOpen(false)\n      setError(null)\n      await fetchHypotheses()\n    } catch (err) {\n      console.error('Error creating hypothesis:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }, [activeProjectId, fetchHypotheses, newHypothesis.importance, newHypothesis.source, newHypothesis.statement, newHypothesis.type, supabase])\n\n  const handleUpdateHypothesis = useCallback(async () => {\n    if (!activeProjectId || !editHypothesis) return\n\n    try {\n      setIsSubmitting(true)\n      const { error: updateError } = await supabase\n        .from('hypotheses')\n        .update({\n          statement: editHypothesis.statement,\n          type: editHypothesis.type,\n          importance: editHypothesis.importance,\n          evidence_strength: editHypothesis.evidence,\n          status: editHypothesis.status,\n          source: editHypothesis.source || null,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', editHypothesis.id)\n        .eq('project_id', activeProjectId)\n\n      if (updateError) throw updateError\n\n      setEditHypothesis(null)\n      setIsEditDialogOpen(false)\n      setError(null)\n      await fetchHypotheses()\n    } catch (err) {\n      console.error('Error updating hypothesis:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }, [activeProjectId, editHypothesis, fetchHypotheses, supabase])\n\n  const handleDeleteHypothesis = useCallback(async () => {\n    if (!activeProjectId || !deleteHypothesis) return\n\n    try {\n      setIsSubmitting(true)\n      // Delete is hard remove - experiments.hypothesis_id will be set to null\n      // via foreign key ON DELETE SET NULL constraint\n      const { error: deleteError } = await supabase\n        .from('hypotheses')\n        .delete()\n        .eq('id', deleteHypothesis.id)\n        .eq('project_id', activeProjectId)\n\n      if (deleteError) throw deleteError\n\n      setDeleteHypothesis(null)\n      setIsDeleteDialogOpen(false)\n      setError(null)\n      await fetchHypotheses()\n    } catch (err) {\n      console.error('Error deleting hypothesis:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }, [activeProjectId, deleteHypothesis, fetchHypotheses, supabase])\n\n  const openEditDialog = useCallback((hypothesis: Hypothesis) => {\n    setEditHypothesis({ ...hypothesis })\n    setIsEditDialogOpen(true)\n  }, [])\n\n  const openDeleteDialog = useCallback((hypothesis: Hypothesis) => {\n    setDeleteHypothesis(hypothesis)\n    setIsDeleteDialogOpen(true)\n  }, [])\n\n  // Prioritization Matrix Data\n  const getMatrixPosition = (hypothesis: Hypothesis) => {\n    const importanceScore = hypothesis.importance === 'high' ? 2 : hypothesis.importance === 'medium' ? 1 : 0\n    const evidenceScore = hypothesis.evidence === 'strong' ? 2 : hypothesis.evidence === 'weak' ? 1 : 0\n    return { importance: importanceScore, evidence: evidenceScore }\n  }\n\n  const matrixQuadrants = {\n    topRight: hypotheses.filter(h => {\n      const pos = getMatrixPosition(h)\n      return pos.importance >= 1 && pos.evidence <= 1\n    }),\n    topLeft: hypotheses.filter(h => {\n      const pos = getMatrixPosition(h)\n      return pos.importance >= 1 && pos.evidence >= 1\n    }),\n    bottomRight: hypotheses.filter(h => {\n      const pos = getMatrixPosition(h)\n      return pos.importance === 0 && pos.evidence <= 1\n    }),\n    bottomLeft: hypotheses.filter(h => {\n      const pos = getMatrixPosition(h)\n      return pos.importance === 0 && pos.evidence >= 1\n    })\n  }\n\n  if (projectsLoading) {\n    return (\n      <div className=\"rounded-lg border bg-card p-6 text-sm text-muted-foreground\">\n        Loading your projects\n      </div>\n    )\n  }\n\n  if (!activeProjectId) {\n    return (\n      <div className=\"rounded-lg border bg-card p-6 text-sm text-muted-foreground\">\n        Create a project to start capturing hypotheses.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Business Hypotheses</h2>\n          <p className=\"text-muted-foreground\">\n            Identify, prioritize, and validate your key business assumptions\n          </p>\n        </div>\n        <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Hypothesis\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Create New Hypothesis</DialogTitle>\n              <DialogDescription>\n                Create a testable, precise, and discrete business hypothesis\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"statement\">Hypothesis Statement</Label>\n                <Textarea\n                  id=\"statement\"\n                  placeholder=\"We believe that...\"\n                  value={newHypothesis.statement}\n                  onChange={(e) => setNewHypothesis({...newHypothesis, statement: e.target.value})}\n                  className=\"min-h-20\"\n                />\n              </div>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div>\n                  <Label htmlFor=\"type\">Type</Label>\n                  <Select value={newHypothesis.type} onValueChange={(value: any) => setNewHypothesis({...newHypothesis, type: value})}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"desirable\">Desirable</SelectItem>\n                      <SelectItem value=\"feasible\">Feasible</SelectItem>\n                      <SelectItem value=\"viable\">Viable</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"importance\">Importance</Label>\n                  <Select value={newHypothesis.importance} onValueChange={(value: any) => setNewHypothesis({...newHypothesis, importance: value})}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"high\">High</SelectItem>\n                      <SelectItem value=\"medium\">Medium</SelectItem>\n                      <SelectItem value=\"low\">Low</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"source\">Source</Label>\n                  <Select value={newHypothesis.source} onValueChange={(value) => setNewHypothesis({...newHypothesis, source: value})}>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select source\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Value Propositions\">Value Propositions</SelectItem>\n                      <SelectItem value=\"Customer Segments\">Customer Segments</SelectItem>\n                      <SelectItem value=\"Channels\">Channels</SelectItem>\n                      <SelectItem value=\"Customer Relationships\">Customer Relationships</SelectItem>\n                      <SelectItem value=\"Revenue Streams\">Revenue Streams</SelectItem>\n                      <SelectItem value=\"Key Resources\">Key Resources</SelectItem>\n                      <SelectItem value=\"Key Activities\">Key Activities</SelectItem>\n                      <SelectItem value=\"Key Partners\">Key Partners</SelectItem>\n                      <SelectItem value=\"Cost Structure\">Cost Structure</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleCreateHypothesis} disabled={!newHypothesis.statement.trim() || isSubmitting}>\n                Create Hypothesis\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {(projectsError || error) && (\n        <div role=\"alert\" className=\"rounded-lg border border-destructive/40 bg-destructive/10 p-4 text-sm text-destructive\">\n          {projectsError?.message || error}\n        </div>\n      )}\n\n      {/* Main Content */}\n      <Tabs defaultValue=\"list\" className=\"space-y-6\">\n        <TabsList>\n          <TabsTrigger value=\"list\">Hypothesis List</TabsTrigger>\n          <TabsTrigger value=\"matrix\">Prioritization Matrix</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"list\" className=\"space-y-6\">\n          {/* Type Filter */}\n          <div className=\"flex gap-2\">\n            <Button \n              variant={selectedType === 'all' ? 'default' : 'outline'} \n              size=\"sm\"\n              onClick={() => setSelectedType('all')}\n            >\n              All ({hypotheses.length})\n            </Button>\n            {Object.entries(typeConfig).map(([type, config]) => {\n              const count = hypotheses.filter(h => h.type === type).length\n              return (\n                <Button\n                  key={type}\n                  variant={selectedType === type ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setSelectedType(type)}\n                >\n                  <config.icon className=\"h-4 w-4 mr-1\" />\n                  {config.label} ({count})\n                </Button>\n              )\n            })}\n          </div>\n\n          {/* Hypothesis Cards */}\n          {isLoading ? (\n            <Card>\n              <CardContent className=\"p-6 text-sm text-muted-foreground\">\n                Loading hypotheses\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-4\">\n              {filteredHypotheses.map((hypothesis) => {\n                const typeInfo = getTypeConfig(hypothesis.type)\n                const statusInfo = getStatusConfigSafe(hypothesis.status)\n                const StatusIcon = statusInfo.icon\n\n                return (\n                  <Card key={hypothesis.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1 space-y-3\">\n                          <div className=\"flex items-center gap-2\">\n                            <Badge className={typeInfo.color}>\n                              <typeInfo.icon className=\"h-3 w-3 mr-1\" />\n                              {typeInfo.label}\n                            </Badge>\n                            <Badge className={getImportanceConfig(hypothesis.importance).color}>\n                              {getImportanceConfig(hypothesis.importance).label}\n                            </Badge>\n                            <Badge className={getEvidenceConfig(hypothesis.evidence).color}>\n                              {getEvidenceConfig(hypothesis.evidence).label}\n                            </Badge>\n                            <Badge className={statusInfo.color}>\n                              <StatusIcon className=\"h-3 w-3 mr-1\" />\n                              {statusInfo.label}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm leading-relaxed\">{hypothesis.statement}</p>\n                          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                            <span>Source: {hypothesis.source}</span>\n                            <span>Created: {hypothesis.createdAt.toLocaleDateString()}</span>\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => openEditDialog(hypothesis)}\n                          >\n                            <Pencil className=\"h-3 w-3 mr-1\" />\n                            Edit\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"text-destructive hover:text-destructive\"\n                            onClick={() => openDeleteDialog(hypothesis)}\n                          >\n                            <Trash2 className=\"h-3 w-3 mr-1\" />\n                            Delete\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )\n              })}\n              {!filteredHypotheses.length && (\n                <Card>\n                  <CardContent className=\"p-6 text-sm text-muted-foreground\">\n                    No hypotheses found for this filter.\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"matrix\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Assumptions Prioritization Matrix</CardTitle>\n              <CardDescription>\n                Focus on the top-right quadrant: important hypotheses with little evidence\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 gap-4 h-96\">\n                {/* Top Left - Share */}\n                <div className=\"border-2 border-green-200 bg-green-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"font-semibold text-green-900\">Share</h3>\n                    <Badge className=\"bg-green-100 text-green-800\">\n                      Important + Have Evidence\n                    </Badge>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {matrixQuadrants.topLeft.map(h => (\n                      <div key={h.id} className=\"p-2 bg-white rounded border text-xs\">\n                        {h.statement.substring(0, 80)}...\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Top Right - Experiment */}\n                <div className=\"border-2 border-red-200 bg-red-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"font-semibold text-red-900\">Experiment</h3>\n                    <Badge className=\"bg-red-100 text-red-800\">\n                      Important + No Evidence\n                    </Badge>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {matrixQuadrants.topRight.map(h => (\n                      <div key={h.id} className=\"p-2 bg-white rounded border text-xs border-red-200\">\n                        <div className=\"flex items-center gap-1 mb-1\">\n                          <AlertTriangle className=\"h-3 w-3 text-red-600\" />\n                          <span className=\"font-medium\">Priority</span>\n                        </div>\n                        {h.statement.substring(0, 80)}...\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Bottom Left */}\n                <div className=\"border-2 border-gray-200 bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"font-semibold text-gray-700\">Monitor</h3>\n                    <Badge className=\"bg-gray-100 text-gray-800\">\n                      Less Important + Have Evidence\n                    </Badge>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {matrixQuadrants.bottomLeft.map(h => (\n                      <div key={h.id} className=\"p-2 bg-white rounded border text-xs\">\n                        {h.statement.substring(0, 80)}...\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Bottom Right */}\n                <div className=\"border-2 border-orange-200 bg-orange-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"font-semibold text-orange-900\">Consider</h3>\n                    <Badge className=\"bg-orange-100 text-orange-800\">\n                      Less Important + No Evidence\n                    </Badge>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {matrixQuadrants.bottomRight.map(h => (\n                      <div key={h.id} className=\"p-2 bg-white rounded border text-xs\">\n                        {h.statement.substring(0, 80)}...\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n              \n              {/* Matrix Labels */}\n              <div className=\"mt-4 flex justify-center\">\n                <div className=\"text-center\">\n                  <div className=\"text-sm font-medium mb-2\">Evidence Level</div>\n                  <div className=\"flex items-center gap-8\">\n                    <span className=\"text-sm text-muted-foreground\">Have Evidence</span>\n                    <span className=\"text-sm text-muted-foreground\">No Evidence</span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"absolute left-4 top-1/2 -translate-y-1/2 -rotate-90\">\n                <div className=\"text-sm font-medium mb-2\">Importance</div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"analytics\" className=\"space-y-6\">\n          <div className=\"grid gap-6 md:grid-cols-3\">\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Total Hypotheses</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{hypotheses.length}</div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Across all business areas\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">High Priority</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {matrixQuadrants.topRight.length}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Need immediate testing\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Validation Rate</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {Math.round((hypotheses.filter(h => h.status === 'validated').length / hypotheses.length) * 100)}%\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Hypotheses validated\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* Edit Hypothesis Dialog */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Edit Hypothesis</DialogTitle>\n            <DialogDescription>\n              Update your hypothesis statement and attributes\n            </DialogDescription>\n          </DialogHeader>\n          {editHypothesis && (\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"edit-statement\">Hypothesis Statement</Label>\n                <Textarea\n                  id=\"edit-statement\"\n                  placeholder=\"We believe that...\"\n                  value={editHypothesis.statement}\n                  onChange={(e) => setEditHypothesis({...editHypothesis, statement: e.target.value})}\n                  className=\"min-h-20\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"edit-type\">Type</Label>\n                  <Select\n                    value={editHypothesis.type}\n                    onValueChange={(value: Hypothesis['type']) => setEditHypothesis({...editHypothesis, type: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"desirable\">Desirable</SelectItem>\n                      <SelectItem value=\"feasible\">Feasible</SelectItem>\n                      <SelectItem value=\"viable\">Viable</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"edit-importance\">Importance</Label>\n                  <Select\n                    value={editHypothesis.importance}\n                    onValueChange={(value: Hypothesis['importance']) => setEditHypothesis({...editHypothesis, importance: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"high\">High</SelectItem>\n                      <SelectItem value=\"medium\">Medium</SelectItem>\n                      <SelectItem value=\"low\">Low</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"edit-status\">Status</Label>\n                  <Select\n                    value={editHypothesis.status}\n                    onValueChange={(value: Hypothesis['status']) => setEditHypothesis({...editHypothesis, status: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"untested\">Untested</SelectItem>\n                      <SelectItem value=\"testing\">Testing</SelectItem>\n                      <SelectItem value=\"validated\">Validated</SelectItem>\n                      <SelectItem value=\"invalidated\">Invalidated</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"edit-evidence\">Evidence Strength</Label>\n                  <Select\n                    value={editHypothesis.evidence}\n                    onValueChange={(value: Hypothesis['evidence']) => setEditHypothesis({...editHypothesis, evidence: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"none\">No Evidence</SelectItem>\n                      <SelectItem value=\"weak\">Weak</SelectItem>\n                      <SelectItem value=\"medium\">Moderate</SelectItem>\n                      <SelectItem value=\"strong\">Strong</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              <div>\n                <Label htmlFor=\"edit-source\">Source</Label>\n                <Select\n                  value={editHypothesis.source}\n                  onValueChange={(value) => setEditHypothesis({...editHypothesis, source: value})}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select source\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Value Propositions\">Value Propositions</SelectItem>\n                    <SelectItem value=\"Customer Segments\">Customer Segments</SelectItem>\n                    <SelectItem value=\"Channels\">Channels</SelectItem>\n                    <SelectItem value=\"Customer Relationships\">Customer Relationships</SelectItem>\n                    <SelectItem value=\"Revenue Streams\">Revenue Streams</SelectItem>\n                    <SelectItem value=\"Key Resources\">Key Resources</SelectItem>\n                    <SelectItem value=\"Key Activities\">Key Activities</SelectItem>\n                    <SelectItem value=\"Key Partners\">Key Partners</SelectItem>\n                    <SelectItem value=\"Cost Structure\">Cost Structure</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          )}\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsEditDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button onClick={handleUpdateHypothesis} disabled={!editHypothesis?.statement.trim() || isSubmitting}>\n              {isSubmitting ? 'Saving...' : 'Save Changes'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Hypothesis</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this hypothesis? This action cannot be undone.\n              Any linked experiments will be unlinked but not deleted.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          {deleteHypothesis && (\n            <div className=\"my-4 p-3 bg-muted rounded-lg text-sm\">\n              <p className=\"font-medium mb-1\">\"{deleteHypothesis.statement}\"</p>\n              <p className=\"text-muted-foreground text-xs\">\n                Type: {getTypeConfig(deleteHypothesis.type).label} |\n                Status: {getStatusConfigSafe(deleteHypothesis.status).label}\n              </p>\n            </div>\n          )}\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDeleteHypothesis}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              disabled={isSubmitting}\n            >\n              {isSubmitting ? 'Deleting...' : 'Delete'}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/FieldMappingEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/ImportDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/ImportableItemsList.tsx","messages":[{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":50,"column":10,"nodeType":"JSXOpeningElement","endLine":50,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Importable Items List Component\n *\n * Displays a selectable list of items from an external integration\n * that can be imported into StartupAI.\n *\n * @story US-BI01\n */\n\n'use client';\n\nimport { useState } from 'react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Badge } from '@/components/ui/badge';\nimport { cn } from '@/lib/utils';\nimport {\n  FileText,\n  Table,\n  Database,\n  File,\n  Image,\n  Presentation,\n} from 'lucide-react';\n\nexport interface ImportableItem {\n  id: string;\n  name: string;\n  type: string;\n  url?: string;\n  lastModified?: string;\n  metadata?: Record<string, unknown>;\n}\n\ninterface ImportableItemsListProps {\n  items: ImportableItem[];\n  selectedIds: string[];\n  onSelectionChange: (ids: string[]) => void;\n  loading?: boolean;\n  maxHeight?: string;\n}\n\nconst typeIcons: Record<string, React.ReactNode> = {\n  document: <FileText className=\"h-4 w-4\" />,\n  page: <FileText className=\"h-4 w-4\" />,\n  spreadsheet: <Table className=\"h-4 w-4\" />,\n  database: <Database className=\"h-4 w-4\" />,\n  table: <Table className=\"h-4 w-4\" />,\n  presentation: <Presentation className=\"h-4 w-4\" />,\n  image: <Image className=\"h-4 w-4\" />,\n  file: <File className=\"h-4 w-4\" />,\n};\n\nexport function ImportableItemsList({\n  items,\n  selectedIds,\n  onSelectionChange,\n  loading = false,\n  maxHeight = '400px',\n}: ImportableItemsListProps) {\n  const [selectAll, setSelectAll] = useState(false);\n\n  const handleSelectAll = (checked: boolean) => {\n    setSelectAll(checked);\n    if (checked) {\n      onSelectionChange(items.map((item) => item.id));\n    } else {\n      onSelectionChange([]);\n    }\n  };\n\n  const handleItemToggle = (itemId: string, checked: boolean) => {\n    if (checked) {\n      onSelectionChange([...selectedIds, itemId]);\n    } else {\n      onSelectionChange(selectedIds.filter((id) => id !== itemId));\n      setSelectAll(false);\n    }\n  };\n\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return null;\n    try {\n      return new Date(dateString).toLocaleDateString(undefined, {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n      });\n    } catch {\n      return null;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\n      </div>\n    );\n  }\n\n  if (items.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-8 text-muted-foreground\">\n        <File className=\"h-12 w-12 mb-2 opacity-50\" />\n        <p>No importable items found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center gap-2 px-2 py-1 border-b\">\n        <Checkbox\n          id=\"select-all\"\n          checked={selectAll || selectedIds.length === items.length}\n          onCheckedChange={handleSelectAll}\n        />\n        <label\n          htmlFor=\"select-all\"\n          className=\"text-sm font-medium cursor-pointer\"\n        >\n          Select all ({items.length} items)\n        </label>\n        {selectedIds.length > 0 && (\n          <Badge variant=\"secondary\" className=\"ml-auto\">\n            {selectedIds.length} selected\n          </Badge>\n        )}\n      </div>\n\n      <ScrollArea style={{ maxHeight }} className=\"pr-4\">\n        <div className=\"space-y-1\">\n          {items.map((item) => {\n            const isSelected = selectedIds.includes(item.id);\n            const icon = typeIcons[item.type] || typeIcons.file;\n            const modifiedDate = formatDate(item.lastModified);\n\n            return (\n              <div\n                key={item.id}\n                className={cn(\n                  'flex items-center gap-3 px-2 py-2 rounded-md cursor-pointer transition-colors',\n                  isSelected\n                    ? 'bg-primary/10 border border-primary/20'\n                    : 'hover:bg-muted/50'\n                )}\n                onClick={() => handleItemToggle(item.id, !isSelected)}\n              >\n                <Checkbox\n                  checked={isSelected}\n                  onCheckedChange={(checked) =>\n                    handleItemToggle(item.id, checked as boolean)\n                  }\n                  onClick={(e) => e.stopPropagation()}\n                />\n\n                <div className=\"flex items-center gap-2 text-muted-foreground\">\n                  {icon}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium truncate\">{item.name}</p>\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {item.type}\n                    </Badge>\n                    {modifiedDate && <span>Modified {modifiedDate}</span>}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/SourceFieldsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/TargetFieldsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/imports/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/layout/AppSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/layout/DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/legacy/brief/BriefSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/legacy/forms/IntakeForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/legacy/forms/__tests__/IntakeForm.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/legacy/onboarding/StageReviewModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/legacy/onboarding/__tests__/StageReviewModal.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/ClientOnboardingWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/FoundersBriefReview.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":169,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4798,4818],"text":"Your Founder&apos;s Brief"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4798,4818],"text":"Your Founder&lsquo;s Brief"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4798,4818],"text":"Your Founder&#39;s Brief"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4798,4818],"text":"Your Founder&rsquo;s Brief"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":217,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7126,7152],"text":"THE PROBLEM YOU&apos;RE SOLVING"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7126,7152],"text":"THE PROBLEM YOU&lsquo;RE SOLVING"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7126,7152],"text":"THE PROBLEM YOU&#39;RE SOLVING"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7126,7152],"text":"THE PROBLEM YOU&rsquo;RE SOLVING"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":264,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9427,9450],"text":"WHO YOU&apos;RE BUILDING FOR"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9427,9450],"text":"WHO YOU&lsquo;RE BUILDING FOR"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9427,9450],"text":"WHO YOU&#39;RE BUILDING FOR"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9427,9450],"text":"WHO YOU&rsquo;RE BUILDING FOR"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":358,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13865,13891],"text":"KEY ASSUMPTIONS WE&apos;LL TEST"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13865,13891],"text":"KEY ASSUMPTIONS WE&lsquo;LL TEST"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13865,13891],"text":"KEY ASSUMPTIONS WE&#39;LL TEST"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13865,13891],"text":"KEY ASSUMPTIONS WE&rsquo;LL TEST"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":364,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[14103,14196],"text":"\n                These are the assumptions we&apos;ll validate through experiments:\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[14103,14196],"text":"\n                These are the assumptions we&lsquo;ll validate through experiments:\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[14103,14196],"text":"\n                These are the assumptions we&#39;ll validate through experiments:\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[14103,14196],"text":"\n                These are the assumptions we&rsquo;ll validate through experiments:\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * FoundersBriefReview Component\n *\n * Displays the Founder's Brief for HITL approval during the approve_brief checkpoint (Phase 1 Stage A).\n * Shows 6 sections per master-architecture specification:\n * 1. THE IDEA\n * 2. THE PROBLEM YOU'RE SOLVING\n * 3. WHO YOU'RE BUILDING FOR\n * 4. YOUR PROPOSED SOLUTION\n * 5. KEY ASSUMPTIONS WE'LL TEST\n * 6. YOUR SUCCESS CRITERIA\n *\n * Note: This component is also reused for approve_discovery_output checkpoint (Phase 1 Stage B)\n * to show the complete VPC discovery results.\n *\n * @story US-H01, US-F01\n */\n\nimport { useState } from 'react';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  Lightbulb,\n  AlertTriangle,\n  Users,\n  Target,\n  ListChecks,\n  Trophy,\n  CheckCircle2,\n  Loader2,\n} from 'lucide-react';\n\n// EntrepreneurBrief type (matches database schema)\nexport interface EntrepreneurBrief {\n  id: string;\n  session_id: string;\n  user_id: string;\n\n  // Customer segments\n  customer_segments: string[];\n  primary_customer_segment: string | null;\n  customer_segment_confidence: number;\n\n  // Problem definition\n  problem_description: string;\n  problem_pain_level: number;\n  problem_frequency: string;\n  problem_impact: Record<string, unknown>;\n  problem_evidence: string[];\n\n  // Solution concept\n  solution_description: string;\n  solution_mechanism: string;\n  unique_value_proposition: string;\n  differentiation_factors: string[];\n  solution_confidence: number;\n\n  // Competitive landscape\n  competitors: string[];\n  competitive_alternatives: string[];\n  switching_barriers: string[];\n  competitive_advantages: string[];\n\n  // Resources and constraints\n  budget_range: string;\n  budget_constraints: Record<string, unknown>;\n  available_channels: string[];\n  existing_assets: string[];\n  team_capabilities: string[];\n  time_constraints: Record<string, unknown>;\n\n  // Business stage and goals\n  business_stage: string;\n  three_month_goals: string[];\n  six_month_goals: string[];\n  success_criteria: string[];\n  key_metrics: string[];\n\n  // Quality metrics\n  completeness_score: number;\n  clarity_score: number;\n  consistency_score: number;\n  overall_quality_score: number;\n\n  // AI analysis metadata\n  ai_confidence_scores: Record<string, number>;\n  validation_flags: string[];\n  recommended_next_steps: string[];\n\n  created_at: string;\n  updated_at: string;\n}\n\ninterface FoundersBriefReviewProps {\n  briefData: Partial<EntrepreneurBrief>;\n  approvalId?: string;\n  runId: string;\n  onApprove: () => Promise<void>;\n  onRequestChanges: (feedback: string) => Promise<void>;\n  isApproving?: boolean;\n}\n\nexport function FoundersBriefReview({\n  briefData,\n  approvalId,\n  runId,\n  onApprove,\n  onRequestChanges,\n  isApproving = false,\n}: FoundersBriefReviewProps) {\n  const [confirmed, setConfirmed] = useState(false);\n  const [showFeedbackDialog, setShowFeedbackDialog] = useState(false);\n  const [feedback, setFeedback] = useState('');\n  const [isSubmittingChanges, setIsSubmittingChanges] = useState(false);\n\n  const handleRequestChanges = async () => {\n    if (!feedback.trim()) return;\n    setIsSubmittingChanges(true);\n    try {\n      await onRequestChanges(feedback);\n    } finally {\n      setIsSubmittingChanges(false);\n      setShowFeedbackDialog(false);\n    }\n  };\n\n  // Extract key assumptions from validation_flags and other data\n  // Filter out undefined/empty values to avoid rendering \"undefined...\"\n  const keyAssumptions = [\n    ...(briefData.validation_flags || []),\n    // Only include problem assumption if we have a description\n    ...(briefData.problem_description\n      ? [`Customers experience \"${briefData.problem_description.slice(0, 50)}${briefData.problem_description.length > 50 ? '...' : ''}\" frequently`]\n      : []),\n    // Only include segment assumption if we have a segment\n    ...(briefData.primary_customer_segment\n      ? [`\"${briefData.primary_customer_segment}\" will pay for this solution`]\n      : []),\n    // Map differentiation factors if available\n    ...(briefData.differentiation_factors || [])\n      .filter(f => f) // Filter out empty strings\n      .map(f => `Our \"${f}\" is a real differentiator`),\n  ]\n    .filter(a => a && a.trim()) // Filter out empty/whitespace-only assumptions\n    .slice(0, 5);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"text-center space-y-2 pb-4 border-b\">\n        <h2 className=\"text-2xl font-semibold\">Your Founder's Brief</h2>\n        <p className=\"text-muted-foreground\">\n          Please review this summary of your idea. We want to make sure we\n          understood you correctly before we begin validation.\n        </p>\n      </div>\n\n      {/* 6 Sections - Accordion */}\n      <Accordion type=\"multiple\" defaultValue={['the-idea', 'the-problem', 'who-for', 'solution', 'assumptions', 'success']} className=\"space-y-2\">\n        {/* Section 1: THE IDEA */}\n        <AccordionItem value=\"the-idea\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <Lightbulb className=\"h-5 w-5 text-yellow-500\" />\n              <span className=\"font-medium\">THE IDEA</span>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-3\">\n              {briefData.unique_value_proposition && (\n                <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg\">\n                  <p className=\"text-sm font-medium text-blue-700 dark:text-blue-300 mb-1\">\n                    One-Liner\n                  </p>\n                  <p className=\"text-base\">{briefData.unique_value_proposition}</p>\n                </div>\n              )}\n              {briefData.solution_description && (\n                <div>\n                  <p className=\"text-sm text-muted-foreground mb-1\">Description</p>\n                  <p className=\"text-sm\">{briefData.solution_description}</p>\n                </div>\n              )}\n              {briefData.business_stage && (\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm text-muted-foreground\">Stage:</span>\n                  <Badge variant=\"outline\" className=\"capitalize\">{briefData.business_stage}</Badge>\n                </div>\n              )}\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Section 2: THE PROBLEM */}\n        <AccordionItem value=\"the-problem\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n              <span className=\"font-medium\">THE PROBLEM YOU'RE SOLVING</span>\n              <Badge variant=\"secondary\" className=\"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200\">\n                HYPOTHESIS\n              </Badge>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-3\">\n              <p className=\"text-sm\">{briefData.problem_description || 'Problem description not captured'}</p>\n              {briefData.problem_pain_level && (\n                <div className=\"flex items-center gap-4\">\n                  <div>\n                    <span className=\"text-sm text-muted-foreground\">Pain Level: </span>\n                    <Badge variant={briefData.problem_pain_level >= 7 ? 'destructive' : 'secondary'}>\n                      {briefData.problem_pain_level}/10\n                    </Badge>\n                  </div>\n                  {briefData.problem_frequency && (\n                    <div>\n                      <span className=\"text-sm text-muted-foreground\">Frequency: </span>\n                      <span className=\"text-sm capitalize\">{briefData.problem_frequency}</span>\n                    </div>\n                  )}\n                </div>\n              )}\n              {briefData.problem_evidence && briefData.problem_evidence.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-2\">Evidence</p>\n                  <ul className=\"space-y-1\">\n                    {briefData.problem_evidence.slice(0, 3).map((evidence, i) => (\n                      <li key={i} className=\"text-sm flex items-start gap-2\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                        {evidence}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Section 3: WHO YOU'RE BUILDING FOR */}\n        <AccordionItem value=\"who-for\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <Users className=\"h-5 w-5 text-purple-500\" />\n              <span className=\"font-medium\">WHO YOU'RE BUILDING FOR</span>\n              <Badge variant=\"secondary\" className=\"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200\">\n                HYPOTHESIS\n              </Badge>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-3\">\n              {briefData.primary_customer_segment && (\n                <div className=\"bg-purple-50 dark:bg-purple-950 p-3 rounded-lg\">\n                  <p className=\"text-sm font-medium text-purple-700 dark:text-purple-300 mb-1\">\n                    Primary Segment\n                  </p>\n                  <p className=\"text-base\">{briefData.primary_customer_segment}</p>\n                </div>\n              )}\n              {briefData.customer_segments && briefData.customer_segments.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-2\">All Segments</p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {briefData.customer_segments.map((segment, i) => (\n                      <Badge\n                        key={i}\n                        variant={segment === briefData.primary_customer_segment ? 'default' : 'outline'}\n                      >\n                        {segment}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {briefData.customer_segment_confidence && (\n                <p className=\"text-xs text-muted-foreground\">\n                  Confidence: {briefData.customer_segment_confidence}%\n                </p>\n              )}\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Section 4: YOUR PROPOSED SOLUTION */}\n        <AccordionItem value=\"solution\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <Target className=\"h-5 w-5 text-blue-500\" />\n              <span className=\"font-medium\">YOUR PROPOSED SOLUTION</span>\n              <Badge variant=\"secondary\" className=\"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200\">\n                HYPOTHESIS\n              </Badge>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-3\">\n              <p className=\"text-sm\">{briefData.solution_description || 'Solution description not captured'}</p>\n              {briefData.solution_mechanism && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-1\">How It Works</p>\n                  <p className=\"text-sm\">{briefData.solution_mechanism}</p>\n                </div>\n              )}\n              {briefData.differentiation_factors && briefData.differentiation_factors.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-2\">Differentiators</p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {briefData.differentiation_factors.map((factor, i) => (\n                      <Badge key={i} variant=\"outline\">\n                        {factor}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n              {briefData.competitive_advantages && briefData.competitive_advantages.length > 0 && (\n                <div>\n                  <p className=\"text-xs text-muted-foreground mb-2\">Competitive Advantages</p>\n                  <ul className=\"space-y-1\">\n                    {briefData.competitive_advantages.map((advantage, i) => (\n                      <li key={i} className=\"text-sm flex items-start gap-2\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                        {advantage}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Section 5: KEY ASSUMPTIONS */}\n        <AccordionItem value=\"assumptions\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <ListChecks className=\"h-5 w-5 text-orange-500\" />\n              <span className=\"font-medium\">KEY ASSUMPTIONS WE'LL TEST</span>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-2\">\n              <p className=\"text-sm text-muted-foreground mb-3\">\n                These are the assumptions we'll validate through experiments:\n              </p>\n              <ol className=\"space-y-2\">\n                {keyAssumptions.map((assumption, i) => (\n                  <li key={i} className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 text-xs font-medium flex items-center justify-center\">\n                      {i + 1}\n                    </span>\n                    <span className=\"text-sm\">{assumption}</span>\n                  </li>\n                ))}\n              </ol>\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n\n        {/* Section 6: SUCCESS CRITERIA */}\n        <AccordionItem value=\"success\" className=\"border rounded-lg px-4\">\n          <AccordionTrigger className=\"hover:no-underline\">\n            <div className=\"flex items-center gap-3\">\n              <Trophy className=\"h-5 w-5 text-yellow-500\" />\n              <span className=\"font-medium\">YOUR SUCCESS CRITERIA</span>\n            </div>\n          </AccordionTrigger>\n          <AccordionContent className=\"pt-2 pb-4\">\n            <div className=\"space-y-3\">\n              <p className=\"text-sm text-muted-foreground\">\n                What would make this worth pursuing:\n              </p>\n              {briefData.success_criteria && briefData.success_criteria.length > 0 ? (\n                <ul className=\"space-y-2\">\n                  {briefData.success_criteria.map((criteria, i) => (\n                    <li key={i} className=\"text-sm flex items-start gap-2\">\n                      <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                      {criteria}\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <p className=\"text-sm italic text-muted-foreground\">\n                  Success criteria will be defined based on validation results.\n                </p>\n              )}\n              {briefData.three_month_goals && briefData.three_month_goals.length > 0 && (\n                <div className=\"mt-4\">\n                  <p className=\"text-xs text-muted-foreground mb-2\">3-Month Goals</p>\n                  <ul className=\"space-y-1\">\n                    {briefData.three_month_goals.slice(0, 3).map((goal, i) => (\n                      <li key={i} className=\"text-sm flex items-start gap-2\">\n                        <Target className=\"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0\" />\n                        {goal}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              {briefData.key_metrics && briefData.key_metrics.length > 0 && (\n                <div className=\"mt-4\">\n                  <p className=\"text-xs text-muted-foreground mb-2\">Key Metrics to Track</p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {briefData.key_metrics.map((metric, i) => (\n                      <Badge key={i} variant=\"outline\">\n                        {metric}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </AccordionContent>\n        </AccordionItem>\n      </Accordion>\n\n      {/* Confirmation Checkbox */}\n      <div className=\"border-t pt-6\">\n        <label className=\"flex items-start gap-3 cursor-pointer\">\n          <Checkbox\n            id=\"confirm\"\n            checked={confirmed}\n            onCheckedChange={(checked) => setConfirmed(checked === true)}\n            className=\"mt-0.5\"\n          />\n          <div>\n            <span className=\"text-sm font-medium\">This captures my idea correctly</span>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              By approving, you confirm that this brief accurately represents your business concept.\n              The AI team will use this as the foundation for validation analysis.\n            </p>\n          </div>\n        </label>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex gap-4 justify-center pt-4\">\n        <Button\n          variant=\"outline\"\n          onClick={() => setShowFeedbackDialog(true)}\n          disabled={isApproving}\n        >\n          Request Changes\n        </Button>\n        <Button\n          onClick={onApprove}\n          disabled={!confirmed || isApproving}\n          className=\"min-w-[180px]\"\n        >\n          {isApproving ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Approving...\n            </>\n          ) : (\n            <>\n              <CheckCircle2 className=\"mr-2 h-4 w-4\" />\n              Approve & Continue\n            </>\n          )}\n        </Button>\n      </div>\n\n      {/* Request Changes Dialog */}\n      <Dialog open={showFeedbackDialog} onOpenChange={setShowFeedbackDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Request Changes</DialogTitle>\n            <DialogDescription>\n              Please describe what needs to be corrected in the brief.\n              Our team will review your feedback and help make adjustments.\n            </DialogDescription>\n          </DialogHeader>\n          <Textarea\n            placeholder=\"Describe what was captured incorrectly or what needs to be added...\"\n            value={feedback}\n            onChange={(e) => setFeedback(e.target.value)}\n            rows={4}\n          />\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowFeedbackDialog(false)}\n              disabled={isSubmittingChanges}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleRequestChanges}\n              disabled={!feedback.trim() || isSubmittingChanges}\n            >\n              {isSubmittingChanges ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Submitting...\n                </>\n              ) : (\n                'Submit Feedback'\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/IntegrationSelector.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":1,"message":"Error: Cannot access variable before it is declared\n\n`processNextInQueue` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/IntegrationSelector.tsx:177:9\n  175 |         // Process next in queue\n  176 |         setCurrentlyConnecting(null);\n> 177 |         processNextInQueue();\n      |         ^^^^^^^^^^^^^^^^^^ `processNextInQueue` accessed before it is declared\n  178 |       }\n  179 |     };\n  180 |\n\n/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/IntegrationSelector.tsx:186:3\n  184 |\n  185 |   // Process connection queue\n> 186 |   const processNextInQueue = useCallback(() => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 187 |     setConnectingQueue((queue) => {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 188 |       if (queue.length === 0) {\n      \n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 204 |     });\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 205 |   }, [connect]);\n      | ^^^^^^^^^^^^^^^^^ `processNextInQueue` is declared here\n  206 |\n  207 |   // Update progress\n  208 |   useEffect(() => {","line":177,"column":9,"nodeType":null,"endLine":177,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'processNextInQueue'. Either include it or remove the dependency array.","line":183,"column":6,"nodeType":"ArrayExpression","endLine":183,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [processNextInQueue]","fix":{"range":[5563,5565],"text":"[processNextInQueue]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\n/**\n * Integration Selector Component\n *\n * Allows users to optionally connect external services during onboarding.\n * Shows integrations grouped by category with multi-select capability.\n *\n * @story US-BI04, US-BI05, US-I01\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  MessageSquare,\n  Bird,\n  FileText,\n  HardDrive,\n  Box,\n  CheckSquare,\n  Table,\n  Target,\n  Palette,\n  Github,\n  Loader2,\n  CheckCircle,\n  ArrowRight,\n  Globe,\n  Sparkles,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useIntegrations } from '@/hooks/useIntegrations';\nimport {\n  INTEGRATIONS,\n  INTEGRATION_CATEGORIES,\n  CATEGORY_ORDER,\n  getIntegrationsByCategory,\n} from '@/lib/integrations/config';\nimport type { IntegrationConfig, IntegrationType } from '@/types/integrations';\n\n// Map icon names to Lucide components\nconst ICON_MAP: Record<string, React.ComponentType<{ className?: string; style?: React.CSSProperties }>> = {\n  MessageSquare,\n  Bird,\n  FileText,\n  HardDrive,\n  Box,\n  CheckSquare,\n  Table,\n  Target,\n  Palette,\n  Github,\n};\n\ninterface IntegrationSelectorProps {\n  /** Project ID to associate with integrations */\n  projectId?: string;\n  /** Callback when user completes or skips integration selection */\n  onComplete: (selectedTypes: IntegrationType[]) => void;\n  /** Show skip button (default: true) */\n  showSkip?: boolean;\n  /** Custom skip button text */\n  skipText?: string;\n  /** Custom continue button text */\n  continueText?: string;\n}\n\n/**\n * Selectable integration card with checkbox\n */\nfunction SelectableIntegrationCard({\n  config,\n  isSelected,\n  isConnected,\n  onToggle,\n}: {\n  config: IntegrationConfig;\n  isSelected: boolean;\n  isConnected: boolean;\n  onToggle: () => void;\n}) {\n  const IconComponent = ICON_MAP[config.fallbackIcon] || MessageSquare;\n\n  return (\n    <div\n      className={`\n        relative flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all\n        ${isSelected ? 'border-primary bg-primary/5 ring-1 ring-primary' : 'border-gray-200 hover:border-gray-300'}\n        ${isConnected ? 'opacity-60' : ''}\n      `}\n      onClick={() => !isConnected && onToggle()}\n    >\n      <Checkbox\n        checked={isSelected || isConnected}\n        onCheckedChange={() => !isConnected && onToggle()}\n        disabled={isConnected}\n        className=\"shrink-0\"\n      />\n\n      <div\n        className=\"w-8 h-8 shrink-0 rounded-md flex items-center justify-center\"\n        style={{ backgroundColor: `${config.color}15` }}\n      >\n        <IconComponent className=\"h-4 w-4\" style={{ color: config.color }} />\n      </div>\n\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-medium text-sm\">{config.name}</span>\n          {isConnected && (\n            <Badge variant=\"secondary\" className=\"bg-green-100 text-green-700 text-xs\">\n              <CheckCircle className=\"mr-1 h-3 w-3\" />\n              Connected\n            </Badge>\n          )}\n        </div>\n        <p className=\"text-xs text-muted-foreground truncate\">{config.description}</p>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Integration selector for onboarding flow\n */\nexport function IntegrationSelector({\n  projectId,\n  onComplete,\n  showSkip = true,\n  skipText = 'Skip for now',\n  continueText = 'Connect Selected',\n}: IntegrationSelectorProps) {\n  const router = useRouter();\n  const { integrations, isLoading, connect, getIntegration } = useIntegrations();\n\n  const [selectedTypes, setSelectedTypes] = useState<Set<IntegrationType>>(new Set());\n  const [connectingQueue, setConnectingQueue] = useState<IntegrationType[]>([]);\n  const [currentlyConnecting, setCurrentlyConnecting] = useState<IntegrationType | null>(null);\n  const [connectedTypes, setConnectedTypes] = useState<Set<IntegrationType>>(new Set());\n  const [connectionProgress, setConnectionProgress] = useState(0);\n\n  const isConnecting = connectingQueue.length > 0 || currentlyConnecting !== null;\n\n  // Initialize connected types from existing integrations\n  useEffect(() => {\n    if (integrations) {\n      const connected = new Set<IntegrationType>();\n      for (const integration of integrations) {\n        if (integration.status === 'active') {\n          connected.add(integration.integrationType as IntegrationType);\n        }\n      }\n      setConnectedTypes(connected);\n    }\n  }, [integrations]);\n\n  // Listen for OAuth callback messages\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      if (event.data?.type === 'oauth_callback') {\n        const integrationType = event.data.integrationType as IntegrationType;\n\n        if (event.data.success) {\n          setConnectedTypes((prev) => new Set([...prev, integrationType]));\n          toast.success(`Connected to ${INTEGRATIONS.find((i) => i.type === integrationType)?.name}`);\n        } else {\n          toast.error(`Failed to connect: ${event.data.error || 'Unknown error'}`);\n        }\n\n        // Process next in queue\n        setCurrentlyConnecting(null);\n        processNextInQueue();\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  // Process connection queue\n  const processNextInQueue = useCallback(() => {\n    setConnectingQueue((queue) => {\n      if (queue.length === 0) {\n        setCurrentlyConnecting(null);\n        return queue;\n      }\n\n      const [next, ...rest] = queue;\n      setCurrentlyConnecting(next);\n\n      // Start OAuth flow for next integration\n      connect(next).catch((err) => {\n        toast.error(`Failed to connect: ${err instanceof Error ? err.message : 'Unknown error'}`);\n        setCurrentlyConnecting(null);\n        processNextInQueue();\n      });\n\n      return rest;\n    });\n  }, [connect]);\n\n  // Update progress\n  useEffect(() => {\n    if (selectedTypes.size === 0) {\n      setConnectionProgress(0);\n      return;\n    }\n\n    const total = selectedTypes.size;\n    const completed = [...selectedTypes].filter((t) => connectedTypes.has(t)).length;\n    setConnectionProgress(Math.round((completed / total) * 100));\n  }, [selectedTypes, connectedTypes]);\n\n  // Toggle integration selection\n  const toggleSelection = (type: IntegrationType) => {\n    setSelectedTypes((prev) => {\n      const next = new Set(prev);\n      if (next.has(type)) {\n        next.delete(type);\n      } else {\n        next.add(type);\n      }\n      return next;\n    });\n  };\n\n  // Start connecting selected integrations\n  const handleConnect = async () => {\n    const toConnect = [...selectedTypes].filter((t) => !connectedTypes.has(t));\n\n    if (toConnect.length === 0) {\n      // All selected already connected, proceed\n      onComplete([...selectedTypes]);\n      return;\n    }\n\n    // Queue up connections\n    setConnectingQueue(toConnect);\n    processNextInQueue();\n  };\n\n  // Skip integration selection\n  const handleSkip = () => {\n    onComplete([]);\n  };\n\n  // Check if all selected are now connected\n  useEffect(() => {\n    if (selectedTypes.size > 0 && !isConnecting) {\n      const allConnected = [...selectedTypes].every((t) => connectedTypes.has(t));\n      if (allConnected && connectionProgress === 100) {\n        // Small delay to show completion\n        const timer = setTimeout(() => {\n          onComplete([...selectedTypes]);\n        }, 1000);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [selectedTypes, connectedTypes, isConnecting, connectionProgress, onComplete]);\n\n  const integrationsByCategory = getIntegrationsByCategory();\n  const selectedCount = selectedTypes.size;\n  const notConnectedCount = [...selectedTypes].filter((t) => !connectedTypes.has(t)).length;\n\n  if (isLoading) {\n    return (\n      <Card className=\"w-full max-w-2xl mx-auto\">\n        <CardContent className=\"flex items-center justify-center h-48\">\n          <div className=\"text-center space-y-3\">\n            <Loader2 className=\"h-6 w-6 animate-spin mx-auto text-muted-foreground\" />\n            <p className=\"text-sm text-muted-foreground\">Loading integrations...</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto space-y-6\">\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-2\">\n          <Globe className=\"h-6 w-6 text-primary\" />\n        </div>\n        <h2 className=\"text-2xl font-semibold\">Connect Your Tools</h2>\n        <p className=\"text-muted-foreground\">\n          Optionally connect external services to enhance your workflow. You can always add more later in Settings.\n        </p>\n      </div>\n\n      {/* Connection Progress (when connecting) */}\n      {isConnecting && (\n        <Card className=\"border-primary/20 bg-primary/5\">\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"flex items-center gap-2\">\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  Connecting {currentlyConnecting && INTEGRATIONS.find((i) => i.type === currentlyConnecting)?.name}...\n                </span>\n                <span className=\"text-muted-foreground\">{connectionProgress}%</span>\n              </div>\n              <Progress value={connectionProgress} className=\"h-2\" />\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Integration Categories */}\n      <div className=\"space-y-4\">\n        {CATEGORY_ORDER.map((category) => {\n          const categoryIntegrations = integrationsByCategory.get(category);\n          if (!categoryIntegrations || categoryIntegrations.length === 0) return null;\n\n          const categoryInfo = INTEGRATION_CATEGORIES[category];\n\n          return (\n            <Card key={category}>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium text-muted-foreground\">{categoryInfo.label}</CardTitle>\n              </CardHeader>\n              <CardContent className=\"pt-0\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                  {categoryIntegrations.map((config) => {\n                    const isConnected = connectedTypes.has(config.type);\n                    const isSelected = selectedTypes.has(config.type);\n\n                    return (\n                      <SelectableIntegrationCard\n                        key={config.type}\n                        config={config}\n                        isSelected={isSelected}\n                        isConnected={isConnected}\n                        onToggle={() => toggleSelection(config.type)}\n                      />\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4\">\n        {showSkip && (\n          <Button variant=\"ghost\" onClick={handleSkip} disabled={isConnecting} className=\"w-full sm:w-auto\">\n            {skipText}\n          </Button>\n        )}\n\n        <div className=\"flex items-center gap-3 w-full sm:w-auto\">\n          {selectedCount > 0 && (\n            <Badge variant=\"secondary\" className=\"hidden sm:flex\">\n              {selectedCount} selected\n              {notConnectedCount > 0 && ` (${notConnectedCount} to connect)`}\n            </Badge>\n          )}\n\n          <Button\n            onClick={handleConnect}\n            disabled={selectedCount === 0 || isConnecting}\n            className=\"w-full sm:w-auto gap-2\"\n          >\n            {isConnecting ? (\n              <>\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                Connecting...\n              </>\n            ) : connectionProgress === 100 && selectedCount > 0 ? (\n              <>\n                <CheckCircle className=\"h-4 w-4\" />\n                Continue\n              </>\n            ) : (\n              <>\n                {continueText}\n                <ArrowRight className=\"h-4 w-4\" />\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n\n      {/* Tip */}\n      <div className=\"flex items-start gap-2 text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg\">\n        <Sparkles className=\"h-4 w-4 shrink-0 mt-0.5\" />\n        <p>\n          <strong>Tip:</strong> Connect Notion or Google Drive now to automatically export your validation reports and\n          canvases as you work.\n        </p>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/ProjectCreationWizard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":463,"column":72,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[15146,15247],"text":"\n                  Start by describing your startup concept and what you&apos;re building\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[15146,15247],"text":"\n                  Start by describing your startup concept and what you&lsquo;re building\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[15146,15247],"text":"\n                  Start by describing your startup concept and what you&#39;re building\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[15146,15247],"text":"\n                  Start by describing your startup concept and what you&rsquo;re building\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":498,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you&apos;re solving and who you're solving it for\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you&lsquo;re solving and who you're solving it for\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you&#39;re solving and who you're solving it for\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you&rsquo;re solving and who you're solving it for\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":498,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you're solving and who you&apos;re solving it for\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you're solving and who you&lsquo;re solving it for\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you're solving and who you&#39;re solving it for\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[16693,16804],"text":"\n                  Help us understand the problem you're solving and who you&rsquo;re solving it for\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-F11\n */\n\"use client\"\n\nimport * as React from \"react\"\nimport { useState, useTransition } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\nimport {\n  Lightbulb,\n  Target,\n  Users,\n  DollarSign,\n  Rocket,\n  Brain,\n  CheckCircle,\n  ArrowRight,\n  Sparkles,\n  MessageSquare\n} from \"lucide-react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { useAuth } from \"@/lib/auth/hooks\"\nimport { ValidationProgressTimeline } from \"@/components/validation/ValidationProgressTimeline\"\n\ninterface ProjectCreationWizardProps {\n  clientId?: string // Optional - for consultants creating projects for clients\n}\n\ninterface ProjectData {\n  name: string\n  description: string\n  problemStatement: string\n  targetMarket: string\n  businessModel: string\n  stage: 'DESIRABILITY' | 'FEASIBILITY' | 'VIABILITY' | 'SCALE'\n  clientId?: string\n}\n\ninterface AIInsight {\n  type: 'hypothesis' | 'experiment' | 'risk' | 'opportunity'\n  title: string\n  description: string\n  priority: 'high' | 'medium' | 'low'\n}\n\ninterface AnalysisResult {\n  analysisId: string\n  summary?: string\n  insights?: Array<{\n    id: string\n    headline: string\n    confidence?: string\n    support?: string\n  }>\n  rawOutput?: string\n}\n\nexport function ProjectCreationWizard({ clientId }: ProjectCreationWizardProps = {}) {\n  const [currentStep, setCurrentStep] = useState(1)\n  const [projectData, setProjectData] = useState<ProjectData>({\n    name: '',\n    description: '',\n    problemStatement: '',\n    targetMarket: '',\n    businessModel: '',\n    stage: 'DESIRABILITY',\n    clientId: clientId\n  })\n  const [projectId, setProjectId] = useState<string | null>(null)\n  const [projectClientId, setProjectClientId] = useState<string | undefined>(clientId)\n  const [aiInsights, setAiInsights] = useState<AIInsight[]>([])\n  const [analysisResult, setAnalysisResult] = useState<AnalysisResult | null>(null)\n  const [isGeneratingInsights, setIsGeneratingInsights] = useState(false)\n  const [isCreatingProject, setIsCreatingProject] = useState(false)\n  const [aiProgress, setAiProgress] = useState<string>('')\n  const [aiError, setAiError] = useState<string>('')\n  const [analysisLoaded, setAnalysisLoaded] = useState(false)\n  const [validationRunId, setValidationRunId] = useState<string | null>(null)\n  const [showProgressModal, setShowProgressModal] = useState(false)\n  const [pending, startTransition] = useTransition()\n  const { user } = useAuth()\n  const router = useRouter()\n  const supabase = createClient()\n\n  const totalSteps = 4\n  const progress = (currentStep / totalSteps) * 100\n\n  const handleInputChange = (field: keyof ProjectData, value: string) => {\n    setProjectData(prev => ({ ...prev, [field]: value }))\n    if (['name', 'description', 'problemStatement', 'targetMarket', 'businessModel'].includes(field)) {\n      setAnalysisLoaded(false)\n      setAnalysisResult(null)\n      setAiInsights([])\n    }\n  }\n\n  const ensureProjectCreated = async (): Promise<string> => {\n    if (projectId) {\n      return projectId\n    }\n\n    setAiProgress('Creating project...')\n\n    const response = await fetch('/api/projects/create', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(projectData),\n    })\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}))\n      throw new Error(errorData.error || 'Failed to create project before analysis')\n    }\n\n    const { project, clientId: createdClientId } = await response.json()\n    setProjectId(project.id)\n    if (createdClientId) {\n      setProjectClientId(createdClientId)\n    }\n    return project.id as string\n  }\n\n  const generateAIInsights = async (force = false) => {\n    if (!force && analysisLoaded) {\n      return\n    }\n\n    setIsGeneratingInsights(true)\n    setAiProgress('Starting AI analysis...')\n    setAiError('')\n    setAnalysisResult(null)\n    setAnalysisLoaded(false)\n    \n    try {\n      const { data: { session } } = await supabase.auth.getSession()\n      \n      if (!session?.access_token) {\n        throw new Error('Authentication required for AI analysis')\n      }\n      \n      const ensuredProjectId = await ensureProjectCreated()\n\n      setAiProgress('Connecting to AI analysis engine...')\n      \n      const strategicQuestion = `What strategic moves should ${projectData.name || 'this startup'} prioritize to validate the problem \"${projectData.problemStatement}\"?`\n      const projectContext = [\n        projectData.description && `Description: ${projectData.description}`,\n        projectData.problemStatement && `Problem: ${projectData.problemStatement}`,\n        projectData.targetMarket && `Target Market: ${projectData.targetMarket}`,\n        projectData.businessModel && `Business Model: ${projectData.businessModel}`,\n      ]\n        .filter(Boolean)\n        .join(' | ')\n\n      const response = await fetch('/api/analyze', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: JSON.stringify({\n          strategic_question: strategicQuestion,\n          project_context: projectContext,\n          project_id: ensuredProjectId,\n          priority_level: 'high' as const,\n        })\n      })\n      \n      setAiProgress('AI agents analyzing your startup...')\n\n      if (!response.ok) {\n        const errorText = await response.text().catch(() => '')\n        throw new Error(`AI analysis failed: ${response.statusText}${errorText ? `  ${errorText}` : ''}`)\n      }\n\n      setAiProgress('Processing AI analysis results...')\n      const aiResult = await response.json() as {\n        success: boolean;\n        summary?: string;\n        insights?: any[];\n        analysisId?: string;\n        rawOutput?: string;\n        run_id?: string;\n        status?: string;\n        status_url?: string;\n      }\n\n      // Handle async validation pattern (Modal returns 202 with run_id)\n      if (aiResult.run_id && aiResult.status === 'started') {\n        setAiProgress('Validation started - tracking progress...')\n        setValidationRunId(aiResult.run_id)\n        setShowProgressModal(true)\n\n        // Create placeholder insights while validation runs\n        const placeholderInsights: AIInsight[] = [\n          {\n            type: 'hypothesis',\n            title: 'AI Analysis In Progress',\n            description: 'Our AI agents are analyzing your startup. This process validates your idea across desirability, feasibility, and viability dimensions.',\n            priority: 'high'\n          }\n        ]\n        setAiInsights(placeholderInsights)\n        setAnalysisResult({\n          analysisId: aiResult.run_id,\n          summary: 'AI validation in progress. You can track real-time progress and will be notified when approval is needed.',\n        })\n        setAnalysisLoaded(true)\n        return\n      }\n\n      if (!aiResult?.success) {\n        throw new Error('Analysis completed without success flag')\n      }\n\n      const crewaiInsights = parseCrewAIResult({\n        summary: aiResult.summary,\n        insights: aiResult.insights,\n        rawOutput: aiResult.rawOutput,\n      })\n\n      setAiProgress('AI analysis complete')\n      setAiInsights(crewaiInsights)\n      setAnalysisResult({\n        analysisId: aiResult.analysisId || '',\n        summary: aiResult.summary,\n        insights: aiResult.insights,\n        rawOutput: aiResult.rawOutput,\n      })\n      setAnalysisLoaded(true)\n      \n    } catch (error) {\n      console.error('AI analysis error:', error)\n      \n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      setAiError(`AI analysis error: ${errorMessage}. Using fallback recommendations.`)\n      setAiProgress('Using fallback recommendations...')\n      \n      const fallbackInsights: AIInsight[] = [\n        {\n          type: 'hypothesis',\n          title: 'Primary Value Hypothesis',\n          description: `Target customers will pay for ${projectData.name} because it solves their core problem: ${projectData.problemStatement}`,\n          priority: 'high'\n        },\n        {\n          type: 'experiment',\n          title: 'Customer Interview Series',\n          description: 'Conduct 15-20 interviews with target market to validate problem-solution fit',\n          priority: 'high'\n        },\n        {\n          type: 'risk',\n          title: 'Market Size Validation',\n          description: 'Verify that the target market is large enough to sustain the business model',\n          priority: 'medium'\n        },\n        {\n          type: 'opportunity',\n          title: 'Early Adopter Identification',\n          description: 'Focus on identifying and engaging early adopters within the target market',\n          priority: 'high'\n        }\n      ]\n      \n      setAiInsights(fallbackInsights)\n      setAiProgress('Fallback recommendations ready')\n      setAnalysisResult(null)\n    } finally {\n      setIsGeneratingInsights(false)\n    }\n  }\n  \n  // Helper function to parse CrewAI result into insights\n  const parseCrewAIResult = (analysis: { summary?: string; insights?: any[]; rawOutput?: string }): AIInsight[] => {\n    const insights: AIInsight[] = []\n    const raw = (analysis.rawOutput || analysis.summary || '').toLowerCase()\n\n    analysis.insights?.slice(0, 4).forEach((item: any) => {\n      insights.push({\n        type: 'opportunity',\n        title: item.headline || 'AI Strategic Insight',\n        description: item.support || item.headline || 'AI generated insight',\n        priority: item.confidence === 'high' ? 'high' : item.confidence === 'low' ? 'low' : 'medium',\n      })\n    })\n\n    if (insights.length === 0 && raw.includes('hypothesis')) {\n      insights.push({\n        type: 'hypothesis',\n        title: 'AI-Generated Value Hypothesis',\n        description: 'Based on strategic analysis, key value propositions have been identified for validation',\n        priority: 'high',\n      })\n    }\n\n    if (insights.length === 0 && (raw.includes('experiment') || raw.includes('validation'))) {\n      insights.push({\n        type: 'experiment',\n        title: 'AI-Recommended Validation Experiments',\n        description: 'Strategic analysis suggests specific experiments to validate core assumptions',\n        priority: 'high',\n      })\n    }\n\n    if (raw.includes('risk') || raw.includes('challenge')) {\n      insights.push({\n        type: 'risk',\n        title: 'AI-Identified Strategic Risks',\n        description: 'Analysis has identified potential risks that require mitigation strategies',\n        priority: 'medium',\n      })\n    }\n\n    if (raw.includes('opportunity') || raw.includes('market')) {\n      insights.push({\n        type: 'opportunity',\n        title: 'AI-Discovered Market Opportunities',\n        description: 'Strategic analysis reveals market opportunities for competitive advantage',\n        priority: 'high',\n      })\n    }\n\n    if (insights.length === 0) {\n      insights.push({\n        type: 'hypothesis',\n        title: 'AI Strategic Analysis Complete',\n        description: 'Comprehensive strategic analysis has been completed with actionable recommendations',\n        priority: 'high',\n      })\n    }\n\n    return insights\n  }\n\n  const createProject = async () => {\n    if (!user) return\n\n    setIsCreatingProject(true)\n\n    try {\n      const ensuredProjectId = await ensureProjectCreated()\n\n      const metadata = {\n        problemStatement: projectData.problemStatement,\n        targetMarket: projectData.targetMarket,\n        businessModel: projectData.businessModel,\n        createdViaWizard: true,\n        aiInsightsGenerated: analysisLoaded,\n        ...(projectClientId ? { clientId: projectClientId } : {}),\n      }\n\n      const { error: updateError } = await supabase\n        .from('projects')\n        .update({\n          name: projectData.name,\n          description: projectData.description,\n          stage: projectData.stage,\n          status: 'active',\n          metadata,\n          updated_at: new Date().toISOString(),\n          last_activity: new Date().toISOString(),\n        })\n        .eq('id', ensuredProjectId)\n\n      if (updateError) {\n        throw new Error(updateError.message || 'Failed to update project')\n      }\n\n      startTransition(() => {\n        if (projectClientId) {\n          router.push(`/client/${projectClientId}`)\n        } else {\n          router.push(`/project/${ensuredProjectId}/gate`)\n        }\n      })\n    } catch (error) {\n      console.error('Error creating project:', error)\n      setAiError(error instanceof Error ? error.message : 'Failed to finalize project')\n    } finally {\n      setIsCreatingProject(false)\n    }\n  }\n\n  const nextStep = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(prev => prev + 1)\n      if (currentStep === 2) {\n        generateAIInsights()\n      }\n    }\n  }\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(prev => prev - 1)\n    }\n  }\n\n  const canProceed = () => {\n    switch (currentStep) {\n      case 1:\n        return projectData.name.trim() && projectData.description.trim()\n      case 2:\n        return projectData.problemStatement.trim() && projectData.targetMarket.trim()\n      case 3:\n        return projectData.businessModel.trim()\n      case 4:\n        return aiInsights.length > 0\n      default:\n        return false\n    }\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <h1 className=\"text-3xl font-bold flex items-center justify-center gap-2\">\n          <Sparkles className=\"h-8 w-8 text-blue-600\" />\n          Create Your Validation Project\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Let our AI help you set up a comprehensive validation framework for your startup idea\n        </p>\n      </div>\n\n      {/* Progress */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm text-muted-foreground\">\n          <span>Step {currentStep} of {totalSteps}</span>\n          <span>{Math.round(progress)}% Complete</span>\n        </div>\n        <Progress value={progress} className=\"h-2\" />\n      </div>\n\n      {/* Step Content */}\n      <Card>\n        <CardContent className=\"p-8\">\n          {currentStep === 1 && (\n            <div className=\"space-y-6\">\n              <div className=\"text-center space-y-2\">\n                <Lightbulb className=\"h-12 w-12 text-yellow-500 mx-auto\" />\n                <h2 className=\"text-2xl font-semibold\">Tell us about your idea</h2>\n                <p className=\"text-muted-foreground\">\n                  Start by describing your startup concept and what you're building\n                </p>\n              </div>\n              \n              <div className=\"space-y-4 max-w-2xl mx-auto\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"name\">Project Name *</Label>\n                  <Input\n                    id=\"name\"\n                    placeholder=\"e.g., EcoDelivery, HealthTracker Pro, SmartHome Assistant\"\n                    value={projectData.name}\n                    onChange={(e) => handleInputChange('name', e.target.value)}\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"description\">Project Description *</Label>\n                  <Textarea\n                    id=\"description\"\n                    placeholder=\"Describe your startup idea in 2-3 sentences. What does it do and who is it for?\"\n                    rows={4}\n                    value={projectData.description}\n                    onChange={(e) => handleInputChange('description', e.target.value)}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {currentStep === 2 && (\n            <div className=\"space-y-6\">\n              <div className=\"text-center space-y-2\">\n                <Target className=\"h-12 w-12 text-red-500 mx-auto\" />\n                <h2 className=\"text-2xl font-semibold\">Define the problem & market</h2>\n                <p className=\"text-muted-foreground\">\n                  Help us understand the problem you're solving and who you're solving it for\n                </p>\n              </div>\n              \n              <div className=\"space-y-4 max-w-2xl mx-auto\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"problem\">Problem Statement *</Label>\n                  <Textarea\n                    id=\"problem\"\n                    placeholder=\"What specific problem does your startup solve? Be as detailed as possible.\"\n                    rows={4}\n                    value={projectData.problemStatement}\n                    onChange={(e) => handleInputChange('problemStatement', e.target.value)}\n                  />\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"market\">Target Market *</Label>\n                  <Textarea\n                    id=\"market\"\n                    placeholder=\"Who are your target customers? Describe their demographics, behaviors, and pain points.\"\n                    rows={4}\n                    value={projectData.targetMarket}\n                    onChange={(e) => handleInputChange('targetMarket', e.target.value)}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {currentStep === 3 && (\n            <div className=\"space-y-6\">\n              <div className=\"text-center space-y-2\">\n                <DollarSign className=\"h-12 w-12 text-green-500 mx-auto\" />\n                <h2 className=\"text-2xl font-semibold\">Business model & monetization</h2>\n                <p className=\"text-muted-foreground\">\n                  How will your startup make money and create value?\n                </p>\n              </div>\n              \n              <div className=\"space-y-4 max-w-2xl mx-auto\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"business-model\">Business Model *</Label>\n                  <Textarea\n                    id=\"business-model\"\n                    placeholder=\"How will you make money? (e.g., subscription, marketplace, freemium, advertising, etc.)\"\n                    rows={6}\n                    value={projectData.businessModel}\n                    onChange={(e) => handleInputChange('businessModel', e.target.value)}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {currentStep === 4 && (\n            <div className=\"space-y-6\">\n              <div className=\"text-center space-y-2\">\n                <Brain className=\"h-12 w-12 text-purple-500 mx-auto\" />\n                <h2 className=\"text-2xl font-semibold\">AI-Generated Validation Plan</h2>\n                <p className=\"text-muted-foreground\">\n                  Our AI has analyzed your startup and created a personalized validation framework\n                </p>\n              </div>\n\n              {/* Accessibility: Screen reader announcements */}\n              <div \n                role=\"status\" \n                aria-live=\"polite\" \n                aria-atomic=\"true\"\n                className=\"sr-only\"\n              >\n                {aiProgress}\n              </div>\n              \n              {aiError && (\n                <div \n                  role=\"alert\" \n                  aria-live=\"assertive\"\n                  className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4\"\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <MessageSquare className=\"h-5 w-5 text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-medium text-yellow-900\">AI Analysis Notice</h4>\n                      <p className=\"text-sm text-yellow-700 mt-1\">{aiError}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {isGeneratingInsights ? (\n                <div className=\"text-center py-12\">\n                  <div \n                    className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"\n                    role=\"img\"\n                    aria-label=\"Loading spinner\"\n                  ></div>\n                  <p className=\"text-muted-foreground\" aria-live=\"polite\">{aiProgress || 'Analyzing your startup with AI...'}</p>\n                  <p className=\"text-sm text-muted-foreground mt-2\">This may take 30-60 seconds</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n                    <div className=\"sr-only\" role=\"status\" aria-live=\"polite\">\n                      Found {aiInsights.length} AI-generated insights for your startup\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {analysisResult?.analysisId ? `Analysis run ID: ${analysisResult.analysisId}` : 'AI insights ready'}\n                      </p>\n                      {analysisResult?.summary && (\n                        <p className=\"text-base font-medium text-foreground mt-1\">\n                          {analysisResult.summary}\n                        </p>\n                      )}\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => generateAIInsights(true)}\n                      disabled={isGeneratingInsights}\n                    >\n                      Regenerate insights\n                    </Button>\n                  </div>\n\n                  {aiInsights.length > 0 ? (\n                    <div className=\"grid gap-4 md:grid-cols-2\">\n                      {aiInsights.map((insight, index) => (\n                        <Card \n                          key={index} \n                          className=\"border-l-4 border-l-blue-500\"\n                          role=\"article\"\n                          aria-label={`${insight.type}: ${insight.title}`}\n                        >\n                          <CardHeader className=\"pb-3\">\n                            <div className=\"flex items-center justify-between\">\n                              <Badge variant={insight.priority === 'high' ? 'default' : 'secondary'}>\n                                {insight.type}\n                              </Badge>\n                              <Badge variant=\"outline\">\n                                {insight.priority} priority\n                              </Badge>\n                            </div>\n                            <CardTitle className=\"text-lg\">{insight.title}</CardTitle>\n                          </CardHeader>\n                          <CardContent>\n                            <p className=\"text-sm text-muted-foreground\">{insight.description}</p>\n                          </CardContent>\n                        </Card>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"border border-dashed border-blue-200 rounded-lg p-6 text-center text-sm text-muted-foreground\">\n                      AI insights will appear here after the analysis finishes.\n                    </div>\n                  )}\n\n                  <div \n                    className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\"\n                    role=\"complementary\"\n                    aria-label=\"AI Recommendation\"\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <MessageSquare className=\"h-5 w-5 text-blue-600 mt-0.5\" aria-hidden=\"true\" />\n                      <div>\n                        <h4 className=\"font-medium text-blue-900\">AI Recommendation</h4>\n                        <p className=\"text-sm text-blue-700 mt-1\">\n                          {analysisResult?.summary\n                            ? analysisResult.summary\n                            : 'Start with the Desirability stage to validate demand before investing further effort.'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {analysisResult?.rawOutput && (\n                    <details className=\"bg-muted/30 border border-muted rounded-lg p-4\">\n                      <summary className=\"text-sm font-medium cursor-pointer\">View raw AI output</summary>\n                      <p className=\"mt-3 text-sm text-muted-foreground whitespace-pre-wrap\">\n                        {analysisResult.rawOutput}\n                      </p>\n                    </details>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between\">\n        <Button\n          variant=\"outline\"\n          onClick={prevStep}\n          disabled={currentStep === 1}\n        >\n          Previous\n        </Button>\n\n        <div className=\"flex gap-2\">\n          {currentStep < totalSteps ? (\n            <Button\n              onClick={nextStep}\n              disabled={!canProceed() || isGeneratingInsights}\n            >\n              Next Step\n              <ArrowRight className=\"h-4 w-4 ml-2\" />\n            </Button>\n          ) : (\n            <Button\n              onClick={createProject}\n              disabled={!canProceed() || isCreatingProject || pending}\n              className=\"bg-green-600 hover:bg-green-700\"\n            >\n              {isCreatingProject ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Creating Project...\n                </>\n              ) : (\n                <>\n                  <Rocket className=\"h-4 w-4 mr-2\" />\n                  Launch Validation Project\n                </>\n              )}\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Validation Progress Modal */}\n      <Dialog open={showProgressModal} onOpenChange={setShowProgressModal}>\n        <DialogContent className=\"max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>AI Validation in Progress</DialogTitle>\n            <DialogDescription>\n              Your startup is being analyzed by our AI founders team.\n            </DialogDescription>\n          </DialogHeader>\n          {validationRunId && (\n            <ValidationProgressTimeline\n              runId={validationRunId}\n              variant=\"modal\"\n              onHITLRequired={(checkpoint) => {\n                setShowProgressModal(false)\n                router.push('/approvals')\n              }}\n              onComplete={() => {\n                setShowProgressModal(false)\n                if (projectId) {\n                  router.push(`/project/${projectId}/analysis`)\n                } else if (projectClientId) {\n                  router.push(`/client/${projectClientId}`)\n                }\n              }}\n              onError={(err) => {\n                console.error('[ProjectCreationWizard] Validation error:', err)\n                setAiError(err.message || 'Validation failed')\n              }}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/QuickStartForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/__tests__/ClientOnboardingWizard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/__tests__/FoundersBriefReview.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/__tests__/ProjectCreationWizard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/__tests__/redirect-logic.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/onboarding/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/GateAlerts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/GateStageFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/PortfolioGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/PortfolioMetrics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/RiskBudgetWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/portfolio/StageProgressIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/providers/QueryProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/CrewAIReportViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/export/PDFExporter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/sections/DesirabilitySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/sections/FeasibilitySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/sections/GovernanceSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/sections/ViabilitySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/reports/sections/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/ClientsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/IntegrationsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/ProjectsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/gate-policies/GatePolicyCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/gate-policies/GatePolicyForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/gate-policies/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/integrations/IntegrationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/integrations/IntegrationConfigModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/settings/integrations/SyncStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/signals/InnovationPhysicsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/signals/SignalBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/signals/SignalGauge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/signals/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/signup-form.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/signup-form.tsx:130:9\n  128 |       const option = planOptions.find((opt) => opt.id === selectedPlan)\n  129 |       if (option && !option.disabled) {\n> 130 |         setLocalPlan(selectedPlan)\n      |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  131 |       }\n  132 |     }\n  133 |   }, [selectedPlan, planOptions])","line":130,"column":9,"nodeType":null,"endLine":130,"endColumn":21},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/signup-form.tsx:137:7\n  135 |   useEffect(() => {\n  136 |     if (selectedRole && ['founder', 'consultant'].includes(selectedRole)) {\n> 137 |       setLocalRole(selectedRole)\n      |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  138 |     }\n  139 |   }, [selectedRole])\n  140 |","line":137,"column":7,"nodeType":null,"endLine":137,"endColumn":19},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/signup-form.tsx:144:7\n  142 |   useEffect(() => {\n  143 |     if (inviteInfo) {\n> 144 |       setEmail(inviteInfo.email)\n      |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  145 |       if (inviteInfo.clientName) {\n  146 |         setName(inviteInfo.clientName)\n  147 |       }","line":144,"column":7,"nodeType":null,"endLine":144,"endColumn":15},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":320,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10756,10769],"text":"I&apos;m a Founder"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10756,10769],"text":"I&lsquo;m a Founder"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10756,10769],"text":"I&#39;m a Founder"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10756,10769],"text":"I&rsquo;m a Founder"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":336,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11570,11594],"text":"I&apos;m a Consultant/Advisor"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11570,11594],"text":"I&lsquo;m a Consultant/Advisor"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11570,11594],"text":"I&#39;m a Consultant/Advisor"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11570,11594],"text":"I&rsquo;m a Consultant/Advisor"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Signup Form Component\n *\n * Handles user registration with plan selection and trial intent routing.\n * @story US-FT01, US-F01\n */\n\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { analytics } from \"@/lib/analytics\"\n\ntype PlanOption = {\n  id: string\n  name: string\n  description: string\n  price: string\n  bestFor: string\n  badge?: string\n  disabled?: boolean\n  disabledMessage?: string\n}\n\ninterface InviteInfo {\n  valid: boolean\n  email: string\n  clientName: string | null\n  consultantId: string\n  consultantName: string\n  consultantCompany: string | null\n  expiresAt: string\n}\n\ntype SignupFormProps = React.ComponentProps<\"form\"> & {\n  planOptions?: PlanOption[]\n  selectedPlan?: string\n  selectedRole?: string\n  onPlanChange?: (plan: string) => void\n  onRoleChange?: (role: string) => void\n  inviteToken?: string | null\n  inviteInfo?: InviteInfo | null\n}\n\nexport const DEFAULT_PLAN_OPTIONS: PlanOption[] = [\n  {\n    id: \"trial\",\n    name: \"Free Trial\",\n    description: \"Test the core evidence experience\",\n    price: \"$0\",\n    bestFor: \"Getting started risk-free\"\n  },\n  {\n    id: \"beta-lifetime\",\n    name: \"Beta Lifetime Deal\",\n    description: \"Unlimited access to all beta features\",\n    price: \"$497 one-time\",\n    bestFor: \"Early adopters who want lifetime access\",\n    badge: \"Limited Time\"\n  },\n  {\n    id: \"founder-platform\",\n    name: \"Founder Platform\",\n    description: \"Continuous validation with AI strategist\",\n    price: \"$199/mo\",\n    bestFor: \"Founders scaling validated ideas\",\n    disabled: true,\n    disabledMessage: \"Unlocked After Sprint\"\n  },\n  {\n    id: \"agency-co-pilot\",\n    name: \"Agency Co-Pilot\",\n    description: \"White-label AI workflows for agencies\",\n    price: \"$499/mo\",\n    bestFor: \"Consultancies serving multiple clients\",\n    disabled: true,\n    disabledMessage: \"Unlocked After Sprint\"\n  }\n]\n\nexport function SignupForm({\n  className,\n  planOptions = DEFAULT_PLAN_OPTIONS,\n  selectedPlan,\n  selectedRole,\n  onPlanChange,\n  onRoleChange,\n  inviteToken,\n  inviteInfo,\n  ...props\n}: SignupFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [isOAuthLoading, setIsOAuthLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [success, setSuccess] = useState<string | null>(null)\n  const [name, setName] = useState(() => inviteInfo?.clientName || \"\")\n  const [email, setEmail] = useState(() => inviteInfo?.email || \"\")\n  const [company, setCompany] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [confirmPassword, setConfirmPassword] = useState(\"\")\n  const supabase = useMemo(() => createClient(), [])\n  const [localPlan, setLocalPlan] = useState(() => {\n    if (selectedPlan) {\n      const option = planOptions.find((opt) => opt.id === selectedPlan)\n      if (option && !option.disabled) {\n        return selectedPlan\n      }\n    }\n    // Find first non-disabled plan\n    const firstEnabledPlan = planOptions.find((opt) => !opt.disabled)\n    return firstEnabledPlan?.id ?? \"trial\"\n  })\n  const [localRole, setLocalRole] = useState(() => {\n    if (selectedRole && ['founder', 'consultant'].includes(selectedRole)) {\n      return selectedRole\n    }\n    return 'founder' // Default to founder if no role specified\n  })\n  const [trialIntent, setTrialIntent] = useState<'founder_trial' | 'consultant_trial'>('founder_trial')\n\n  useEffect(() => {\n    if (selectedPlan) {\n      const option = planOptions.find((opt) => opt.id === selectedPlan)\n      if (option && !option.disabled) {\n        setLocalPlan(selectedPlan)\n      }\n    }\n  }, [selectedPlan, planOptions])\n\n  useEffect(() => {\n    if (selectedRole && ['founder', 'consultant'].includes(selectedRole)) {\n      setLocalRole(selectedRole)\n    }\n  }, [selectedRole])\n\n  // Update email and name when inviteInfo becomes available\n  useEffect(() => {\n    if (inviteInfo) {\n      setEmail(inviteInfo.email)\n      if (inviteInfo.clientName) {\n        setName(inviteInfo.clientName)\n      }\n    }\n  }, [inviteInfo])\n\n  const plan = selectedPlan ?? localPlan\n  const role = selectedRole ?? localRole\n\n  const handlePlanChange = (value: string) => {\n    const selectedOption = planOptions.find((option) => option.id === value)\n    if (!selectedOption || selectedOption.disabled) {\n      return\n    }\n    if (!selectedPlan) {\n      setLocalPlan(value)\n    }\n    onPlanChange?.(value)\n  }\n\n  const handleEmailSignup = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    setError(null)\n    setSuccess(null)\n\n    if (password !== confirmPassword) {\n      setError(\"Passwords do not match\")\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      analytics.auth.signupStarted(\"email\", plan)\n\n      const { data: result, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            full_name: name,\n            company,\n            plan_choice: plan,\n            role: role,\n            trial_intent: plan === 'trial' ? trialIntent : null,\n          },\n          emailRedirectTo: `${window.location.origin}/auth/callback?plan=${plan}&role=${plan === 'trial' ? trialIntent : role}${inviteToken ? `&invite=${inviteToken}` : ''}`,\n        },\n      })\n\n      if (error) {\n        setError(error.message)\n        setIsSubmitting(false)\n        return\n      }\n\n      if (result.user?.id) {\n        analytics.auth.signupCompleted(\"email\", plan, result.user.id)\n      }\n\n      setSuccess(\"Check your email to confirm your account. Click the verification link to get started - you can then close this tab.\")\n      setIsSubmitting(false)\n    } catch (err) {\n      console.error(err)\n      setError(\"Sign up failed. Please try again.\")\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleGitHubSignup = async () => {\n    setError(null)\n    setSuccess(null)\n    setIsOAuthLoading(true)\n\n    analytics.auth.signupStarted(\"github\", plan)\n\n    try {\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: 'github',\n        options: {\n          scopes: 'user:email read:user',\n          redirectTo: `${window.location.origin}/auth/callback?plan=${plan}&role=${plan === 'trial' ? trialIntent : role}${inviteToken ? `&invite=${inviteToken}` : ''}`,\n          queryParams: {\n            access_type: 'offline',\n            prompt: 'consent',\n          },\n        },\n      })\n\n      if (error) {\n        setError(error.message)\n        setIsOAuthLoading(false)\n      } else {\n        analytics.auth.signupInitiatedOAuth(\"github\", plan)\n      }\n    } catch (err) {\n      console.error('GitHub signup error:', err)\n      setError('GitHub signup failed. Please try again.')\n      setIsOAuthLoading(false)\n      analytics.auth.signupFailed(\"github\", plan, \"exception\")\n    }\n  }\n\n  return (\n    <form className={cn(\"flex flex-col gap-6\", className)} onSubmit={handleEmailSignup} {...props}>\n      <div className=\"flex flex-col items-center gap-2 text-center\">\n        <h1 className=\"text-2xl font-bold\">Create your account</h1>\n        <p className=\"text-muted-foreground text-sm text-balance\">\n          Join StartupAI and unlock expert business guidance\n        </p>\n      </div>\n      <div className=\"grid gap-6\">\n        <fieldset className=\"grid gap-3\">\n          <legend className=\"text-sm font-medium\">Choose your plan</legend>\n          <div className=\"grid gap-3\">\n            {planOptions.map((option) => (\n              <label\n                key={option.id}\n                htmlFor={`plan-${option.id}`}\n                className={cn(\n                  \"relative flex items-start gap-3 rounded-lg border p-4 transition\",\n                  option.disabled\n                    ? \"cursor-not-allowed opacity-60\"\n                    : \"cursor-pointer focus-within:ring-2 focus-within:ring-primary\",\n                  plan === option.id && !option.disabled ? \"border-primary bg-primary/5\" : \"border-border\"\n                )}\n              >\n                <input\n                  type=\"radio\"\n                  id={`plan-${option.id}`}\n                  name=\"plan\"\n                  value={option.id}\n                  checked={plan === option.id && !option.disabled}\n                  onChange={(event) => handlePlanChange(event.target.value)}\n                  disabled={option.disabled}\n                  className=\"mt-1 h-4 w-4 border border-primary text-primary focus-visible:outline-none disabled:cursor-not-allowed\"\n                />\n                <div className=\"flex flex-col gap-1 flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-semibold\">{option.name}</span>\n                    {option.badge && <Badge variant=\"secondary\">{option.badge}</Badge>}\n                    {option.disabled && option.disabledMessage && (\n                      <Badge variant=\"outline\" className=\"bg-muted text-muted-foreground\">\n                        {option.disabledMessage}\n                      </Badge>\n                    )}\n                    <span className=\"text-sm text-muted-foreground\">{option.price}</span>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">{option.description}</p>\n                  <p className=\"text-xs text-muted-foreground\">Best for: {option.bestFor}</p>\n                </div>\n              </label>\n            ))}\n          </div>\n        </fieldset>\n\n        {/* Trial Intent Selection - only shown when trial plan is selected */}\n        {plan === 'trial' && (\n          <fieldset className=\"grid gap-3\">\n            <legend className=\"text-sm font-medium\">How will you use StartupAI?</legend>\n            <RadioGroup\n              value={trialIntent}\n              onValueChange={(value) => setTrialIntent(value as 'founder_trial' | 'consultant_trial')}\n              className=\"grid gap-3\"\n            >\n              <label\n                htmlFor=\"intent-founder\"\n                className={cn(\n                  \"flex items-start gap-3 rounded-lg border p-4 cursor-pointer transition\",\n                  \"hover:border-primary/50\",\n                  trialIntent === 'founder_trial' ? \"border-primary bg-primary/5\" : \"border-border\"\n                )}\n              >\n                <RadioGroupItem value=\"founder_trial\" id=\"intent-founder\" className=\"mt-1\" />\n                <div className=\"flex flex-col gap-1\">\n                  <span className=\"font-semibold\">I'm a Founder</span>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Validate my own business idea with AI-powered evidence gathering\n                  </p>\n                </div>\n              </label>\n              <label\n                htmlFor=\"intent-consultant\"\n                className={cn(\n                  \"flex items-start gap-3 rounded-lg border p-4 cursor-pointer transition\",\n                  \"hover:border-primary/50\",\n                  trialIntent === 'consultant_trial' ? \"border-primary bg-primary/5\" : \"border-border\"\n                )}\n              >\n                <RadioGroupItem value=\"consultant_trial\" id=\"intent-consultant\" className=\"mt-1\" />\n                <div className=\"flex flex-col gap-1\">\n                  <span className=\"font-semibold\">I'm a Consultant/Advisor</span>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Explore AI validation tools to help my clients\n                  </p>\n                </div>\n              </label>\n            </RadioGroup>\n          </fieldset>\n        )}\n\n        <div className=\"grid gap-3\">\n          <Label htmlFor=\"name\">Full Name</Label>\n          <Input\n            id=\"name\"\n            type=\"text\"\n            placeholder=\"John Doe\"\n            required\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            disabled={isSubmitting || isOAuthLoading}\n          />\n        </div>\n        <div className=\"grid gap-3\">\n          <Label htmlFor=\"email\">Email</Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"m@example.com\"\n            required\n            value={email}\n            onChange={(event) => setEmail(event.target.value)}\n            disabled={isSubmitting || isOAuthLoading}\n            readOnly={!!inviteInfo}\n            className={inviteInfo ? \"bg-muted cursor-not-allowed\" : \"\"}\n          />\n          {inviteInfo && (\n            <p className=\"text-xs text-muted-foreground\">\n              Email is pre-filled from your invitation\n            </p>\n          )}\n        </div>\n        <div className=\"grid gap-3\">\n          <Label htmlFor=\"company\">Company (Optional)</Label>\n          <Input\n            id=\"company\"\n            type=\"text\"\n            placeholder=\"Your Company\"\n            value={company}\n            onChange={(event) => setCompany(event.target.value)}\n            disabled={isSubmitting || isOAuthLoading}\n          />\n        </div>\n        <div className=\"grid gap-3\">\n          <Label htmlFor=\"password\">Password</Label>\n          <Input\n            id=\"password\"\n            type=\"password\"\n            required\n            value={password}\n            onChange={(event) => setPassword(event.target.value)}\n            disabled={isSubmitting || isOAuthLoading}\n          />\n        </div>\n        <div className=\"grid gap-3\">\n          <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n          <Input\n            id=\"confirmPassword\"\n            type=\"password\"\n            required\n            value={confirmPassword}\n            onChange={(event) => setConfirmPassword(event.target.value)}\n            disabled={isSubmitting || isOAuthLoading}\n          />\n        </div>\n        {error && (\n          <div className=\"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-3\">\n            {error}\n          </div>\n        )}\n        {success && (\n          <div className=\"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md p-3\">\n            {success}\n          </div>\n        )}\n        <Button\n          type=\"submit\"\n          className=\"w-full\"\n          disabled={isSubmitting || isOAuthLoading}\n        >\n          {isSubmitting ? \"Creating account...\" : \"Create account\"}\n        </Button>\n        <div className=\"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t\">\n          <span className=\"bg-background text-muted-foreground relative z-10 px-2\">\n            Or continue with\n          </span>\n        </div>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          className=\"w-full\"\n          onClick={handleGitHubSignup}\n          disabled={isOAuthLoading || isSubmitting}\n        >\n          {isOAuthLoading ? \"Connecting to GitHub...\" : \"Sign up with GitHub\"}\n        </Button>\n      </div>\n      <div className=\"text-center text-sm\">\n        Already have an account?{\" \"}\n        <a href=\"/login\" className=\"underline underline-offset-4\">\n          Sign in\n        </a>\n      </div>\n    </form>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/AssumptionMap.tsx","messages":[{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/AssumptionMap.tsx:661:18\n  659 |             <div className=\"flex items-center gap-2 flex-wrap\">\n  660 |               <Badge className={categoryInfo.color}>\n> 661 |                 <CategoryIcon className=\"h-3 w-3 mr-1\" />\n      |                  ^^^^^^^^^^^^ This component is created during render\n  662 |                 {categoryInfo.label}\n  663 |               </Badge>\n  664 |               <Badge className={getPriorityColor(assumption.priority)}>\n\n/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/AssumptionMap.tsx:647:24\n  645 | function AssumptionCard({ assumption }: { assumption: Assumption }) {\n  646 |   const categoryInfo = getCategoryConfig(assumption.category)\n> 647 |   const CategoryIcon = getCategoryIcon(assumption.category)\n      |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  648 |   const StatusIcon = getStatusIcon(assumption.status)\n  649 |\n  650 |   // Count of test results","line":661,"column":18,"nodeType":null,"endLine":661,"endColumn":30},{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/AssumptionMap.tsx:680:18\n  678 |               </div>\n  679 |               <Badge className={getStatusConfig(assumption.status).color}>\n> 680 |                 <StatusIcon className=\"h-3 w-3 mr-1\" />\n      |                  ^^^^^^^^^^ This component is created during render\n  681 |                 {getStatusConfig(assumption.status).label}\n  682 |               </Badge>\n  683 |               {/* Test results count badge */}\n\n/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/AssumptionMap.tsx:648:22\n  646 |   const categoryInfo = getCategoryConfig(assumption.category)\n  647 |   const CategoryIcon = getCategoryIcon(assumption.category)\n> 648 |   const StatusIcon = getStatusIcon(assumption.status)\n      |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  649 |\n  650 |   // Count of test results\n  651 |   const testCount = assumption.test_results?.length || 0","line":680,"column":18,"nodeType":null,"endLine":680,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\n/**\n * Assumption Map UI for capturing and prioritizing hypotheses.\n * @story US-F12\n */\n\nimport React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport {\n  Plus,\n  Target,\n  Users,\n  Cog,\n  DollarSign,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  Clock,\n  Beaker,\n  TrendingUp,\n  Heart,\n  FileText,\n  FlaskConical\n} from 'lucide-react'\nimport { FounderBadge } from '@/components/founders'\nimport { EvidenceStrengthIndicator } from './EvidenceStrengthIndicator'\nimport { createClient } from '@/lib/supabase/client'\nimport { useProjects } from '@/hooks/useProjects'\nimport {\n  type Assumption,\n  type DbHypothesisRecord,\n  type AssumptionCategory,\n  type AssumptionMapQuadrants,\n  categoryConfig,\n  priorityConfig,\n  evidenceStrengthConfig,\n  statusConfig,\n  quadrantConfig,\n  transformDbToAssumption,\n  categorizeAssumptions,\n  getPriorityLabel,\n  getPriorityColor\n} from './types'\n\ninterface AssumptionMapProps {\n  projectId?: string\n}\n\nconst categoryIcons = {\n  desirability: Heart,\n  feasibility: Cog,\n  viability: DollarSign\n} as const\n\nconst statusIcons = {\n  untested: Clock,\n  testing: Target,\n  validated: CheckCircle,\n  invalidated: XCircle\n} as const\n\n// Defensive fallbacks for unknown values (prevents crashes from invalid DB data)\nconst defaultCategoryConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800', icon: Target }\nconst defaultStatusConfig = { label: 'Unknown', color: 'bg-gray-100 text-gray-800' }\n\n// Helper functions for safe config access\nconst getCategoryConfig = (category: string | undefined | null) => {\n  if (!category) return defaultCategoryConfig\n  return categoryConfig[category as keyof typeof categoryConfig] || defaultCategoryConfig\n}\n\nconst getStatusConfig = (status: string | undefined | null) => {\n  if (!status) return defaultStatusConfig\n  return statusConfig[status as keyof typeof statusConfig] || defaultStatusConfig\n}\n\nconst getCategoryIcon = (category: string | undefined | null) => {\n  if (!category) return Target\n  return categoryIcons[category as keyof typeof categoryIcons] || Target\n}\n\nconst getStatusIcon = (status: string | undefined | null) => {\n  if (!status) return Clock\n  return statusIcons[status as keyof typeof statusIcons] || Clock\n}\n\nexport function AssumptionMap({ projectId: propProjectId }: AssumptionMapProps) {\n  const supabase = useMemo(() => createClient(), [])\n  const { projects, isLoading: projectsLoading, error: projectsError } = useProjects()\n  const activeProjectId = useMemo(() => propProjectId || projects[0]?.id || null, [propProjectId, projects])\n\n  const [assumptions, setAssumptions] = useState<Assumption[]>([])\n  const [selectedCategory, setSelectedCategory] = useState<string>('all')\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false)\n  const [newAssumption, setNewAssumption] = useState({\n    statement: '',\n    category: 'desirability' as AssumptionCategory,\n    priority: 5, // 1-10 scale (1-3 critical, 4-7 important, 8-10 nice-to-have)\n    source: ''\n  })\n  const [isLoading, setIsLoading] = useState(true)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const fetchAssumptions = useCallback(async () => {\n    if (!activeProjectId) {\n      setAssumptions([])\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      setIsLoading(true)\n      const { data, error: queryError } = await supabase\n        .from('hypotheses')\n        .select('*')\n        .eq('project_id', activeProjectId)\n        .order('created_at', { ascending: false })\n\n      if (queryError) throw queryError\n\n      const transformed = ((data as DbHypothesisRecord[]) ?? []).map(transformDbToAssumption)\n      setAssumptions(transformed)\n      setError(null)\n    } catch (err) {\n      console.error('Error fetching assumptions:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsLoading(false)\n    }\n  }, [activeProjectId, supabase])\n\n  useEffect(() => {\n    if (projectsLoading) return\n    fetchAssumptions()\n  }, [projectsLoading, fetchAssumptions])\n\n  const filteredAssumptions = useMemo(() => {\n    if (selectedCategory === 'all') return assumptions\n    return assumptions.filter(a => a.category === selectedCategory)\n  }, [selectedCategory, assumptions])\n\n  const quadrants = useMemo(() => categorizeAssumptions(assumptions), [assumptions])\n\n  const handleCreateAssumption = useCallback(async () => {\n    if (!activeProjectId) return\n\n    // Convert priority (1-10) to importance (high/medium/low) for database\n    const priorityToImportance = (priority: number): string => {\n      if (priority <= 3) return 'high'\n      if (priority <= 7) return 'medium'\n      return 'low'\n    }\n\n    try {\n      setIsSubmitting(true)\n      const { error: insertError } = await supabase\n        .from('hypotheses')\n        .insert({\n          project_id: activeProjectId,\n          statement: newAssumption.statement,\n          type: newAssumption.category,\n          importance: priorityToImportance(newAssumption.priority),\n          evidence_strength: 'none',\n          status: 'untested',\n          source: newAssumption.source || null\n        })\n\n      if (insertError) throw insertError\n\n      setNewAssumption({ statement: '', category: 'desirability', priority: 5, source: '' })\n      setIsCreateDialogOpen(false)\n      setError(null)\n      await fetchAssumptions()\n    } catch (err) {\n      console.error('Error creating assumption:', err)\n      setError((err as Error).message)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }, [activeProjectId, fetchAssumptions, newAssumption, supabase])\n\n  // Analytics calculations\n  const analytics = useMemo(() => {\n    const total = assumptions.length\n    const testFirst = quadrants.testFirst.length\n    const validated = assumptions.filter(a => a.status === 'validated').length\n    const validationRate = total > 0 ? Math.round((validated / total) * 100) : 0\n\n    return { total, testFirst, validated, validationRate }\n  }, [assumptions, quadrants])\n\n  if (projectsLoading) {\n    return (\n      <div className=\"rounded-lg border bg-card p-6 text-sm text-muted-foreground\">\n        Loading your projects...\n      </div>\n    )\n  }\n\n  if (!activeProjectId) {\n    return (\n      <div className=\"rounded-lg border bg-card p-6 text-sm text-muted-foreground\">\n        Create a project to start capturing assumptions.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            <h2 className=\"text-2xl font-bold\">Assumption Map</h2>\n            <FounderBadge founderId=\"sage\" variant=\"badge\" size=\"sm\" />\n          </div>\n          <p className=\"text-muted-foreground\">\n            Identify, prioritize, and validate your riskiest business assumptions\n          </p>\n        </div>\n        <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Assumption\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Create New Assumption</DialogTitle>\n              <DialogDescription>\n                Add a testable, precise business assumption to your map\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"statement\">Assumption Statement</Label>\n                <Textarea\n                  id=\"statement\"\n                  placeholder=\"We believe that...\"\n                  value={newAssumption.statement}\n                  onChange={(e) => setNewAssumption({...newAssumption, statement: e.target.value})}\n                  className=\"min-h-20\"\n                />\n              </div>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div>\n                  <Label htmlFor=\"category\">Category</Label>\n                  <Select\n                    value={newAssumption.category}\n                    onValueChange={(value: AssumptionCategory) => setNewAssumption({...newAssumption, category: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"desirability\">Desirability</SelectItem>\n                      <SelectItem value=\"feasibility\">Feasibility</SelectItem>\n                      <SelectItem value=\"viability\">Viability</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"priority\">Priority (1-10)</Label>\n                  <Select\n                    value={String(newAssumption.priority)}\n                    onValueChange={(value) => setNewAssumption({...newAssumption, priority: parseInt(value)})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"1\">1 - Critical (test first)</SelectItem>\n                      <SelectItem value=\"2\">2 - Critical</SelectItem>\n                      <SelectItem value=\"3\">3 - Critical</SelectItem>\n                      <SelectItem value=\"4\">4 - Important</SelectItem>\n                      <SelectItem value=\"5\">5 - Important</SelectItem>\n                      <SelectItem value=\"6\">6 - Important</SelectItem>\n                      <SelectItem value=\"7\">7 - Important</SelectItem>\n                      <SelectItem value=\"8\">8 - Nice to have</SelectItem>\n                      <SelectItem value=\"9\">9 - Nice to have</SelectItem>\n                      <SelectItem value=\"10\">10 - Nice to have</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div>\n                  <Label htmlFor=\"source\">Source (BMC/VPC)</Label>\n                  <Select\n                    value={newAssumption.source}\n                    onValueChange={(value) => setNewAssumption({...newAssumption, source: value})}\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select source\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Value Propositions\">Value Propositions</SelectItem>\n                      <SelectItem value=\"Customer Segments\">Customer Segments</SelectItem>\n                      <SelectItem value=\"Channels\">Channels</SelectItem>\n                      <SelectItem value=\"Customer Relationships\">Customer Relationships</SelectItem>\n                      <SelectItem value=\"Revenue Streams\">Revenue Streams</SelectItem>\n                      <SelectItem value=\"Key Resources\">Key Resources</SelectItem>\n                      <SelectItem value=\"Key Activities\">Key Activities</SelectItem>\n                      <SelectItem value=\"Key Partners\">Key Partners</SelectItem>\n                      <SelectItem value=\"Cost Structure\">Cost Structure</SelectItem>\n                      <SelectItem value=\"Customer Jobs\">Customer Jobs</SelectItem>\n                      <SelectItem value=\"Customer Pains\">Customer Pains</SelectItem>\n                      <SelectItem value=\"Customer Gains\">Customer Gains</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setIsCreateDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleCreateAssumption} disabled={!newAssumption.statement.trim() || isSubmitting}>\n                Add Assumption\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {(projectsError || error) && (\n        <div role=\"alert\" className=\"rounded-lg border border-destructive/40 bg-destructive/10 p-4 text-sm text-destructive\">\n          {projectsError?.message || error}\n        </div>\n      )}\n\n      {/* Main Content */}\n      <Tabs defaultValue=\"matrix\" className=\"space-y-6\">\n        <TabsList>\n          <TabsTrigger value=\"matrix\">Prioritization Matrix</TabsTrigger>\n          <TabsTrigger value=\"list\">Assumption List</TabsTrigger>\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n        </TabsList>\n\n        {/* MATRIX VIEW - Default */}\n        <TabsContent value=\"matrix\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Assumption Prioritization Matrix</CardTitle>\n              <CardDescription>\n                Focus on the <span className=\"text-red-600 font-medium\">Test First</span> quadrant:\n                critical assumptions with little evidence\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {/* Matrix Labels - Top */}\n              <div className=\"flex justify-center mb-2\">\n                <div className=\"flex items-center gap-8 text-sm\">\n                  <span className=\"text-muted-foreground\">Little Evidence</span>\n                  <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-muted-foreground\">Strong Evidence</span>\n                </div>\n              </div>\n\n              {/* 2x2 Matrix Grid */}\n              <div className=\"grid grid-cols-2 gap-4 h-[500px]\">\n                {/* Top Left - Test First (High criticality, low evidence) */}\n                <QuadrantCard\n                  quadrant=\"test-first\"\n                  assumptions={quadrants.testFirst}\n                  title=\"Test First\"\n                />\n\n                {/* Top Right - Validated (High criticality, high evidence) */}\n                <QuadrantCard\n                  quadrant=\"validated\"\n                  assumptions={quadrants.validated}\n                  title=\"Validated\"\n                />\n\n                {/* Bottom Left - Park (Low criticality, low evidence) */}\n                <QuadrantCard\n                  quadrant=\"park\"\n                  assumptions={quadrants.park}\n                  title=\"Park\"\n                />\n\n                {/* Bottom Right - Deprioritize (Low criticality, high evidence) */}\n                <QuadrantCard\n                  quadrant=\"deprioritize\"\n                  assumptions={quadrants.deprioritize}\n                  title=\"Deprioritize\"\n                />\n              </div>\n\n              {/* Matrix Labels - Side */}\n              <div className=\"flex justify-between mt-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertTriangle className=\"h-4 w-4\" />\n                  <span>High Criticality (top row)</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span>Low Criticality (bottom row)</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* LIST VIEW */}\n        <TabsContent value=\"list\" className=\"space-y-6\">\n          {/* Category Filter */}\n          <div className=\"flex gap-2\">\n            <Button\n              variant={selectedCategory === 'all' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setSelectedCategory('all')}\n            >\n              All ({assumptions.length})\n            </Button>\n            {Object.entries(categoryConfig).map(([category, config]) => {\n              const count = assumptions.filter(a => a.category === category).length\n              const Icon = categoryIcons[category as AssumptionCategory]\n              return (\n                <Button\n                  key={category}\n                  variant={selectedCategory === category ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setSelectedCategory(category)}\n                >\n                  <Icon className=\"h-4 w-4 mr-1\" />\n                  {config.label} ({count})\n                </Button>\n              )\n            })}\n          </div>\n\n          {/* Assumption Cards */}\n          {isLoading ? (\n            <Card>\n              <CardContent className=\"p-6 text-sm text-muted-foreground\">\n                Loading assumptions...\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-4\">\n              {filteredAssumptions.map((assumption) => (\n                <AssumptionCard key={assumption.id} assumption={assumption} />\n              ))}\n              {!filteredAssumptions.length && (\n                <Card>\n                  <CardContent className=\"p-6 text-center text-sm text-muted-foreground\">\n                    <Target className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    No assumptions found. Add your first assumption to get started.\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          )}\n        </TabsContent>\n\n        {/* ANALYTICS VIEW */}\n        <TabsContent value=\"analytics\" className=\"space-y-6\">\n          <div className=\"grid gap-6 md:grid-cols-4\">\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Total Assumptions</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{analytics.total}</div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Across all business areas\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Test First</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {analytics.testFirst}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Need immediate testing\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Validated</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {analytics.validated}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Assumptions validated\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Validation Rate</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {analytics.validationRate}%\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Of all assumptions\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Category breakdown */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Assumptions by Category</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid gap-4 md:grid-cols-3\">\n                {Object.entries(categoryConfig).map(([category, config]) => {\n                  const categoryAssumptions = assumptions.filter(a => a.category === category)\n                  const count = categoryAssumptions.length\n                  // Test First: priority 1-3 (critical) with no/weak evidence\n                  const testFirst = categoryAssumptions.filter(a =>\n                    a.priority <= 3 &&\n                    (a.evidence_strength === 'none' || a.evidence_strength === 'weak' || !a.evidence_strength)\n                  ).length\n                  const Icon = categoryIcons[category as AssumptionCategory]\n\n                  return (\n                    <Card key={category}>\n                      <CardContent className=\"pt-6\">\n                        <div className=\"flex items-center gap-3 mb-3\">\n                          <div className={`p-2 rounded-lg ${config.color}`}>\n                            <Icon className=\"h-5 w-5\" />\n                          </div>\n                          <div>\n                            <p className=\"font-semibold\">{config.label}</p>\n                            <p className=\"text-xs text-muted-foreground\">{config.description}</p>\n                          </div>\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span>Total: {count}</span>\n                          <span className=\"text-red-600\">Test First: {testFirst}</span>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )\n                })}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n\n// =============================================================================\n// Sub-Components\n// =============================================================================\n\nfunction QuadrantCard({\n  quadrant,\n  assumptions,\n  title\n}: {\n  quadrant: keyof typeof quadrantConfig\n  assumptions: Assumption[]\n  title: string\n}) {\n  const config = quadrantConfig[quadrant]\n\n  return (\n    <div className={`border-2 ${config.color} p-4 rounded-lg flex flex-col`}>\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className={`font-semibold ${config.textColor}`}>{title}</h3>\n        <Badge className={config.badgeColor}>\n          {assumptions.length}\n        </Badge>\n      </div>\n      <p className=\"text-xs text-muted-foreground mb-2\">{config.description}</p>\n      <p className=\"text-xs font-medium mb-3\">{config.action}</p>\n\n      <ScrollArea className=\"flex-1\">\n        <div className=\"space-y-2\">\n          {assumptions.map(assumption => {\n            const testCount = assumption.test_results?.length || 0\n            return (\n              <div\n                key={assumption.id}\n                className=\"p-2 bg-white rounded border text-xs hover:shadow-sm transition-shadow\"\n              >\n                <div className=\"flex items-center gap-1 mb-1\">\n                  {quadrant === 'test-first' && (\n                    <AlertTriangle className=\"h-3 w-3 text-red-600\" />\n                  )}\n                  {quadrant === 'validated' && (\n                    <CheckCircle className=\"h-3 w-3 text-green-600\" />\n                  )}\n                  <Badge className={getCategoryConfig(assumption.category).color} variant=\"outline\">\n                    {getCategoryConfig(assumption.category).label}\n                  </Badge>\n                  <span className=\"text-muted-foreground\">P{assumption.priority}</span>\n                  {/* Evidence strength indicator */}\n                  <EvidenceStrengthIndicator\n                    strength={assumption.evidence_strength || 'none'}\n                    size=\"sm\"\n                    showDescription\n                  />\n                  {/* Test count */}\n                  {testCount > 0 && (\n                    <span className=\"flex items-center gap-0.5 text-muted-foreground\">\n                      <FlaskConical className=\"h-2.5 w-2.5\" />\n                      {testCount}\n                    </span>\n                  )}\n                </div>\n                <p className=\"line-clamp-2\">{assumption.statement}</p>\n              </div>\n            )\n          })}\n          {assumptions.length === 0 && (\n            <p className=\"text-xs text-muted-foreground text-center py-4\">\n              No assumptions in this quadrant\n            </p>\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  )\n}\n\nfunction AssumptionCard({ assumption }: { assumption: Assumption }) {\n  const categoryInfo = getCategoryConfig(assumption.category)\n  const CategoryIcon = getCategoryIcon(assumption.category)\n  const StatusIcon = getStatusIcon(assumption.status)\n\n  // Count of test results\n  const testCount = assumption.test_results?.length || 0\n\n  return (\n    <Card className=\"hover:shadow-md transition-shadow\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1 space-y-3\">\n            {/* Badges row */}\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <Badge className={categoryInfo.color}>\n                <CategoryIcon className=\"h-3 w-3 mr-1\" />\n                {categoryInfo.label}\n              </Badge>\n              <Badge className={getPriorityColor(assumption.priority)}>\n                P{assumption.priority} - {getPriorityLabel(assumption.priority)}\n              </Badge>\n              {/* Evidence strength indicator */}\n              <div className=\"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-muted text-xs\">\n                <EvidenceStrengthIndicator\n                  strength={assumption.evidence_strength || 'none'}\n                  size=\"sm\"\n                />\n                <span className=\"text-muted-foreground\">\n                  {assumption.evidence_strength\n                    ? evidenceStrengthConfig[assumption.evidence_strength]?.label\n                    : 'No Evidence'}\n                </span>\n              </div>\n              <Badge className={getStatusConfig(assumption.status).color}>\n                <StatusIcon className=\"h-3 w-3 mr-1\" />\n                {getStatusConfig(assumption.status).label}\n              </Badge>\n              {/* Test results count badge */}\n              {testCount > 0 && (\n                <Badge variant=\"outline\" className=\"gap-1\">\n                  <FlaskConical className=\"h-3 w-3\" />\n                  {testCount} test{testCount !== 1 ? 's' : ''}\n                </Badge>\n              )}\n            </div>\n\n            {/* Statement */}\n            <p className=\"text-sm leading-relaxed\">{assumption.statement}</p>\n\n            {/* Evidence Needed (if available) */}\n            {assumption.evidence_needed && (\n              <div className=\"flex items-start gap-2 p-3 rounded-lg bg-muted/50 border border-dashed\">\n                <FileText className=\"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1\">\n                    Evidence Needed\n                  </p>\n                  <p className=\"text-sm text-foreground\">{assumption.evidence_needed}</p>\n                </div>\n              </div>\n            )}\n\n            {/* Metadata row */}\n            <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n              <span>Source: {assumption.source || 'Not specified'}</span>\n              <span>Created: {assumption.created_at ? new Date(assumption.created_at).toLocaleDateString() : 'N/A'}</span>\n            </div>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" size=\"sm\">\n              <Beaker className=\"h-3 w-3 mr-1\" />\n              Test\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default AssumptionMap\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/CanvasesGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/EvidenceStrengthIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/ExperimentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/ExperimentCardForm.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":273,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[9282,9378],"text":"\n              What action will you take if the test doesn&apos;t meet success criteria?\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[9282,9378],"text":"\n              What action will you take if the test doesn&lsquo;t meet success criteria?\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[9282,9378],"text":"\n              What action will you take if the test doesn&#39;t meet success criteria?\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[9282,9378],"text":"\n              What action will you take if the test doesn&rsquo;t meet success criteria?\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ExperimentCardForm Component\n *\n * Dialog form for creating and editing Strategyzer experiment cards\n * with validation, linked assumption selection, and cost tracking.\n *\n * @story US-F06\n */\n\"use client\"\n\nimport React, { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue\n} from '@/components/ui/select'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle\n} from '@/components/ui/dialog'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport {\n  type ExperimentMethod,\n  type ExpectedOutcome,\n  type EvidenceLevel,\n  type Assumption,\n  experimentMethodConfig,\n  outcomeConfig,\n  evidenceLevelConfig\n} from './types'\n\nexport interface ExperimentCardFormData {\n  hypothesis: string\n  testMethod: ExperimentMethod\n  metric: string\n  successCriteria: string\n  expectedOutcome: ExpectedOutcome\n  costTime: string\n  costMoney: number | null\n  evidenceStrength: EvidenceLevel\n  assumptionId: string | null\n}\n\ninterface ExperimentCardFormProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onSubmit: (data: ExperimentCardFormData) => void\n  initialData?: Partial<ExperimentCardFormData>\n  assumptions?: Assumption[]\n  isSubmitting?: boolean\n  mode?: 'create' | 'edit'\n}\n\nconst defaultFormData: ExperimentCardFormData = {\n  hypothesis: '',\n  testMethod: 'interview',\n  metric: '',\n  successCriteria: '',\n  expectedOutcome: 'iterate',\n  costTime: '',\n  costMoney: null,\n  evidenceStrength: 'medium',\n  assumptionId: null\n}\n\nexport function ExperimentCardForm({\n  open,\n  onOpenChange,\n  onSubmit,\n  initialData,\n  assumptions = [],\n  isSubmitting = false,\n  mode = 'create'\n}: ExperimentCardFormProps) {\n  const [formData, setFormData] = useState<ExperimentCardFormData>({\n    ...defaultFormData,\n    ...initialData\n  })\n\n  const [errors, setErrors] = useState<Partial<Record<keyof ExperimentCardFormData, string>>>({})\n\n  const validate = (): boolean => {\n    const newErrors: Partial<Record<keyof ExperimentCardFormData, string>> = {}\n\n    if (!formData.hypothesis.trim()) {\n      newErrors.hypothesis = 'Hypothesis is required'\n    } else if (formData.hypothesis.length < 20) {\n      newErrors.hypothesis = 'Hypothesis should be more specific (at least 20 characters)'\n    }\n\n    if (!formData.metric.trim()) {\n      newErrors.metric = 'Metric is required - what will you measure?'\n    }\n\n    if (!formData.successCriteria.trim()) {\n      newErrors.successCriteria = 'Success criteria is required - how will you know if it passed?'\n    }\n\n    if (!formData.costTime.trim()) {\n      newErrors.costTime = 'Time estimate is required'\n    }\n\n    setErrors(newErrors)\n    return Object.keys(newErrors).length === 0\n  }\n\n  const handleSubmit = () => {\n    if (validate()) {\n      onSubmit(formData)\n    }\n  }\n\n  const updateField = <K extends keyof ExperimentCardFormData>(\n    field: K,\n    value: ExperimentCardFormData[K]\n  ) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n    // Clear error when field is updated\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: undefined }))\n    }\n  }\n\n  // Auto-suggest evidence strength based on test method\n  const handleMethodChange = (method: ExperimentMethod) => {\n    updateField('testMethod', method)\n    const methodConfig = experimentMethodConfig[method]\n    const suggestedStrength = (methodConfig?.evidenceStrength || 'weak') as EvidenceLevel\n    updateField('evidenceStrength', suggestedStrength)\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>\n            {mode === 'create' ? 'Create Experiment Card' : 'Edit Experiment Card'}\n          </DialogTitle>\n          <DialogDescription>\n            Design a test to validate your assumption using the Strategyzer format\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Link to Assumption (optional) */}\n          {assumptions.length > 0 && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"assumptionId\">Link to Assumption (optional)</Label>\n              <Select\n                value={formData.assumptionId || 'none'}\n                onValueChange={(value) => updateField('assumptionId', value === 'none' ? null : value)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select an assumption to test\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"none\">No linked assumption</SelectItem>\n                  {assumptions.map(assumption => (\n                    <SelectItem key={assumption.id} value={assumption.id}>\n                      {assumption.statement.substring(0, 60)}...\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <p className=\"text-xs text-muted-foreground\">\n                Linking helps track which assumptions are being tested\n              </p>\n            </div>\n          )}\n\n          {/* Hypothesis */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"hypothesis\" className=\"flex items-center gap-2\">\n              Hypothesis <span className=\"text-red-500\">*</span>\n            </Label>\n            <Textarea\n              id=\"hypothesis\"\n              placeholder=\"We believe that [target customer] will [expected behavior] because [reason]...\"\n              value={formData.hypothesis}\n              onChange={(e) => updateField('hypothesis', e.target.value)}\n              className={`min-h-24 ${errors.hypothesis ? 'border-red-500' : ''}`}\n            />\n            {errors.hypothesis && (\n              <p className=\"text-xs text-red-500\">{errors.hypothesis}</p>\n            )}\n          </div>\n\n          {/* Test Method */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"testMethod\">Test Method</Label>\n            <Select\n              value={formData.testMethod}\n              onValueChange={handleMethodChange}\n            >\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {Object.entries(experimentMethodConfig).map(([method, config]) => (\n                  <SelectItem key={method} value={method}>\n                    {config.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Metric & Success Criteria - Side by Side */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"metric\" className=\"flex items-center gap-2\">\n                Metric <span className=\"text-red-500\">*</span>\n              </Label>\n              <Input\n                id=\"metric\"\n                placeholder=\"e.g., Conversion rate, NPS score\"\n                value={formData.metric}\n                onChange={(e) => updateField('metric', e.target.value)}\n                className={errors.metric ? 'border-red-500' : ''}\n              />\n              {errors.metric && (\n                <p className=\"text-xs text-red-500\">{errors.metric}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"successCriteria\" className=\"flex items-center gap-2\">\n                Success Criteria <span className=\"text-red-500\">*</span>\n              </Label>\n              <Input\n                id=\"successCriteria\"\n                placeholder=\"e.g., > 3% conversion, NPS > 40\"\n                value={formData.successCriteria}\n                onChange={(e) => updateField('successCriteria', e.target.value)}\n                className={errors.successCriteria ? 'border-red-500' : ''}\n              />\n              {errors.successCriteria && (\n                <p className=\"text-xs text-red-500\">{errors.successCriteria}</p>\n              )}\n            </div>\n          </div>\n\n          {/* Expected Outcome */}\n          <div className=\"space-y-3\">\n            <Label>Expected Outcome if Test Fails</Label>\n            <RadioGroup\n              value={formData.expectedOutcome}\n              onValueChange={(value: ExpectedOutcome) => updateField('expectedOutcome', value)}\n              className=\"flex gap-4\"\n            >\n              {Object.entries(outcomeConfig).map(([outcome, config]) => (\n                <div key={outcome} className=\"flex items-center space-x-2\">\n                  <RadioGroupItem value={outcome} id={`outcome-${outcome}`} />\n                  <Label htmlFor={`outcome-${outcome}`} className=\"cursor-pointer\">\n                    <Badge className={config.color}>{config.label}</Badge>\n                  </Label>\n                </div>\n              ))}\n            </RadioGroup>\n            <p className=\"text-xs text-muted-foreground\">\n              What action will you take if the test doesn't meet success criteria?\n            </p>\n          </div>\n\n          {/* Evidence Strength */}\n          <div className=\"space-y-2\">\n            <Label>Expected Evidence Strength</Label>\n            <div className=\"flex gap-2\">\n              {Object.entries(evidenceLevelConfig).map(([level, config]) => (\n                <Button\n                  key={level}\n                  type=\"button\"\n                  variant={formData.evidenceStrength === level ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => updateField('evidenceStrength', level as EvidenceLevel)}\n                  className={formData.evidenceStrength === level ? '' : config.color}\n                >\n                  {config.label}\n                </Button>\n              ))}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Based on test method: {experimentMethodConfig[formData.testMethod]?.label || formData.testMethod || 'Unknown'}\n            </p>\n          </div>\n\n          {/* Cost & Time */}\n          <Card>\n            <CardContent className=\"pt-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"costTime\" className=\"flex items-center gap-2\">\n                    Time Investment <span className=\"text-red-500\">*</span>\n                  </Label>\n                  <Input\n                    id=\"costTime\"\n                    placeholder=\"e.g., 2 weeks, 3 days\"\n                    value={formData.costTime}\n                    onChange={(e) => updateField('costTime', e.target.value)}\n                    className={errors.costTime ? 'border-red-500' : ''}\n                  />\n                  {errors.costTime && (\n                    <p className=\"text-xs text-red-500\">{errors.costTime}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"costMoney\">Budget ($)</Label>\n                  <Input\n                    id=\"costMoney\"\n                    type=\"number\"\n                    placeholder=\"e.g., 500\"\n                    value={formData.costMoney ?? ''}\n                    onChange={(e) => updateField('costMoney', e.target.value ? Number(e.target.value) : null)}\n                  />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting}>\n            {isSubmitting ? 'Saving...' : mode === 'create' ? 'Create Experiment Card' : 'Save Changes'}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default ExperimentCardForm\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/ExperimentCardsGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/strategyzer/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":1,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/ui/sidebar.tsx:665:26\n  663 |   // Random width between 50 to 90%.\n  664 |   const width = React.useMemo(() => {\n> 665 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  666 |   }, [])\n  667 |\n  668 |   return (","line":665,"column":26,"nodeType":null,"endLine":665,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground shadow-xl border-r border-sidebar-border [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-all duration-150 ease-in-out hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-primary active:text-sidebar-primary-foreground active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring transition-all duration-150 ease-in-out hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-primary active:text-sidebar-primary-foreground active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/upgrade/PlanBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/upgrade/TrialStatusCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/upgrade/UpgradeWelcomeModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/components/upgrade/UpgradeWelcomeModal.tsx:59:7\n  57 |\n  58 |     if (isFromUpgrade || isFromSuccessPage || forceShow) {\n> 59 |       setOpen(true);\n     |       ^^^^^^^ Avoid calling setState() directly within an effect\n  60 |\n  61 |       // Mark as welcomed\n  62 |       welcomedUsers[userId] = new Date().toISOString();","line":59,"column":7,"nodeType":null,"endLine":59,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Upgrade Welcome Modal\n *\n * Shows a congratulations modal to users who just upgraded from trial.\n * Uses localStorage to track if the modal has been shown.\n *\n * @story US-FT04\n */\n\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRoleInfo } from '@/lib/auth/hooks';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { CheckCircle2, ArrowRight, Rocket, Crown, Sparkles } from 'lucide-react';\nimport Link from 'next/link';\nimport confetti from 'canvas-confetti';\n\nconst STORAGE_KEY = 'startupai_upgrade_welcomed';\n\ninterface UpgradeWelcomeModalProps {\n  /** Force show the modal (for testing) */\n  forceShow?: boolean;\n}\n\nexport function UpgradeWelcomeModal({ forceShow = false }: UpgradeWelcomeModalProps) {\n  const [open, setOpen] = useState(false);\n  const { role, loading, isTrial, trialReadonly, userId } = useRoleInfo();\n\n  useEffect(() => {\n    if (loading || !userId) return;\n\n    // Check if user just upgraded (is not trial anymore)\n    const isPaidUser = (role === 'founder' || role === 'consultant') && !isTrial;\n\n    if (!isPaidUser && !forceShow) return;\n\n    // Check if we've already shown the welcome modal for this user\n    const welcomedUsers = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');\n\n    if (welcomedUsers[userId] && !forceShow) return;\n\n    // Check if the user came from the upgrade success page (recently upgraded)\n    const urlParams = new URLSearchParams(window.location.search);\n    const isFromUpgrade = urlParams.get('upgraded') === 'true' || forceShow;\n\n    // Also check referrer for upgrade success page\n    const referrer = document.referrer;\n    const isFromSuccessPage = referrer.includes('/upgrade/success');\n\n    if (isFromUpgrade || isFromSuccessPage || forceShow) {\n      setOpen(true);\n\n      // Mark as welcomed\n      welcomedUsers[userId] = new Date().toISOString();\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(welcomedUsers));\n\n      // Fire confetti!\n      setTimeout(() => {\n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 },\n        });\n      }, 300);\n    }\n  }, [loading, userId, role, isTrial, forceShow]);\n\n  const planName = role === 'consultant' ? 'Consultant' : 'Founder';\n  const dashboardUrl = role === 'consultant' ? '/consultant-dashboard' : '/founder-dashboard';\n\n  const features = role === 'consultant' ? [\n    'Unlimited client projects',\n    'White-label AI workflows',\n    'Full D-F-V validation for clients',\n    'Team collaboration tools',\n    'Priority support',\n  ] : [\n    'Full 5-phase D-F-V validation',\n    'AI-powered market testing',\n    'Unlimited HITL approvals',\n    'Export & sharing capabilities',\n    '5 concurrent projects',\n  ];\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-primary/20 to-primary/10\">\n            <Crown className=\"h-8 w-8 text-primary\" />\n          </div>\n          <DialogTitle className=\"text-2xl flex items-center justify-center gap-2\">\n            <Sparkles className=\"h-5 w-5 text-amber-500\" />\n            Welcome to {planName}!\n            <Sparkles className=\"h-5 w-5 text-amber-500\" />\n          </DialogTitle>\n          <DialogDescription className=\"text-base\">\n            Your upgrade is complete. All premium features are now unlocked.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"rounded-lg bg-muted/50 p-4\">\n            <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\n              <Rocket className=\"h-4 w-4\" />\n              What&apos;s Unlocked\n            </h4>\n            <ul className=\"space-y-2\">\n              {features.map((feature, index) => (\n                <li key={index} className=\"flex items-center gap-2 text-sm\">\n                  <CheckCircle2 className=\"h-4 w-4 text-green-600 flex-shrink-0\" />\n                  <span>{feature}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className=\"flex flex-col gap-2\">\n            <Button asChild size=\"lg\" className=\"w-full\">\n              <Link href={dashboardUrl} onClick={() => setOpen(false)}>\n                Go to Dashboard\n                <ArrowRight className=\"ml-2 h-4 w-4\" />\n              </Link>\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setOpen(false)}\n              className=\"text-muted-foreground\"\n            >\n              Continue where I left off\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/upgrade/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/validation/ValidationProgressTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/validation/ValidationResultsSummary.tsx","messages":[{"ruleId":"react-hooks/static-components","severity":1,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/home/chris/projects/app.startupai.site/frontend/src/components/validation/ValidationResultsSummary.tsx:184:14\n  182 |         {validationOutcome && (\n  183 |           <div className=\"flex items-start gap-3 p-4 rounded-lg bg-muted/50\">\n> 184 |             <OutcomeIcon className={`h-6 w-6 mt-0.5 ${outcomeColor}`} />\n      |              ^^^^^^^^^^^ This component is created during render\n  185 |             <div className=\"flex-1\">\n  186 |               <h4 className=\"font-semibold mb-1\">Validation Outcome</h4>\n  187 |               <p className={`text-sm ${outcomeColor}`}>{validationOutcome}</p>\n\n/home/chris/projects/app.startupai.site/frontend/src/components/validation/ValidationResultsSummary.tsx:157:23\n  155 |   }\n  156 |\n> 157 |   const OutcomeIcon = getOutcomeIcon(validationOutcome);\n      |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The component is created during render here\n  158 |   const outcomeColor = getOutcomeColor(validationOutcome);\n  159 |\n  160 |   return (","line":184,"column":14,"nodeType":null,"endLine":184,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ValidationResultsSummary Component\n *\n * Displays a summary of the latest AI validation report for a project.\n * Shows validation outcome, evidence summary, pivot recommendations, and next steps.\n *\n * @story US-F06\n */\n\n'use client';\n\nimport * as React from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { useLatestValidationReport } from '@/hooks/useProjectReports';\nimport Link from 'next/link';\nimport {\n  Brain,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  ArrowRight,\n  RefreshCw,\n  FileText,\n  Target,\n  TrendingUp,\n} from 'lucide-react';\n\ninterface ValidationResultsSummaryProps {\n  projectId: string | undefined;\n}\n\nfunction getOutcomeColor(outcome: string | null): string {\n  if (!outcome) return 'text-muted-foreground';\n  const lower = outcome.toLowerCase();\n  if (lower.includes('proceed') || lower.includes('valid') || lower.includes('success')) {\n    return 'text-green-600';\n  }\n  if (lower.includes('pivot') || lower.includes('iterate') || lower.includes('adjust')) {\n    return 'text-yellow-600';\n  }\n  if (lower.includes('kill') || lower.includes('stop') || lower.includes('fail')) {\n    return 'text-red-600';\n  }\n  return 'text-blue-600';\n}\n\nfunction getOutcomeIcon(outcome: string | null) {\n  if (!outcome) return Brain;\n  const lower = outcome.toLowerCase();\n  if (lower.includes('proceed') || lower.includes('valid') || lower.includes('success')) {\n    return CheckCircle;\n  }\n  if (lower.includes('pivot') || lower.includes('iterate')) {\n    return AlertTriangle;\n  }\n  if (lower.includes('kill') || lower.includes('stop') || lower.includes('fail')) {\n    return XCircle;\n  }\n  return Target;\n}\n\nfunction getPivotBadgeVariant(pivot: string | null): 'default' | 'secondary' | 'destructive' | 'outline' {\n  if (!pivot || pivot === 'none' || pivot === 'NONE') return 'outline';\n  if (pivot.includes('kill') || pivot.includes('KILL')) return 'destructive';\n  return 'secondary';\n}\n\nexport function ValidationResultsSummary({ projectId }: ValidationResultsSummaryProps) {\n  const {\n    report,\n    validationOutcome,\n    evidenceSummary,\n    pivotRecommendation,\n    nextSteps,\n    qaReport,\n    isLoading,\n    error,\n    refetch,\n  } = useLatestValidationReport(projectId);\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Brain className=\"h-5 w-5 text-blue-600\" />\n            AI Validation Results\n          </CardTitle>\n          <CardDescription>Loading latest analysis...</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <Skeleton className=\"h-4 w-3/4\" />\n            <Skeleton className=\"h-4 w-full\" />\n            <Skeleton className=\"h-4 w-2/3\" />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Brain className=\"h-5 w-5 text-blue-600\" />\n            AI Validation Results\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-6\">\n            <AlertTriangle className=\"h-8 w-8 text-red-500 mx-auto mb-2\" />\n            <p className=\"text-sm text-muted-foreground mb-4\">Failed to load validation results</p>\n            <Button variant=\"outline\" size=\"sm\" onClick={() => refetch()}>\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!report) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Brain className=\"h-5 w-5 text-blue-600\" />\n            AI Validation Results\n          </CardTitle>\n          <CardDescription>No analysis results yet</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-center py-6\">\n            <Brain className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold mb-2\">No Validation Results Yet</h3>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              Start a new project to get AI-powered validation insights.\n            </p>\n            <Link href=\"/onboarding/founder\">\n              <Button>\n                <Target className=\"h-4 w-4 mr-2\" />\n                Start New Project\n              </Button>\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const OutcomeIcon = getOutcomeIcon(validationOutcome);\n  const outcomeColor = getOutcomeColor(validationOutcome);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Brain className=\"h-5 w-5 text-blue-600\" />\n              AI Validation Results\n            </CardTitle>\n            <CardDescription>\n              Latest analysis from {new Date(report.generatedAt).toLocaleDateString()}\n            </CardDescription>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => refetch()}>\n              <RefreshCw className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Validation Outcome */}\n        {validationOutcome && (\n          <div className=\"flex items-start gap-3 p-4 rounded-lg bg-muted/50\">\n            <OutcomeIcon className={`h-6 w-6 mt-0.5 ${outcomeColor}`} />\n            <div className=\"flex-1\">\n              <h4 className=\"font-semibold mb-1\">Validation Outcome</h4>\n              <p className={`text-sm ${outcomeColor}`}>{validationOutcome}</p>\n            </div>\n            {pivotRecommendation && pivotRecommendation !== 'none' && (\n              <Badge variant={getPivotBadgeVariant(pivotRecommendation)}>\n                {pivotRecommendation.replace('_', ' ')}\n              </Badge>\n            )}\n          </div>\n        )}\n\n        {/* Evidence Summary */}\n        {evidenceSummary && (\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-semibold flex items-center gap-2\">\n              <FileText className=\"h-4 w-4 text-muted-foreground\" />\n              Evidence Summary\n            </h4>\n            <p className=\"text-sm text-muted-foreground leading-relaxed\">\n              {evidenceSummary}\n            </p>\n          </div>\n        )}\n\n        {/* QA Metrics */}\n        {qaReport && (qaReport.framework_compliance || qaReport.logical_consistency || qaReport.completeness) && (\n          <div className=\"grid grid-cols-3 gap-4\">\n            {qaReport.framework_compliance !== undefined && (\n              <div className=\"text-center p-3 rounded-lg bg-muted/30\">\n                <p className=\"text-2xl font-bold text-blue-600\">\n                  {Math.round(qaReport.framework_compliance * 100)}%\n                </p>\n                <p className=\"text-xs text-muted-foreground\">Framework Compliance</p>\n              </div>\n            )}\n            {qaReport.logical_consistency !== undefined && (\n              <div className=\"text-center p-3 rounded-lg bg-muted/30\">\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {Math.round(qaReport.logical_consistency * 100)}%\n                </p>\n                <p className=\"text-xs text-muted-foreground\">Logical Consistency</p>\n              </div>\n            )}\n            {qaReport.completeness !== undefined && (\n              <div className=\"text-center p-3 rounded-lg bg-muted/30\">\n                <p className=\"text-2xl font-bold text-purple-600\">\n                  {Math.round(qaReport.completeness * 100)}%\n                </p>\n                <p className=\"text-xs text-muted-foreground\">Completeness</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Next Steps */}\n        {nextSteps && nextSteps.length > 0 && (\n          <div className=\"space-y-3\">\n            <h4 className=\"text-sm font-semibold flex items-center gap-2\">\n              <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n              Recommended Next Steps\n            </h4>\n            <div className=\"space-y-2\">\n              {nextSteps.slice(0, 4).map((step, index) => (\n                <div\n                  key={index}\n                  className=\"flex items-start gap-2 p-2 rounded border bg-background\"\n                >\n                  <ArrowRight className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                  <span className=\"text-sm\">{step}</span>\n                </div>\n              ))}\n              {nextSteps.length > 4 && (\n                <p className=\"text-xs text-muted-foreground\">\n                  +{nextSteps.length - 4} more steps\n                </p>\n              )}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/validation/__tests__/ValidationProgressTimeline.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/viability/ViabilityMetricsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/vpc/VPCFitBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/vpc/VPCReportViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/vpc/VPCSummaryCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/vpc/VPCWithSignals.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/components/vpc/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/contexts/ImpersonationContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/evidence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/experiments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/hypotheses.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/projects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/reports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/queries/users.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/repositories/trialUsage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/ad-budgets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/ad-campaigns.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/ad-metrics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/ad-performance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/ad-platforms.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/admin-audit-log.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/admin-sessions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/approval-history.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/approval-preferences.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/approval-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/business-model-canvas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/consultant-clients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/consultant-onboarding-sessions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/consultant-profiles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/copy-banks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/crewai-validation-states.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/entrepreneur-briefs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/evidence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/experiments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/feature-flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/field-mappings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/founders-briefs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/gate-policies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/hitl-requests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/hypotheses.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/imports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/integrations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/landing-page-variants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/legacy-clients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/login-history.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/mfa-recovery-codes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/notification-preferences.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/onboarding-sessions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/projects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/public-activity-log.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/reports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/security-audit-log.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/sync-history.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/usage-quota.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/user-preferences.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/user-sessions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/users.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/validation-progress.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/validation-runs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/schema/value-proposition-canvas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/db/seed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/__tests__/useOnboardingRecovery.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useApprovals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useBMC.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useClientValidationProgress.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchClientProgress'. Either include it or remove the dependency array.","line":163,"column":6,"nodeType":"ArrayExpression","endLine":163,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [user, authLoading, fetchClientProgress]","fix":{"range":[4851,4870],"text":"[user, authLoading, fetchClientProgress]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * @story US-C03\n */\n/**\n * useClientValidationProgress Hook\n *\n * Fetches validation progress for all clients of a consultant.\n * Joins clients with their projects and reports to show validation status.\n */\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { useAuth } from '@/lib/auth/hooks';\n\n// Validation progress for a single client\nexport interface ClientValidationProgress {\n  clientId: string;\n  clientName: string;\n  clientEmail: string;\n  company: string | null;\n  // Project info\n  projectId: string | null;\n  projectName: string | null;\n  // Validation status\n  currentPhase: 'IDEATION' | 'DESIRABILITY' | 'FEASIBILITY' | 'VIABILITY' | 'VALIDATED' | null;\n  gateStatus: 'Pending' | 'Passed' | 'Failed' | null;\n  // Evidence metrics\n  evidenceCount: number;\n  evidenceQuality: number;\n  // Report status\n  hasReport: boolean;\n  reportId: string | null;\n  reportOutcome: string | null;\n  pivotRecommendation: string | null;\n  // Timestamps\n  lastActivity: string;\n  createdAt: string;\n}\n\nexport interface UseClientValidationProgressResult {\n  clients: ClientValidationProgress[];\n  isLoading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport function useClientValidationProgress(): UseClientValidationProgressResult {\n  const { user, loading: authLoading } = useAuth();\n  const [clients, setClients] = useState<ClientValidationProgress[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const supabase = createClient();\n\n  const fetchClientProgress = async () => {\n    if (authLoading) return;\n\n    if (!user) {\n      setClients([]);\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n\n      // 1. Fetch clients (user_profiles linked to this consultant)\n      const { data: clientsData, error: clientsError } = await supabase\n        .from('user_profiles')\n        .select(`\n          id,\n          email,\n          full_name,\n          company,\n          created_at,\n          updated_at\n        `)\n        .eq('consultant_id', user.id)\n        .order('updated_at', { ascending: false });\n\n      if (clientsError) throw clientsError;\n\n      if (!clientsData || clientsData.length === 0) {\n        setClients([]);\n        setIsLoading(false);\n        return;\n      }\n\n      // 2. For each client, fetch their projects and reports\n      const clientProgress: ClientValidationProgress[] = await Promise.all(\n        clientsData.map(async (client) => {\n          // Fetch client's projects\n          const { data: projects } = await supabase\n            .from('projects')\n            .select(`\n              id,\n              name,\n              stage,\n              gate_status,\n              evidence_quality,\n              evidence_count,\n              updated_at\n            `)\n            .eq('user_id', client.id)\n            .order('updated_at', { ascending: false })\n            .limit(1);\n\n          const project = projects?.[0] || null;\n\n          // Fetch latest validation report for the project\n          let report: { id: string; validation_outcome: string | null; pivot_recommendation: string | null; created_at: string } | null = null;\n          if (project) {\n            const { data: reports } = await supabase\n              .from('reports')\n              .select(`\n                id,\n                validation_outcome,\n                pivot_recommendation,\n                created_at\n              `)\n              .eq('project_id', project.id)\n              .order('created_at', { ascending: false })\n              .limit(1);\n\n            report = reports?.[0] || null;\n          }\n\n          return {\n            clientId: client.id,\n            clientName: client.full_name || client.email,\n            clientEmail: client.email,\n            company: client.company,\n            projectId: project?.id || null,\n            projectName: project?.name || null,\n            currentPhase: project?.stage || null,\n            gateStatus: project?.gate_status || null,\n            evidenceCount: project?.evidence_count || 0,\n            evidenceQuality: project?.evidence_quality || 0,\n            hasReport: !!report,\n            reportId: report?.id || null,\n            reportOutcome: report?.validation_outcome || null,\n            pivotRecommendation: report?.pivot_recommendation || null,\n            lastActivity: project?.updated_at || client.updated_at,\n            createdAt: client.created_at,\n          };\n        })\n      );\n\n      setClients(clientProgress);\n      setError(null);\n\n    } catch (err) {\n      console.error('[useClientValidationProgress] Error:', err);\n      setError(err as Error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchClientProgress();\n  }, [user, authLoading]);\n\n  return {\n    clients,\n    isLoading: isLoading || authLoading,\n    error,\n    refetch: fetchClientProgress,\n  };\n}\n\n/**\n * Hook to get validation progress for a specific client.\n */\nexport function useClientProgress(clientId: string | null) {\n  const { user, loading: authLoading } = useAuth();\n  const [progress, setProgress] = useState<ClientValidationProgress | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const supabase = createClient();\n\n  useEffect(() => {\n    async function fetchProgress() {\n      if (authLoading || !user || !clientId) {\n        setProgress(null);\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n\n        // Verify this client belongs to the consultant\n        const { data: client, error: clientError } = await supabase\n          .from('user_profiles')\n          .select(`\n            id,\n            email,\n            full_name,\n            company,\n            consultant_id,\n            created_at,\n            updated_at\n          `)\n          .eq('id', clientId)\n          .eq('consultant_id', user.id)\n          .single();\n\n        if (clientError || !client) {\n          throw new Error('Client not found or not authorized');\n        }\n\n        // Fetch client's project\n        const { data: projects } = await supabase\n          .from('projects')\n          .select(`\n            id,\n            name,\n            stage,\n            gate_status,\n            evidence_quality,\n            evidence_count,\n            updated_at\n          `)\n          .eq('user_id', clientId)\n          .order('updated_at', { ascending: false })\n          .limit(1);\n\n        const project = projects?.[0] || null;\n\n        // Fetch latest report\n        let report: { id: string; validation_outcome: string | null; pivot_recommendation: string | null; evidence_summary: Record<string, unknown> | null; next_steps: string[] | null; created_at: string } | null = null;\n        if (project) {\n          const { data: reports } = await supabase\n            .from('reports')\n            .select(`\n              id,\n              validation_outcome,\n              pivot_recommendation,\n              evidence_summary,\n              next_steps,\n              created_at\n            `)\n            .eq('project_id', project.id)\n            .order('created_at', { ascending: false })\n            .limit(1);\n\n          report = reports?.[0] || null;\n        }\n\n        setProgress({\n          clientId: client.id,\n          clientName: client.full_name || client.email,\n          clientEmail: client.email,\n          company: client.company,\n          projectId: project?.id || null,\n          projectName: project?.name || null,\n          currentPhase: project?.stage || null,\n          gateStatus: project?.gate_status || null,\n          evidenceCount: project?.evidence_count || 0,\n          evidenceQuality: project?.evidence_quality || 0,\n          hasReport: !!report,\n          reportId: report?.id || null,\n          reportOutcome: report?.validation_outcome || null,\n          pivotRecommendation: report?.pivot_recommendation || null,\n          lastActivity: project?.updated_at || client.updated_at,\n          createdAt: client.created_at,\n        });\n        setError(null);\n\n      } catch (err) {\n        console.error('[useClientProgress] Error:', err);\n        setError(err as Error);\n        setProgress(null);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    fetchProgress();\n  }, [user, authLoading, clientId, supabase]);\n\n  return {\n    progress,\n    isLoading: isLoading || authLoading,\n    error,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useClients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useConsultantClients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useCrewAIReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useCrewAIState.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'pollForCompletion'. Either include it or remove the dependency array.","line":457,"column":6,"nodeType":"ArrayExpression","endLine":457,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [pollForCompletion, projectId]","fix":{"range":[14772,14783],"text":"[pollForCompletion, projectId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * CrewAI State Hooks\n *\n * React hooks for fetching and managing CrewAI validation state.\n * These hooks integrate with the CrewAI types defined in @/types/crewai.ts\n *\n * @story US-F06, US-F08\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport type {\n  StartupValidationState,\n  DesirabilitySignal,\n  FeasibilitySignal,\n  ViabilitySignal,\n  Phase,\n  PivotType,\n  DesirabilityEvidence,\n  FeasibilityEvidence,\n  ViabilityEvidence,\n  CustomerProfile,\n  ValueMap,\n  RiskAxis,\n  ProblemFit,\n} from '@/types/crewai'\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface InnovationPhysicsSignals {\n  desirability: DesirabilitySignal\n  feasibility: FeasibilitySignal\n  viability: ViabilitySignal\n  phase: Phase\n  pivotRecommendation: PivotType\n}\n\nexport interface CrewAIStateOptions {\n  projectId?: string\n  autoRefresh?: boolean\n  refreshIntervalMs?: number\n}\n\nexport interface UseCrewAIStateResult {\n  validationState: Partial<StartupValidationState> | null\n  signals: InnovationPhysicsSignals | null\n  isLoading: boolean\n  error: Error | null\n  refetch: () => Promise<void>\n}\n\nexport interface UseInnovationSignalsResult {\n  signals: InnovationPhysicsSignals | null\n  desirabilityEvidence: DesirabilityEvidence | null\n  feasibilityEvidence: FeasibilityEvidence | null\n  viabilityEvidence: ViabilityEvidence | null\n  isLoading: boolean\n  error: Error | null\n  refetch: () => Promise<void>\n}\n\n// ============================================================================\n// useCrewAIState - Main hook for CrewAI validation state\n// ============================================================================\n\n/**\n * Hook to fetch and manage CrewAI validation state for a project\n *\n * @param options - Configuration options\n * @returns CrewAI validation state, signals, loading state, and error\n *\n * @example\n * ```tsx\n * const { validationState, signals, isLoading } = useCrewAIState({ projectId: 'xxx' })\n *\n * if (signals?.desirability === 'strong_commitment') {\n *   // Show success indicator\n * }\n * ```\n */\nexport function useCrewAIState(options: CrewAIStateOptions = {}): UseCrewAIStateResult {\n  const { projectId, autoRefresh = false, refreshIntervalMs = 30000 } = options\n  const supabase = useMemo(() => createClient(), [])\n\n  const [validationState, setValidationState] = useState<Partial<StartupValidationState> | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  const fetchState = useCallback(async () => {\n    if (!projectId) {\n      setValidationState(null)\n      setIsLoading(false)\n      return\n    }\n\n    try {\n      setIsLoading(true)\n      setError(null)\n\n      // Fetch the latest validation state from crewai_validation_states table\n      const { data, error: queryError } = await supabase\n        .from('crewai_validation_states')\n        .select('*')\n        .eq('project_id', projectId)\n        .order('created_at', { ascending: false })\n        .limit(1)\n        .single()\n\n      if (queryError) {\n        // If no state exists yet, that's OK - just return null\n        if (queryError.code === 'PGRST116') {\n          setValidationState(null)\n        } else {\n          throw queryError\n        }\n      } else if (data) {\n        // Map database record to StartupValidationState\n        // Note: snake_case fields from DB are kept as-is to match StartupValidationState interface\n        setValidationState({\n          // Identity\n          id: data.id,\n          project_id: data.project_id,\n          session_id: data.session_id,\n          kickoff_id: data.kickoff_id,\n          iteration: data.iteration || 1,\n\n          // Phase & Risk\n          phase: data.phase || 'ideation',\n          current_risk_axis: data.current_risk_axis || 'desirability',\n\n          // Problem/Solution Fit\n          problem_fit: data.problem_fit || 'unknown',\n          current_segment: data.current_segment,\n          current_value_prop: data.current_value_prop,\n          vpc_document_url: data.vpc_document_url,\n          bmc_document_url: data.bmc_document_url,\n\n          // Innovation Physics Signals\n          desirability_signal: data.desirability_signal || 'no_signal',\n          feasibility_signal: data.feasibility_signal || 'unknown',\n          viability_signal: data.viability_signal || 'unknown',\n\n          // Pivot Tracking\n          last_pivot_type: data.last_pivot_type || 'none',\n          pending_pivot_type: data.pending_pivot_type || 'none',\n          pivot_recommendation: data.pivot_recommendation,\n\n          // Human Approval\n          human_approval_status: data.human_approval_status || 'not_required',\n          human_comment: data.human_comment,\n          human_input_required: data.human_input_required || false,\n          human_input_reason: data.human_input_reason,\n\n          // Evidence Containers (JSONB)\n          desirability_evidence: data.desirability_evidence,\n          feasibility_evidence: data.feasibility_evidence,\n          viability_evidence: data.viability_evidence,\n\n          // VPC Data (JSONB) - Critical for VPC visualization\n          customer_profiles: data.customer_profiles || {},\n          value_maps: data.value_maps || {},\n          competitor_report: data.competitor_report,\n\n          // Assumptions\n          assumptions: data.assumptions || [],\n\n          // Desirability Artifacts\n          desirability_experiments: data.desirability_experiments || [],\n          downgrade_active: data.downgrade_active || false,\n\n          // Feasibility/Viability Artifacts\n          last_feasibility_artifact: data.last_feasibility_artifact,\n          last_viability_metrics: data.last_viability_metrics,\n\n          // QA and Governance\n          qa_reports: data.qa_reports || [],\n          current_qa_status: data.current_qa_status,\n          framework_compliance: data.framework_compliance || false,\n          logical_consistency: data.logical_consistency || false,\n          completeness: data.completeness || false,\n\n          // Service Crew Outputs\n          business_idea: data.business_idea,\n          entrepreneur_input: data.entrepreneur_input,\n          target_segments: data.target_segments || [],\n          problem_statement: data.problem_statement,\n          solution_description: data.solution_description,\n          revenue_model: data.revenue_model,\n\n          // Analysis Crew Outputs\n          segment_fit_scores: data.segment_fit_scores || {},\n          analysis_insights: data.analysis_insights || [],\n\n          // Growth Crew Outputs\n          ad_impressions: data.ad_impressions || 0,\n          ad_clicks: data.ad_clicks || 0,\n          ad_signups: data.ad_signups || 0,\n          ad_spend: data.ad_spend || 0,\n\n          // Build Crew Outputs\n          api_costs: data.api_costs || {},\n          infra_costs: data.infra_costs || {},\n          total_monthly_cost: data.total_monthly_cost || 0,\n\n          // Finance Crew Outputs\n          cac: data.cac || 0,\n          ltv: data.ltv || 0,\n          ltv_cac_ratio: data.ltv_cac_ratio || 0,\n          gross_margin: data.gross_margin || 0,\n          tam: data.tam || 0,\n\n          // Synthesis Crew Outputs\n          synthesis_confidence: data.synthesis_confidence || 0,\n          evidence_summary: data.evidence_summary,\n          final_recommendation: data.final_recommendation,\n          next_steps: data.next_steps || [],\n\n          // Budget Tracking\n          daily_spend_usd: data.daily_spend_usd || 0,\n          campaign_spend_usd: data.campaign_spend_usd || 0,\n          budget_status: data.budget_status || 'ok',\n          budget_escalation_triggered: data.budget_escalation_triggered || false,\n          budget_kill_triggered: data.budget_kill_triggered || false,\n\n          // Business Model\n          business_model_type: data.business_model_type,\n          business_model_inferred_from: data.business_model_inferred_from,\n        })\n      }\n    } catch (err) {\n      console.error('[useCrewAIState] Error fetching state:', err)\n      setError(err as Error)\n    } finally {\n      setIsLoading(false)\n    }\n  }, [projectId, supabase])\n\n  // Initial fetch\n  useEffect(() => {\n    fetchState()\n  }, [fetchState])\n\n  // Auto-refresh if enabled\n  useEffect(() => {\n    if (!autoRefresh || !projectId) return\n\n    const intervalId = setInterval(fetchState, refreshIntervalMs)\n    return () => clearInterval(intervalId)\n  }, [autoRefresh, projectId, refreshIntervalMs, fetchState])\n\n  // Derive signals from state\n  const signals = useMemo<InnovationPhysicsSignals | null>(() => {\n    if (!validationState) return null\n\n    return {\n      desirability: validationState.desirability_signal || 'no_signal',\n      feasibility: validationState.feasibility_signal || 'unknown',\n      viability: validationState.viability_signal || 'unknown',\n      phase: validationState.phase || 'ideation',\n      pivotRecommendation: validationState.pending_pivot_type || validationState.last_pivot_type || 'none',\n    }\n  }, [validationState])\n\n  return {\n    validationState,\n    signals,\n    isLoading,\n    error,\n    refetch: fetchState,\n  }\n}\n\n// ============================================================================\n// useInnovationSignals - Focused hook for displaying signals\n// ============================================================================\n\n/**\n * Hook focused on innovation physics signals for UI display\n *\n * @param projectId - Project ID to fetch signals for\n * @returns Innovation physics signals with evidence summaries\n *\n * @example\n * ```tsx\n * const { signals, desirabilityEvidence } = useInnovationSignals(projectId)\n *\n * return (\n *   <SignalBadge signal={signals.desirability} />\n * )\n * ```\n */\nexport function useInnovationSignals(projectId?: string): UseInnovationSignalsResult {\n  const { validationState, signals, isLoading, error, refetch } = useCrewAIState({ projectId })\n\n  return {\n    signals,\n    desirabilityEvidence: validationState?.desirability_evidence || null,\n    feasibilityEvidence: validationState?.feasibility_evidence || null,\n    viabilityEvidence: validationState?.viability_evidence || null,\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n// ============================================================================\n// useVPCData - Hook for Value Proposition Canvas visualization\n// ============================================================================\n\nexport interface UseVPCDataResult {\n  customerProfiles: Record<string, CustomerProfile>\n  valueMaps: Record<string, ValueMap>\n  currentSegment: string | null\n  currentValueProp: string | null\n  problemFit: ProblemFit\n  segments: string[]\n  hasData: boolean\n  isLoading: boolean\n  error: Error | null\n  refetch: () => Promise<void>\n}\n\n/**\n * Hook focused on VPC data for Value Proposition Canvas visualization\n *\n * @param projectId - Project ID to fetch VPC data for\n * @returns VPC-specific data structures for canvas rendering\n *\n * @example\n * ```tsx\n * const { customerProfiles, valueMaps, currentSegment } = useVPCData(projectId)\n *\n * const profile = customerProfiles[currentSegment]\n * const valueMap = valueMaps[currentSegment]\n * ```\n */\nexport function useVPCData(projectId?: string): UseVPCDataResult {\n  const { validationState, isLoading, error, refetch } = useCrewAIState({ projectId })\n\n  const customerProfiles = useMemo(() => {\n    return validationState?.customer_profiles || {}\n  }, [validationState])\n\n  const valueMaps = useMemo(() => {\n    return validationState?.value_maps || {}\n  }, [validationState])\n\n  const segments = useMemo(() => {\n    return Object.keys(customerProfiles)\n  }, [customerProfiles])\n\n  const hasData = useMemo(() => {\n    return segments.length > 0\n  }, [segments])\n\n  return {\n    customerProfiles,\n    valueMaps,\n    currentSegment: validationState?.current_segment || null,\n    currentValueProp: validationState?.current_value_prop || null,\n    problemFit: validationState?.problem_fit || 'unknown',\n    segments,\n    hasData,\n    isLoading,\n    error,\n    refetch,\n  }\n}\n\n// ============================================================================\n// useCrewAIKickoff - Hook for triggering and monitoring CrewAI analysis\n// ============================================================================\n\nexport type KickoffStatus = 'idle' | 'starting' | 'running' | 'completed' | 'failed'\n\nexport interface UseCrewAIKickoffResult {\n  status: KickoffStatus\n  kickoffId: string | null\n  progress: string | null\n  result: any | null\n  error: Error | null\n  kickoff: (inputs: Record<string, any>) => Promise<void>\n  reset: () => void\n}\n\n/**\n * Hook for triggering and monitoring CrewAI crew execution\n *\n * @param projectId - Project ID for the analysis\n * @returns Kickoff state and control functions\n *\n * @example\n * ```tsx\n * const { status, kickoff, progress, result } = useCrewAIKickoff(projectId)\n *\n * const handleAnalyze = async () => {\n *   await kickoff({ entrepreneur_input: '...' })\n * }\n *\n * return (\n *   <>\n *     <Button onClick={handleAnalyze} disabled={status !== 'idle'}>\n *       {status === 'running' ? progress : 'Analyze'}\n *     </Button>\n *   </>\n * )\n * ```\n */\nexport function useCrewAIKickoff(projectId?: string): UseCrewAIKickoffResult {\n  const [status, setStatus] = useState<KickoffStatus>('idle')\n  const [kickoffId, setKickoffId] = useState<string | null>(null)\n  const [progress, setProgress] = useState<string | null>(null)\n  const [result, setResult] = useState<any | null>(null)\n  const [error, setError] = useState<Error | null>(null)\n\n  const kickoff = useCallback(async (inputs: Record<string, any>) => {\n    if (!projectId) {\n      setError(new Error('Project ID is required'))\n      return\n    }\n\n    try {\n      setStatus('starting')\n      setError(null)\n      setProgress('Initializing analysis...')\n\n      // Call our API route to start the analysis\n      const response = await fetch('/api/crewai/analyze', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          projectId,\n          inputs,\n        }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n        throw new Error(errorData.error || 'Failed to start analysis')\n      }\n\n      const data = await response.json()\n      setKickoffId(data.kickoff_id)\n      setStatus('running')\n      setProgress('Analysis in progress...')\n\n      // Start polling for status\n      await pollForCompletion(data.kickoff_id)\n    } catch (err) {\n      console.error('[useCrewAIKickoff] Error:', err)\n      setStatus('failed')\n      setError(err as Error)\n      setProgress(null)\n    }\n  }, [projectId])\n\n  const pollForCompletion = useCallback(async (id: string) => {\n    const maxAttempts = 60 // 5 minutes at 5s intervals\n    let attempt = 0\n\n    const poll = async (): Promise<void> => {\n      try {\n        const response = await fetch(`/api/crewai/status/${id}`)\n        if (!response.ok) {\n          throw new Error('Failed to get status')\n        }\n\n        const statusData = await response.json()\n        setProgress(statusData.status || 'Processing...')\n\n        if (statusData.state === 'COMPLETED') {\n          setStatus('completed')\n          setResult(statusData.result || statusData.output)\n          setProgress(null)\n          return\n        }\n\n        if (statusData.state === 'FAILED') {\n          throw new Error(statusData.error || 'Analysis failed')\n        }\n\n        // Continue polling\n        attempt++\n        if (attempt < maxAttempts) {\n          await new Promise(resolve => setTimeout(resolve, 5000))\n          await poll()\n        } else {\n          throw new Error('Analysis timed out')\n        }\n      } catch (err) {\n        setStatus('failed')\n        setError(err as Error)\n        setProgress(null)\n      }\n    }\n\n    await poll()\n  }, [])\n\n  const reset = useCallback(() => {\n    setStatus('idle')\n    setKickoffId(null)\n    setProgress(null)\n    setResult(null)\n    setError(null)\n  }, [])\n\n  return {\n    status,\n    kickoffId,\n    progress,\n    result,\n    error,\n    kickoff,\n    reset,\n  }\n}\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Get the overall health status based on signals\n */\nexport function getOverallHealth(signals: InnovationPhysicsSignals): 'healthy' | 'warning' | 'critical' | 'unknown' {\n  const { desirability, feasibility, viability } = signals\n\n  // Check for critical issues\n  if (\n    desirability === 'no_interest' ||\n    feasibility === 'red_impossible' ||\n    viability === 'underwater'\n  ) {\n    return 'critical'\n  }\n\n  // Check for warnings\n  if (\n    desirability === 'weak_interest' ||\n    feasibility === 'orange_constrained' ||\n    viability === 'marginal' ||\n    viability === 'zombie_market'\n  ) {\n    return 'warning'\n  }\n\n  // Check for healthy\n  if (\n    desirability === 'strong_commitment' &&\n    feasibility === 'green' &&\n    viability === 'profitable'\n  ) {\n    return 'healthy'\n  }\n\n  return 'unknown'\n}\n\n/**\n * Get recommended next action based on signals\n */\nexport function getRecommendedAction(signals: InnovationPhysicsSignals): string {\n  const { desirability, feasibility, viability, phase, pivotRecommendation } = signals\n\n  // If a pivot is recommended, surface that\n  if (pivotRecommendation !== 'none') {\n    const pivotActions: Record<PivotType, string> = {\n      none: '',\n      segment_pivot: 'Consider pivoting to a different customer segment',\n      value_pivot: 'Reconsider your value proposition',\n      channel_pivot: 'Explore alternative distribution channels',\n      price_pivot: 'Review your pricing strategy',\n      cost_pivot: 'Focus on reducing customer acquisition cost',\n      kill: 'Strongly consider ending this project',\n    }\n    return pivotActions[pivotRecommendation]\n  }\n\n  // Phase-specific recommendations\n  if (phase === 'ideation') {\n    return 'Identify and prioritize your riskiest assumptions'\n  }\n\n  // Signal-based recommendations\n  if (desirability === 'no_signal') {\n    return 'Run a desirability experiment to validate customer interest'\n  }\n\n  if (desirability === 'no_interest') {\n    return 'Your current segment shows no interest - consider a segment pivot'\n  }\n\n  if (desirability === 'weak_interest') {\n    return 'Zombies detected - high interest but no commitment. Increase friction to filter real customers.'\n  }\n\n  if (feasibility === 'unknown' && desirability === 'strong_commitment') {\n    return 'Customers are committed! Now validate technical feasibility.'\n  }\n\n  if (feasibility === 'orange_constrained') {\n    return 'Consider scope reduction to improve feasibility'\n  }\n\n  if (viability === 'unknown' && feasibility === 'green') {\n    return 'Technical feasibility confirmed! Now validate unit economics.'\n  }\n\n  if (viability === 'marginal') {\n    return 'Unit economics are marginal - optimize pricing or reduce CAC'\n  }\n\n  if (viability === 'zombie_market') {\n    return 'Market too small for sustainable business - consider expansion'\n  }\n\n  if (desirability === 'strong_commitment' && feasibility === 'green' && viability === 'profitable') {\n    return 'All signals green! Ready to scale.'\n  }\n\n  return 'Continue validation experiments'\n}\n\nexport default useCrewAIState\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useFeatureFlag.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useFitData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useFormAccessibility.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/rules-of-hooks","severity":1,"message":"React Hook \"useFormAccessibility\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":127,"column":17,"nodeType":"Identifier","endLine":127,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useFounderStatus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useGateAlerts.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/hooks/useGateAlerts.ts:49:9\n  47 |       try {\n  48 |         const parsed = JSON.parse(stored);\n> 49 |         setAlerts(parsed.map((a: any) => ({\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  50 |           ...a,\n  51 |           timestamp: new Date(a.timestamp),\n  52 |         })));","line":49,"column":9,"nodeType":null,"endLine":49,"endColumn":18},{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/hooks/useGateAlerts.ts:95:5\n  93 |\n  94 |     const updatedAlerts = [...alerts.filter(a => a.id !== existingAlert?.id), newAlert];\n> 95 |     saveAlerts(updatedAlerts);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  96 |\n  97 |     // Track alert creation\n  98 |     trackEvent('gate_alert_created', {","line":95,"column":5,"nodeType":null,"endLine":95,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useGateAlerts Hook\n *\n * Monitors gate readiness and triggers alerts when close to passing.\n * Provides notifications when projects reach 90%+ readiness.\n *\n * @story US-F15\n */\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { trackEvent } from '@/lib/analytics';\n\ninterface GateAlert {\n  id: string;\n  projectId: string;\n  stage: string;\n  readinessScore: number;\n  message: string;\n  timestamp: Date;\n  dismissed: boolean;\n}\n\ninterface UseGateAlertsOptions {\n  projectId: string;\n  stage: string;\n  readinessScore: number;\n  threshold?: number; // Alert threshold (default 0.9)\n}\n\nconst ALERT_STORAGE_KEY = 'gate-alerts';\nconst ALERT_COOLDOWN_MS = 24 * 60 * 60 * 1000; // 24 hours\n\nexport function useGateAlerts({\n  projectId,\n  stage,\n  readinessScore,\n  threshold = 0.9,\n}: UseGateAlertsOptions) {\n  const [alerts, setAlerts] = useState<GateAlert[]>([]);\n\n  // Load alerts from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem(ALERT_STORAGE_KEY);\n    if (stored) {\n      try {\n        const parsed = JSON.parse(stored);\n        setAlerts(parsed.map((a: any) => ({\n          ...a,\n          timestamp: new Date(a.timestamp),\n        })));\n      } catch (err) {\n        console.error('Error loading alerts:', err);\n      }\n    }\n  }, []);\n\n  // Save alerts to localStorage\n  const saveAlerts = (newAlerts: GateAlert[]) => {\n    localStorage.setItem(ALERT_STORAGE_KEY, JSON.stringify(newAlerts));\n    setAlerts(newAlerts);\n  };\n\n  // Check if should create alert\n  useEffect(() => {\n    // Only alert if readiness is at or above threshold\n    if (readinessScore < threshold) return;\n\n    // Check if we've already alerted for this project/stage recently\n    const existingAlert = alerts.find(\n      (a) => a.projectId === projectId && a.stage === stage && !a.dismissed\n    );\n\n    if (existingAlert) {\n      // Check if alert is still within cooldown period\n      const timeSinceAlert = Date.now() - existingAlert.timestamp.getTime();\n      if (timeSinceAlert < ALERT_COOLDOWN_MS) {\n        return; // Don't create duplicate alert\n      }\n    }\n\n    // Create new alert\n    const newAlert: GateAlert = {\n      id: `${projectId}-${stage}-${Date.now()}`,\n      projectId,\n      stage,\n      readinessScore,\n      message: `Your ${stage} gate is ${Math.round(readinessScore * 100)}% ready to pass!`,\n      timestamp: new Date(),\n      dismissed: false,\n    };\n\n    const updatedAlerts = [...alerts.filter(a => a.id !== existingAlert?.id), newAlert];\n    saveAlerts(updatedAlerts);\n\n    // Track alert creation\n    trackEvent('gate_alert_created', {\n      project_id: projectId,\n      stage,\n      readiness_score: readinessScore,\n      category: 'gate_scoring',\n    });\n\n    // Show browser notification if permission granted\n    if ('Notification' in window && Notification.permission === 'granted') {\n      new Notification('Gate Almost Ready!', {\n        body: newAlert.message,\n        icon: '/favicon.ico',\n        tag: newAlert.id,\n      });\n    }\n  }, [projectId, stage, readinessScore, threshold, alerts]);\n\n  // Request notification permission\n  const requestNotificationPermission = async () => {\n    if ('Notification' in window && Notification.permission === 'default') {\n      await Notification.requestPermission();\n    }\n  };\n\n  // Dismiss an alert\n  const dismissAlert = (alertId: string) => {\n    const updated = alerts.map(a =>\n      a.id === alertId ? { ...a, dismissed: true } : a\n    );\n    saveAlerts(updated);\n\n    trackEvent('gate_alert_dismissed', {\n      alert_id: alertId,\n      category: 'gate_scoring',\n    });\n  };\n\n  // Clear old alerts (older than 7 days)\n  const clearOldAlerts = () => {\n    const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);\n    const filtered = alerts.filter(a => a.timestamp.getTime() > sevenDaysAgo);\n    saveAlerts(filtered);\n  };\n\n  // Get active (non-dismissed) alerts for current project\n  const activeAlerts = alerts.filter(\n    a => a.projectId === projectId && !a.dismissed\n  );\n\n  return {\n    alerts: activeAlerts,\n    dismissAlert,\n    clearOldAlerts,\n    requestNotificationPermission,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useGateEvaluation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useGatePolicies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useHealthCheck.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useImpersonation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useIntegrations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useOnboardingRecovery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/usePortfolioActivity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useProjectReports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useProjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useRecentActivity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useRecommendedActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useScreenReaderAnnouncement.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useUnifiedEvidence.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useVPC.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useVPCReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/hooks/useValidationProgress.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/legacy/index_backup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/admin/audit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/admin/integrity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/google/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/google/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/google/insights.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/google/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/linkedin/analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/linkedin/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/linkedin/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/linkedin/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/meta/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/meta/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/meta/insights.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/meta/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/polling/ad-review-poller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/ads/polling/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/analytics/hooks.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","line":70,"column":6,"nodeType":"Identifier","endLine":70,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'metricName'. Either include it or remove the dependency array.","line":70,"column":6,"nodeType":"Identifier","endLine":70,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [metricName]","fix":{"range":[1661,1673],"text":"[metricName]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/analytics/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/api/response.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/roles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/trial-guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/trial-limits.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/auth/validate-admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/crewai/founder-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/crewai/modal-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/crewai/vpc-transformer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/email/send.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/email/templates/escalation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/evidence/transform.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/founders/founder-mapping.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/oauth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/providers/airtable.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/providers/google-drive.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/providers/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/providers/notion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/providers/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/rate-limit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/integrations/refresh.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/mock-data/consultant-trial-clients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/mock-data/create-mock-clients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/mock-data/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/reports/field-extractors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/security/audit-log.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/security/rate-limit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/stripe/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/supabase/admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/supabase/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/supabase/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/supabase/server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/types/admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/lib/viability/benchmarks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/_app.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/_document.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/ai-analysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/analytics.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'metrics' logical expression could make the dependencies of useMemo Hook (at line 96) change on every render. To fix this, wrap the initialization of 'metrics' in its own useMemo() Hook.","line":78,"column":9,"nodeType":"VariableDeclarator","endLine":84,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Analytics Dashboard Page\n *\n * @story US-CP06\n */\n\nimport React, { useMemo, useState } from \"react\"\nimport { useQuery } from \"@tanstack/react-query\"\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { EmptyState } from \"@/components/ui/EmptyState\"\nimport {\n  Activity,\n  Brain,\n  CheckCircle,\n  Download,\n  FileText,\n  Target,\n  Users,\n  Workflow,\n} from \"lucide-react\"\n\ninterface AnalyticsDashboardPayload {\n  metrics: {\n    projects: number\n    validations: number\n    hypotheses: number\n    evidence: number\n    clients: number\n  }\n  workflows: {\n    total: number\n    completed: number\n  }\n  updatedAt: string\n}\n\ninterface AnalyticsDashboardResponse {\n  success: boolean\n  data: AnalyticsDashboardPayload\n}\n\ninterface AnalyticsMetric {\n  id: string\n  title: string\n  value: number\n  icon: React.ComponentType<{ className?: string }>\n  helper: string\n}\n\nfunction formatUpdatedAt(value?: string) {\n  if (!value) return \"Unavailable\"\n  const date = new Date(value)\n  if (Number.isNaN(date.getTime())) return \"Unavailable\"\n  return date.toLocaleString()\n}\n\nexport default function AnalyticsPage() {\n  const [activeTab, setActiveTab] = useState(\"overview\")\n\n  const { data, isLoading, error } = useQuery<AnalyticsDashboardResponse>({\n    queryKey: [\"analytics-dashboard\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/analytics/dashboard\")\n      if (!response.ok) {\n        throw new Error(\"Failed to load analytics\")\n      }\n      return response.json()\n    },\n  })\n\n  const dashboard = data?.data\n  const metrics = dashboard?.metrics ?? {\n    projects: 0,\n    validations: 0,\n    hypotheses: 0,\n    evidence: 0,\n    clients: 0,\n  }\n\n  const workflows = dashboard?.workflows ?? { total: 0, completed: 0 }\n  const hasAnyData = useMemo(() => {\n    return (\n      metrics.projects +\n        metrics.validations +\n        metrics.hypotheses +\n        metrics.evidence +\n        metrics.clients >\n      0\n    )\n  }, [metrics])\n\n  const keyMetrics: AnalyticsMetric[] = [\n    {\n      id: \"projects\",\n      title: \"Projects\",\n      value: metrics.projects,\n      icon: Target,\n      helper: \"Active projects tracked\",\n    },\n    {\n      id: \"validations\",\n      title: \"Validation Runs\",\n      value: metrics.validations,\n      icon: Workflow,\n      helper: \"CrewAI runs completed\",\n    },\n    {\n      id: \"evidence\",\n      title: \"Evidence Items\",\n      value: metrics.evidence,\n      icon: FileText,\n      helper: \"Evidence captured\",\n    },\n    {\n      id: \"hypotheses\",\n      title: \"Hypotheses\",\n      value: metrics.hypotheses,\n      icon: Brain,\n      helper: \"Assumptions tracked\",\n    },\n  ]\n\n  return (\n    <DashboardLayout breadcrumbs={[{ title: \"Analytics\", href: \"/analytics\" }]}>\n      <div className=\"flex-1 space-y-4 p-4 md:p-8 pt-6\">\n        <div className=\"flex items-center justify-between space-y-2\">\n          <div>\n            <h2 className=\"text-3xl font-bold tracking-tight\">Analytics</h2>\n            <p className=\"text-muted-foreground\">\n              Business intelligence and performance metrics for your projects\n            </p>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Button variant=\"outline\" disabled={!hasAnyData}>\n              <Download className=\"mr-2 h-4 w-4\" />\n              Export Report\n            </Button>\n          </div>\n        </div>\n\n        {error && (\n          <EmptyState\n            title=\"Analytics unavailable\"\n            description=\"We couldn't load analytics right now. Please try again in a moment.\"\n            icon={<Activity className=\"h-8 w-8\" />}\n          />\n        )}\n\n        {!error && (\n          <>\n            {isLoading ? (\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                {Array.from({ length: 4 }).map((_, index) => (\n                  <Card key={index}>\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                      <Skeleton className=\"h-4 w-24\" />\n                      <Skeleton className=\"h-4 w-4\" />\n                    </CardHeader>\n                    <CardContent>\n                      <Skeleton className=\"h-7 w-16\" />\n                      <Skeleton className=\"mt-2 h-3 w-32\" />\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : !hasAnyData ? (\n              <EmptyState\n                title=\"No analytics yet\"\n                description=\"Complete your first project to see analytics.\"\n                icon={<Activity className=\"h-8 w-8\" />}\n              />\n            ) : (\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                {keyMetrics.map((metric) => {\n                  const IconComponent = metric.icon\n                  return (\n                    <Card key={metric.id}>\n                      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                        <CardTitle className=\"text-sm font-medium\">{metric.title}</CardTitle>\n                        <IconComponent className=\"h-4 w-4 text-muted-foreground\" />\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"text-2xl font-bold\">{metric.value}</div>\n                        <p className=\"text-xs text-muted-foreground\">{metric.helper}</p>\n                      </CardContent>\n                    </Card>\n                  )\n                })}\n              </div>\n            )}\n\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\n              <TabsList>\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n                <TabsTrigger value=\"workflows\">AI Workflows</TabsTrigger>\n                <TabsTrigger value=\"clients\">Client Performance</TabsTrigger>\n                <TabsTrigger value=\"agents\">Agent Analytics</TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"overview\" className=\"space-y-4\">\n                {!hasAnyData ? (\n                  <EmptyState\n                    title=\"Complete onboarding to unlock analytics\"\n                    description=\"Once you finish onboarding and launch a validation run, analytics will populate here.\"\n                    icon={<Activity className=\"h-8 w-8\" />}\n                  />\n                ) : (\n                  <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                    <Card className=\"col-span-2\">\n                      <CardHeader>\n                        <CardTitle>Portfolio Overview</CardTitle>\n                        <CardDescription>Key counts across your workspace</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"grid gap-4 md:grid-cols-2\">\n                        <div className=\"flex items-center justify-between rounded-lg border p-3\">\n                          <span className=\"text-sm text-muted-foreground\">Projects</span>\n                          <span className=\"text-lg font-semibold\">{metrics.projects}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between rounded-lg border p-3\">\n                          <span className=\"text-sm text-muted-foreground\">Validation Runs</span>\n                          <span className=\"text-lg font-semibold\">{metrics.validations}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between rounded-lg border p-3\">\n                          <span className=\"text-sm text-muted-foreground\">Evidence Items</span>\n                          <span className=\"text-lg font-semibold\">{metrics.evidence}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between rounded-lg border p-3\">\n                          <span className=\"text-sm text-muted-foreground\">Hypotheses</span>\n                          <span className=\"text-lg font-semibold\">{metrics.hypotheses}</span>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Quick Stats</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Active Clients</span>\n                          <span className=\"font-medium\">{metrics.clients}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Completed Runs</span>\n                          <span className=\"font-medium\">{workflows.completed}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Updated</span>\n                          <span className=\"font-medium\">{formatUpdatedAt(dashboard?.updatedAt)}</span>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"workflows\" className=\"space-y-4\">\n                {workflows.total === 0 ? (\n                  <EmptyState\n                    title=\"No workflows yet\"\n                    description=\"Kick off your first validation run to see workflow analytics.\"\n                    icon={<Workflow className=\"h-8 w-8\" />}\n                  />\n                ) : (\n                  <div className=\"grid gap-4 md:grid-cols-2\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Workflow Completion</CardTitle>\n                        <CardDescription>Completed vs. total runs</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"grid grid-cols-2 gap-4 text-center\">\n                          <div>\n                            <div className=\"text-2xl font-bold text-green-600\">\n                              {workflows.completed}\n                            </div>\n                            <div className=\"text-sm text-muted-foreground\">Completed</div>\n                          </div>\n                          <div>\n                            <div className=\"text-2xl font-bold text-blue-600\">\n                              {workflows.total - workflows.completed}\n                            </div>\n                            <div className=\"text-sm text-muted-foreground\">In Progress</div>\n                          </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between text-sm\">\n                            <span>Success Rate</span>\n                            <span className=\"font-medium\">\n                              {workflows.total === 0\n                                ? \"0%\"\n                                : `${Math.round((workflows.completed / workflows.total) * 100)}%`}\n                            </span>\n                          </div>\n                          <Progress\n                            value={\n                              workflows.total === 0\n                                ? 0\n                                : Math.round((workflows.completed / workflows.total) * 100)\n                            }\n                            className=\"h-2\"\n                          />\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Workflow Health</CardTitle>\n                        <CardDescription>Signal coverage and pacing</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Validation Runs</span>\n                          <span className=\"font-medium\">{workflows.total}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Evidence Items</span>\n                          <span className=\"font-medium\">{metrics.evidence}</span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-muted-foreground\">Hypotheses</span>\n                          <span className=\"font-medium\">{metrics.hypotheses}</span>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"clients\" className=\"space-y-4\">\n                {metrics.clients === 0 ? (\n                  <EmptyState\n                    title=\"No client data yet\"\n                    description=\"Add your first client to track performance metrics.\"\n                    icon={<Users className=\"h-8 w-8\" />}\n                  />\n                ) : (\n                  <div className=\"grid gap-4 md:grid-cols-3\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Total Clients</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"text-center\">\n                        <div className=\"text-3xl font-bold text-blue-600\">{metrics.clients}</div>\n                        <p className=\"text-sm text-muted-foreground\">Managed accounts</p>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Active Projects</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"text-center\">\n                        <div className=\"text-3xl font-bold text-green-600\">{metrics.projects}</div>\n                        <p className=\"text-sm text-muted-foreground\">Projects in flight</p>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardHeader>\n                        <CardTitle>Validation Runs</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"text-center\">\n                        <div className=\"text-3xl font-bold text-yellow-600\">\n                          {metrics.validations}\n                        </div>\n                        <p className=\"text-sm text-muted-foreground\">Runs completed</p>\n                      </CardContent>\n                    </Card>\n                  </div>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"agents\" className=\"space-y-4\">\n                <EmptyState\n                  title=\"Agent analytics are not available yet\"\n                  description=\"Agent performance metrics appear once workflows capture per-agent telemetry.\"\n                  icon={<CheckCircle className=\"h-8 w-8\" />}\n                />\n              </TabsContent>\n            </Tabs>\n          </>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/canvas.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/canvas/bmc.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/canvas/tbi.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/canvas/vpc.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/client/[id].tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":1,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/chris/projects/app.startupai.site/frontend/src/pages/client/[id].tsx:69:9\n  67 |       const validTabs = ['overview', 'canvases', 'assumptions', 'experiments', 'evidence'];\n  68 |       if (validTabs.includes(tab)) {\n> 69 |         setActiveTab(tab);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  70 |       }\n  71 |     }\n  72 |   }, [tab]);","line":69,"column":9,"nodeType":null,"endLine":69,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Client Detail Page\n *\n * @story US-C04\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport Link from 'next/link';\nimport api from '../../services/api';\nimport { KanbanBoard } from '../../components/Dashboard/KanbanBoard';\nimport { AgentStatus } from '../../components/Agents/AgentStatus';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../components/ui/card';\nimport { Button } from '../../components/ui/button';\nimport { Badge } from '../../components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../../components/ui/tabs';\nimport { AlertCircle, CheckCircle, Clock, Play, RotateCcw, Activity, X, Eye, Plus, LayoutGrid, Map, Beaker, BookOpen, Target } from 'lucide-react';\nimport { Alert, AlertDescription } from '../../components/ui/alert';\nimport { Progress } from '../../components/ui/progress';\nimport { VPCSummaryCard } from '@/components/vpc';\n// Strategyzer Components\nimport { AssumptionMap, ExperimentCardsGrid, CanvasesGallery } from '@/components/strategyzer';\nimport { EvidenceLedger } from '@/components/fit/EvidenceLedger';\n\ninterface Client {\n  _id: string;\n  name: string;\n  company: string;\n  status: string;\n  description?: string;\n  workflowStatus?: {\n    discovery: { status: string; completedAt?: string };\n    validation: { status: string; completedAt?: string };\n    scale: { status: string; completedAt?: string };\n  };\n}\n\ninterface Artefact {\n  id: string;\n  name: string;\n  type: string;\n  status: string;\n  createdAt: string;\n  content?: any; // AI-generated content from workflows\n}\n\ninterface WorkflowProgress {\n  workflow: string;\n  stage: string;\n  progress: number;\n  estimatedTimeRemaining: number;\n  startTime: number;\n}\n\nconst ClientPage: React.FC = () => {\n  const router = useRouter();\n  const queryClient = useQueryClient();\n  const { id, tab } = router.query;\n  const [selectedArtefact, setSelectedArtefact] = useState<Artefact | null>(null);\n  const [showArtefactModal, setShowArtefactModal] = useState(false);\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Set active tab from URL query parameter\n  useEffect(() => {\n    if (tab && typeof tab === 'string') {\n      const validTabs = ['overview', 'canvases', 'assumptions', 'experiments', 'evidence'];\n      if (validTabs.includes(tab)) {\n        setActiveTab(tab);\n      }\n    }\n  }, [tab]);\n\n  const { data: client, isLoading: clientLoading, error: clientError } = useQuery<Client | null>({\n    queryKey: ['client', id],\n    queryFn: async () => {\n      const response = await api.get(`/clients/${id}`);\n      return response?.data?.client ?? null;\n    },\n    enabled: !!id,\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n\n  const { data: artefacts = [], isLoading: artefactsLoading, error: artefactsError } = useQuery<Artefact[]>({\n    queryKey: ['artefacts', id],\n    queryFn: async () => {\n      const response = await api.get(`/clients/${id}/artefacts`);\n      return response?.data?.artefacts ?? [];\n    },\n    enabled: !!id,\n    retry: false,\n    refetchOnWindowFocus: false,\n  });\n\n  // Enhanced workflow tracking state\n  const [workflowProgress, setWorkflowProgress] = useState<Record<string, WorkflowProgress>>({});\n  const [showResults, setShowResults] = useState<Record<string, boolean>>({});\n  const [workflowErrors, setWorkflowErrors] = useState<Record<string, string>>({});\n\n  const displayClient = client || null;\n\n  // Progress tracking for running workflows\n  useEffect(() => {\n    const intervals: Record<string, NodeJS.Timeout> = {};\n    \n    Object.entries(workflowProgress).forEach(([workflow, progress]) => {\n      if (progress.progress < 100) {\n        intervals[workflow] = setInterval(() => {\n          setWorkflowProgress(prev => {\n            const current = prev[workflow];\n            if (!current || current.progress >= 100) return prev;\n            \n            const elapsed = Date.now() - current.startTime;\n            const newProgress = Math.min(95, (elapsed / (current.estimatedTimeRemaining * 1000)) * 100);\n            \n            return {\n              ...prev,\n              [workflow]: {\n                ...current,\n                progress: newProgress,\n                estimatedTimeRemaining: Math.max(5, current.estimatedTimeRemaining - 1)\n              }\n            };\n          });\n        }, 1000);\n      }\n    });\n    \n    return () => {\n      Object.values(intervals).forEach(clearInterval);\n    };\n  }, [workflowProgress]);\n\n  // Workflow trigger mutation\n  const workflowMutation = useMutation({\n    mutationFn: async (workflowType: string) => {\n      return api.post(`/clients/${id}/${workflowType}`, {});\n    },\n    onSuccess: () => {\n      // Refresh client data to get updated workflow status\n      queryClient.invalidateQueries({ queryKey: ['client', id] });\n      queryClient.invalidateQueries({ queryKey: ['artefacts', id] });\n    },\n    onError: (error) => {\n      console.error('Workflow failed:', error);\n      alert('Failed to start workflow. Please try again.');\n    }\n  });\n\n  const triggerWorkflow = (workflowType: string) => {\n    workflowMutation.mutate(workflowType);\n  };\n\n  if (clientLoading && !clientError) {\n    return (\n      <div className=\"min-h-screen business-gradient\">\n        <div className=\"business-container py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <div className=\"text-lg text-muted-foreground\">Loading client dashboard...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (clientError || !displayClient) {\n    return (\n      <div className=\"min-h-screen business-gradient\">\n        <div className=\"business-container py-12\">\n          <Alert variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>\n              We could not load this client right now. Please return to the portfolio and try again.\n            </AlertDescription>\n          </Alert>\n        </div>\n      </div>\n    );\n  }\n\n  const clientName = displayClient.company || displayClient.name || 'Client';\n  const clientContact = displayClient.name || '';\n  const clientType = displayClient.description || clientContact || 'Client profile';\n  const clientStatus = displayClient.status || 'Status unavailable';\n\n  return (\n    <div className=\"min-h-screen business-gradient\">\n      {/* Professional Header */}\n      <header className=\"business-header\">\n        <div className=\"business-container py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <Link href=\"/consultant-dashboard\" className=\"text-primary hover:text-primary/80 font-medium\">\n                 Back to Portfolio\n              </Link>\n              <div>\n                <h1 className=\"business-title\">{clientName}</h1>\n                <p className=\"business-subtitle\">{clientType}</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <Link href={`/client/${id}/projects/new`}>\n                <Button variant=\"default\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  New Project\n                </Button>\n              </Link>\n              <Badge variant=\"default\">\n                {clientStatus}\n              </Badge>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"status-indicator bg-green-400\"></div>\n                <span className=\"text-sm text-muted-foreground\">Live Dashboard</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Dashboard Content */}\n      <main className=\"business-container py-8\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full max-w-3xl grid-cols-5\">\n            <TabsTrigger value=\"overview\">\n              <Target className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Overview\n            </TabsTrigger>\n            <TabsTrigger value=\"canvases\">\n              <LayoutGrid className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Canvases\n            </TabsTrigger>\n            <TabsTrigger value=\"assumptions\">\n              <Map className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Assumption Map\n            </TabsTrigger>\n            <TabsTrigger value=\"experiments\">\n              <Beaker className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Experiment Cards\n            </TabsTrigger>\n            <TabsTrigger value=\"evidence\">\n              <BookOpen className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Evidence\n            </TabsTrigger>\n          </TabsList>\n\n          {/* OVERVIEW TAB - Original client workspace content */}\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-8\">\n              {/* Left Column - Kanban Board */}\n              <div className=\"xl:col-span-2\">\n                <Card className=\"business-card\">\n                  <CardHeader className=\"business-card-header\">\n                    <CardTitle>Project Tasks & Milestones</CardTitle>\n                    <CardDescription>Strategic initiatives and deliverables tracking</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"business-card-content\">\n                    <KanbanBoard clientId={id as string} />\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Strategic Artefacts Column */}\n              <Card className=\"business-card\">\n                <CardHeader className=\"business-card-header\">\n                  <CardTitle>Strategic Artefacts</CardTitle>\n                  <CardDescription>Generated insights and deliverables</CardDescription>\n                </CardHeader>\n                <CardContent className=\"business-card-content\">\n                  {artefactsLoading && (\n                    <div className=\"text-center py-8\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n                      <div className=\"text-muted-foreground\">Loading strategic artefacts...</div>\n                    </div>\n                  )}\n                  {artefactsError && (\n                    <div className=\"mb-4 p-4 border border-red-200 bg-red-50 rounded-lg\">\n                      <h3 className=\"font-semibold text-red-800 mb-2\">Unable to load artefacts</h3>\n                      <p className=\"text-red-700 text-sm\">\n                        Strategic artefacts are unavailable right now. Please try again later.\n                      </p>\n                    </div>\n                  )}\n                  <div className=\"space-y-4\">\n                    {artefacts.length > 0 ? (\n                      artefacts.map((artefact) => (\n                        <div\n                          key={artefact.id}\n                          className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer\"\n                          onClick={() => {\n                            setSelectedArtefact(artefact);\n                            setShowArtefactModal(true);\n                          }}\n                        >\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium text-foreground\">{artefact.name}</h4>\n                            <p className=\"text-sm text-muted-foreground\">{artefact.type}</p>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              {new Date(artefact.createdAt).toLocaleDateString()}\n                            </p>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Badge\n                              variant={artefact.status === 'completed' ? 'default' :\n                                     artefact.status === 'in-progress' ? 'secondary' : 'outline'}\n                            >\n                              {artefact.status}\n                            </Badge>\n                            <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                          </div>\n                        </div>\n                      ))\n                    ) : (\n                      <div className=\"text-center py-8\">\n                        <div className=\"text-muted-foreground mb-4\">\n                          <svg className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground/50\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                          </svg>\n                          <p className=\"text-sm\">No artefacts generated yet</p>\n                        </div>\n                        <Button variant=\"outline\" size=\"sm\">\n                          Generate Initial Analysis\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Right Column - Agent Status & Workflows */}\n              <div className=\"xl:col-span-3 grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Value Proposition Analysis */}\n                {id && typeof id === 'string' && (\n                  <VPCSummaryCard\n                    projectId={id}\n                    onClick={() => router.push(`/project/${id}/analysis`)}\n                  />\n                )}\n\n                {/* Agent Status */}\n                <Card className=\"business-card\">\n                  <CardHeader className=\"business-card-header\">\n                    <CardTitle>AI Agent Performance</CardTitle>\n                    <CardDescription>Multi-agent system status and metrics</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"business-card-content\">\n                    <AgentStatus />\n                  </CardContent>\n                </Card>\n\n                {/* AI Workflow Controls */}\n                <Card className=\"business-card\">\n                  <CardHeader className=\"business-card-header\">\n                    <CardTitle>AI Workflows</CardTitle>\n                    <CardDescription>Automated business intelligence</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"business-card-content\">\n                    <div className=\"space-y-4\">\n                      {/* Discovery Workflow */}\n                      <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className={`w-3 h-3 rounded-full ${\n                            displayClient?.workflowStatus?.discovery?.status === 'completed' ? 'bg-green-500' :\n                            displayClient?.workflowStatus?.discovery?.status === 'in_progress' ? 'bg-yellow-500 animate-pulse' :\n                            'bg-gray-300'\n                          }`}></div>\n                          <div>\n                            <div className=\"font-medium text-sm\">Discovery</div>\n                            <div className=\"text-xs text-muted-foreground\">Business analysis</div>\n                          </div>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant={displayClient?.workflowStatus?.discovery?.status === 'completed' ? 'outline' : 'default'}\n                          onClick={() => triggerWorkflow('discovery')}\n                        >\n                          {displayClient?.workflowStatus?.discovery?.status === 'completed' ? 'Re-run' :\n                           displayClient?.workflowStatus?.discovery?.status === 'in_progress' ? 'Running...' : 'Start'}\n                        </Button>\n                      </div>\n\n                      {/* Validation Workflow */}\n                      <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className={`w-3 h-3 rounded-full ${\n                            displayClient?.workflowStatus?.validation?.status === 'completed' ? 'bg-green-500' :\n                            displayClient?.workflowStatus?.validation?.status === 'in_progress' ? 'bg-yellow-500 animate-pulse' :\n                            'bg-gray-300'\n                          }`}></div>\n                          <div>\n                            <div className=\"font-medium text-sm\">Validation</div>\n                            <div className=\"text-xs text-muted-foreground\">Market testing</div>\n                          </div>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant={displayClient?.workflowStatus?.validation?.status === 'completed' ? 'outline' : 'default'}\n                          onClick={() => triggerWorkflow('validation')}\n                        >\n                          {displayClient?.workflowStatus?.validation?.status === 'completed' ? 'Re-run' :\n                           displayClient?.workflowStatus?.validation?.status === 'in_progress' ? 'Running...' : 'Start'}\n                        </Button>\n                      </div>\n\n                      {/* Scale Workflow */}\n                      <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className={`w-3 h-3 rounded-full ${\n                            displayClient?.workflowStatus?.scale?.status === 'completed' ? 'bg-green-500' :\n                            displayClient?.workflowStatus?.scale?.status === 'in_progress' ? 'bg-yellow-500 animate-pulse' :\n                            'bg-gray-300'\n                          }`}></div>\n                          <div>\n                            <div className=\"font-medium text-sm\">Scale</div>\n                            <div className=\"text-xs text-muted-foreground\">Growth strategy</div>\n                          </div>\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant={displayClient?.workflowStatus?.scale?.status === 'completed' ? 'outline' : 'default'}\n                          onClick={() => triggerWorkflow('scale')}\n                        >\n                          {displayClient?.workflowStatus?.scale?.status === 'completed' ? 'Re-run' :\n                           displayClient?.workflowStatus?.scale?.status === 'in_progress' ? 'Running...' : 'Start'}\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </TabsContent>\n\n          {/* CANVASES TAB - Value Proposition Canvas + Business Model Canvas */}\n          <TabsContent value=\"canvases\" className=\"space-y-6\">\n            <CanvasesGallery projectId={id as string} />\n          </TabsContent>\n\n          {/* ASSUMPTION MAP TAB - Strategyzer terminology */}\n          <TabsContent value=\"assumptions\" className=\"space-y-6\">\n            <AssumptionMap projectId={id as string} />\n          </TabsContent>\n\n          {/* EXPERIMENT CARDS TAB - Strict Strategyzer format */}\n          <TabsContent value=\"experiments\" className=\"space-y-6\">\n            <ExperimentCardsGrid projectId={id as string} />\n          </TabsContent>\n\n          {/* EVIDENCE TAB - Evidence Ledger */}\n          <TabsContent value=\"evidence\" className=\"space-y-6\">\n            <EvidenceLedger />\n\n            {/* Learning Cards Summary */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <BookOpen className=\"h-5 w-5\" />\n                  Learning Cards\n                </CardTitle>\n                <CardDescription>\n                  Capture insights and decisions from experiments\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <BookOpen className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                  <p className=\"mb-4\">Learning cards will appear here after completing experiments.</p>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setActiveTab('experiments')}\n                  >\n                    <Beaker className=\"h-4 w-4 mr-2\" />\n                    View Experiment Cards\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Artefact Modal */}\n      {showArtefactModal && selectedArtefact && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden\">\n            <div className=\"flex items-center justify-between p-6 border-b\">\n              <div>\n                <h2 className=\"text-xl font-semibold\">{selectedArtefact.name}</h2>\n                <p className=\"text-sm text-muted-foreground\">{selectedArtefact.type}  {new Date(selectedArtefact.createdAt).toLocaleDateString()}</p>\n              </div>\n              <button \n                onClick={() => setShowArtefactModal(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-full\"\n              >\n                <X className=\"h-5 w-5\" />\n              </button>\n            </div>\n            <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n              {selectedArtefact.content ? (\n                <div className=\"space-y-4\">\n                  {(() => {\n                    // Handle different content structures\n                    let contentData = selectedArtefact.content;\n                    \n                    // If content is a string, try to parse it as JSON\n                    if (typeof contentData === 'string') {\n                      try {\n                        contentData = JSON.parse(contentData);\n                      } catch (e) {\n                        return <div className=\"whitespace-pre-wrap text-sm\">{contentData}</div>;\n                      }\n                    }\n                    \n                    // If content has nested structure, extract the actual data\n                    if (contentData && typeof contentData === 'object') {\n                      // Check if it's wrapped in metadata (common in our backend)\n                      const actualContent = contentData.content || contentData.data || contentData;\n                      \n                      return (\n                        <div className=\"space-y-4\">\n                          {actualContent.analysis && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-blue-800\"> Analysis</h3>\n                              <p className=\"text-sm text-gray-700 leading-relaxed\">{actualContent.analysis}</p>\n                            </div>\n                          )}\n                          {actualContent.recommendations && Array.isArray(actualContent.recommendations) && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-green-800\"> Recommendations</h3>\n                              <ul className=\"list-disc list-inside space-y-2\">\n                                {actualContent.recommendations.map((rec: string, index: number) => (\n                                  <li key={index} className=\"text-sm text-gray-700 leading-relaxed\">{rec}</li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n                          {actualContent.nextSteps && Array.isArray(actualContent.nextSteps) && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-purple-800\"> Next Steps</h3>\n                              <ul className=\"list-disc list-inside space-y-2\">\n                                {actualContent.nextSteps.map((step: string, index: number) => (\n                                  <li key={index} className=\"text-sm text-gray-700 leading-relaxed\">{step}</li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n                          {actualContent.insights && Array.isArray(actualContent.insights) && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-orange-800\"> Key Insights</h3>\n                              <ul className=\"list-disc list-inside space-y-2\">\n                                {actualContent.insights.map((insight: string, index: number) => (\n                                  <li key={index} className=\"text-sm text-gray-700 leading-relaxed\">{insight}</li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n                          {actualContent.status && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-gray-800\"> Status</h3>\n                              <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium ${\n                                actualContent.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n                              }`}>\n                                {actualContent.status}\n                              </span>\n                            </div>\n                          )}\n                          \n                          {/* Fallback: show raw JSON if no structured data found */}\n                          {!actualContent.analysis && !actualContent.recommendations && !actualContent.nextSteps && !actualContent.insights && (\n                            <div>\n                              <h3 className=\"font-semibold text-lg mb-2 text-gray-800\"> Raw Content</h3>\n                              <pre className=\"bg-gray-100 p-4 rounded-lg text-xs overflow-x-auto\">\n                                {JSON.stringify(actualContent, null, 2)}\n                              </pre>\n                            </div>\n                          )}\n                        </div>\n                      );\n                    }\n                    \n                    // Fallback for any other data type\n                    return (\n                      <div className=\"text-center py-8 text-muted-foreground\">\n                        <p>Unable to parse artefact content.</p>\n                        <pre className=\"mt-4 bg-gray-100 p-4 rounded-lg text-xs\">\n                          {JSON.stringify(contentData, null, 2)}\n                        </pre>\n                      </div>\n                    );\n                  })()}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <p>No content available for this artefact.</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ClientPage;\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/clients.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/clients/new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/consultant-dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/export.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/founder-dashboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":300,"column":78,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11697,11826],"text":"\n            Ready to validate your startup idea with AI-powered insights? Let&apos;s create your first validation project.\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11697,11826],"text":"\n            Ready to validate your startup idea with AI-powered insights? Let&lsquo;s create your first validation project.\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11697,11826],"text":"\n            Ready to validate your startup idea with AI-powered insights? Let&#39;s create your first validation project.\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11697,11826],"text":"\n            Ready to validate your startup idea with AI-powered insights? Let&rsquo;s create your first validation project.\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\n/**\n * Founder Dashboard Page\n *\n * Main dashboard for founders showing fit dashboard, gates,\n * validation summary, and evidence ledger.\n *\n * @story US-F02, US-F06, US-F08, US-F09, US-F10, US-F12, US-F13, US-F15, US-F16, US-F17\n */\n\nimport * as React from \"react\"\nimport { DashboardLayout } from \"@/components/layout/DashboardLayout\"\nimport { FitDashboard } from \"@/components/fit/FitDashboard\"\nimport { GateDashboard } from \"@/components/gates/GateDashboard\"\nimport { ValidationResultsSummary } from \"@/components/validation/ValidationResultsSummary\"\nimport { GateStatusBadge } from \"@/components/gates/GateStatusBadge\"\nimport { GateReadinessIndicator } from \"@/components/gates/GateReadinessIndicator\"\nimport { useGateEvaluation } from \"@/hooks/useGateEvaluation\"\nimport { useGateAlerts } from \"@/hooks/useGateAlerts\"\nimport { EvidenceLedger } from \"@/components/fit/EvidenceLedger\"\nimport { StageSelector } from \"@/components/founder/StageSelector\"\nimport { ProjectCreationWizard } from \"@/components/onboarding/ProjectCreationWizard\"\nimport { DashboardAIAssistant } from \"@/components/assistant/DashboardAIAssistant\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { useProjects } from \"@/hooks/useProjects\"\nimport { useAuth } from \"@/lib/auth/hooks\"\nimport { useFeatureFlag } from \"@/hooks/useFeatureFlag\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/router\"\nimport { VPCSummaryCard } from \"@/components/vpc\"\nimport { InnovationPhysicsPanel } from \"@/components/signals\"\n// Strategyzer Components\nimport { AssumptionMap, ExperimentCardsGrid, CanvasesGallery } from \"@/components/strategyzer\"\n// Hypothesis Management\nimport HypothesisManager from \"@/components/hypothesis/HypothesisManager\"\n// Hooks for real data\nimport { useRecentActivity, type ActivityItem } from \"@/hooks/useRecentActivity\"\nimport { useRecommendedActions, type RecommendedAction } from \"@/hooks/useRecommendedActions\"\nimport { trackPageView, trackEvent } from \"@/lib/analytics\"\nimport {\n  Target,\n  FileText,\n  Beaker,\n  TrendingUp,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Plus,\n  Rocket,\n  LayoutGrid,\n  Users,\n  BookOpen,\n  Map,\n  FlaskConical\n} from \"lucide-react\"\n\nfunction QuickStats({ projectId, currentStage }: { projectId?: string, currentStage?: string }) {\n  // Use gate evaluation hook for dynamic data\n  const { \n    result, \n    isLoading: gateLoading \n  } = useGateEvaluation({ \n    projectId: projectId || 'default', \n    stage: (currentStage as any) || 'FEASIBILITY',\n    autoRefresh: true \n  })\n  \n  const gateStatus = result?.status || 'Pending'\n  const readinessScore = result?.readiness_score || 0\n  const evidenceCount = result?.evidence_count || 0\n  const experimentsCount = result?.experiments_count || 0\n\n  const stats = [\n    {\n      label: \"Gate Readiness\",\n      value: gateLoading ? \"Loading...\" : `${readinessScore}%`,\n      change: gateStatus === 'Passed' ? \"Gate Passed\" : gateStatus === 'Failed' ? \"Gate Failed\" : \"In Progress\",\n      trend: gateStatus === 'Passed' ? \"up\" : gateStatus === 'Failed' ? \"warning\" : \"neutral\",\n      icon: Target,\n      color: \"text-blue-600\"\n    },\n    {\n      label: \"Evidence Items\",\n      value: gateLoading ? \"Loading...\" : evidenceCount.toString(),\n      change: \"Quality tracked\",\n      trend: \"neutral\",\n      icon: FileText,\n      color: \"text-green-600\"\n    },\n    {\n      label: \"Active Experiments\",\n      value: gateLoading ? \"Loading...\" : experimentsCount.toString(),\n      change: \"Stage requirements\",\n      trend: \"neutral\",\n      icon: Beaker,\n      color: \"text-purple-600\"\n    },\n    {\n      label: \"Next Milestone\",\n      value: currentStage || \"Feasibility\",\n      change: gateStatus === 'Pending' ? \"Gate evaluation pending\" : \"Ready to progress\",\n      trend: \"neutral\",\n      icon: TrendingUp,\n      color: \"text-orange-600\"\n    }\n  ]\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n      {stats.map((stat, index) => {\n        const Icon = stat.icon\n        return (\n          <Card key={index}>\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">{stat.label}</p>\n                  <p className=\"text-2xl font-bold\">{stat.value}</p>\n                  <div className=\"flex items-center gap-1 mt-1\">\n                    {stat.trend === \"up\" && <TrendingUp className=\"h-3 w-3 text-green-500\" />}\n                    {stat.trend === \"warning\" && <AlertTriangle className=\"h-3 w-3 text-yellow-500\" />}\n                    {stat.trend === \"neutral\" && <Clock className=\"h-3 w-3 text-gray-500\" />}\n                    <span className={`text-xs ${\n                      stat.trend === \"up\" ? \"text-green-600\" :\n                      stat.trend === \"warning\" ? \"text-yellow-600\" : \n                      \"text-muted-foreground\"\n                    }`}>\n                      {stat.change}\n                    </span>\n                  </div>\n                </div>\n                <div className={`p-3 rounded-lg bg-muted`}>\n                  <Icon className={`h-4 w-4 ${stat.color}`} />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )\n      })}\n    </div>\n  )\n}\n\nfunction RecentActivity({ projectId }: { projectId?: string }) {\n  const { activities, isLoading } = useRecentActivity({ projectId, limit: 5 })\n\n  const getActivityIcon = (type: ActivityItem['type']) => {\n    switch (type) {\n      case 'evidence': return { icon: FileText, color: 'text-green-500' }\n      case 'experiment': return { icon: Beaker, color: 'text-blue-500' }\n      case 'assumption': return { icon: Target, color: 'text-purple-500' }\n      case 'contradiction': return { icon: AlertTriangle, color: 'text-red-500' }\n      default: return { icon: Clock, color: 'text-gray-500' }\n    }\n  }\n\n  const formatTimeAgo = (date: Date) => {\n    const seconds = Math.floor((new Date().getTime() - date.getTime()) / 1000)\n    if (seconds < 60) return 'Just now'\n    const minutes = Math.floor(seconds / 60)\n    if (minutes < 60) return `${minutes}m ago`\n    const hours = Math.floor(minutes / 60)\n    if (hours < 24) return `${hours}h ago`\n    const days = Math.floor(hours / 24)\n    if (days < 7) return `${days}d ago`\n    return date.toLocaleDateString()\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Recent Activity</CardTitle>\n        <CardDescription>Latest updates to your validation project</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <div className=\"text-sm text-muted-foreground\">Loading activity...</div>\n        ) : activities.length === 0 ? (\n          <div className=\"text-sm text-muted-foreground text-center py-4\">\n            No activity yet. Start by adding assumptions or evidence.\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {activities.map((activity) => {\n              const { icon: Icon, color } = getActivityIcon(activity.type)\n              return (\n                <div key={activity.id} className=\"flex items-start gap-3\">\n                  <div className=\"p-1.5 rounded-lg bg-muted\">\n                    <Icon className={`h-3 w-3 ${color}`} />\n                  </div>\n                  <div className=\"flex-1 space-y-1\">\n                    <p className=\"text-sm font-medium\">{activity.title}</p>\n                    <p className=\"text-xs text-muted-foreground\">{activity.description}</p>\n                  </div>\n                  <span className=\"text-xs text-muted-foreground\">{formatTimeAgo(activity.timestamp)}</span>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\nfunction NextSteps({ projectId }: { projectId?: string }) {\n  const { actions, isLoading } = useRecommendedActions({ projectId, limit: 5 })\n\n  const getCategoryIcon = (category: RecommendedAction['category']) => {\n    switch (category) {\n      case 'assumption': return Target\n      case 'experiment': return Beaker\n      case 'evidence': return FileText\n      case 'canvas': return LayoutGrid\n      default: return CheckCircle\n    }\n  }\n\n  const getActionVerb = (actionType: RecommendedAction['actionType']) => {\n    switch (actionType) {\n      case 'create': return 'Create'\n      case 'complete': return 'Complete'\n      case 'review': return 'Review'\n      case 'resolve': return 'Resolve'\n      default: return 'Start'\n    }\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Recommended Next Steps</CardTitle>\n        <CardDescription>AI-suggested actions based on your validation state</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <div className=\"text-sm text-muted-foreground\">Analyzing your project...</div>\n        ) : actions.length === 0 ? (\n          <div className=\"text-sm text-muted-foreground text-center py-4\">\n            <CheckCircle className=\"h-8 w-8 mx-auto mb-2 text-green-500\" />\n            <p>Great progress! No immediate actions recommended.</p>\n            <p className=\"text-xs mt-1\">Keep validating your assumptions.</p>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {actions.map((action) => {\n              const Icon = getCategoryIcon(action.category)\n              return (\n                <div key={action.id} className=\"flex items-start justify-between p-3 rounded-lg border\">\n                  <div className=\"flex items-start gap-3 flex-1\">\n                    <div className=\"p-1.5 rounded-lg bg-muted mt-0.5\">\n                      <Icon className={`h-3 w-3 ${\n                        action.priority === 'high' ? 'text-red-500' :\n                        action.priority === 'medium' ? 'text-yellow-500' :\n                        'text-gray-500'\n                      }`} />\n                    </div>\n                    <div>\n                      <h4 className=\"text-sm font-medium mb-1\">{action.title}</h4>\n                      <p className=\"text-xs text-muted-foreground mb-2\">{action.description}</p>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge\n                          variant={action.priority === 'high' ? 'destructive' :\n                                   action.priority === 'medium' ? 'default' : 'secondary'}\n                          className=\"text-xs\"\n                        >\n                          {action.priority.charAt(0).toUpperCase() + action.priority.slice(1)}\n                        </Badge>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {action.category}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                  <Button variant=\"ghost\" size=\"sm\">\n                    {getActionVerb(action.actionType)}\n                  </Button>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n\nfunction EmptyState() {\n  return (\n    <div className=\"text-center py-16 space-y-6\">\n      <div className=\"space-y-4\">\n        <Rocket className=\"h-16 w-16 text-blue-600 mx-auto\" />\n        <div className=\"space-y-2\">\n          <h2 className=\"text-3xl font-bold\">Welcome to StartupAI! </h2>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n            Ready to validate your startup idea with AI-powered insights? Let's create your first validation project.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-3 max-w-4xl mx-auto\">\n        <Card className=\"text-left\">\n          <CardContent className=\"pt-6\">\n            <Target className=\"h-8 w-8 text-blue-600 mb-3\" />\n            <h3 className=\"font-semibold mb-2\">AI-Powered Analysis</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Our AI analyzes your idea and creates personalized hypotheses and experiments\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"text-left\">\n          <CardContent className=\"pt-6\">\n            <FileText className=\"h-8 w-8 text-green-600 mb-3\" />\n            <h3 className=\"font-semibold mb-2\">Evidence-Led Validation</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Track evidence, measure progress, and make data-driven decisions\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"text-left\">\n          <CardContent className=\"pt-6\">\n            <Beaker className=\"h-8 w-8 text-purple-600 mb-3\" />\n            <h3 className=\"font-semibold mb-2\">Structured Experiments</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Follow proven methodologies to validate desirability, feasibility, and viability\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"flex flex-col items-center gap-3\">\n        <Link href=\"/onboarding/founder\">\n          <Button\n            size=\"lg\"\n            className=\"bg-blue-600 hover:bg-blue-700\"\n          >\n            <Rocket className=\"h-5 w-5 mr-2\" />\n            Start Validating Your Idea\n          </Button>\n        </Link>\n        <p className=\"text-sm text-muted-foreground\">\n          Takes about 30 seconds to get started\n        </p>\n      </div>\n    </div>\n  )\n}\n\nexport default function FounderDashboard() {\n  const [activeTab, setActiveTab] = React.useState('overview')\n  const { projects, isLoading, error } = useProjects()\n  const { user } = useAuth()\n  const router = useRouter()\n  const { isEnabled: isAIAssistantEnabled } = useFeatureFlag('dashboard_ai_assistant')\n\n  // Get current project (first project for now, can be enhanced later)\n  const currentProject = projects.length > 0 ? projects[0] : null\n  const projectId = currentProject?.id\n  const currentStage = currentProject?.stage || 'FEASIBILITY'\n\n  React.useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search)\n    const tabFromUrl = urlParams.get('tab')\n    if (tabFromUrl) {\n      setActiveTab(tabFromUrl)\n    }\n    // Track page view\n    trackPageView('Founder Dashboard', {\n      project_count: projects.length,\n      has_projects: projects.length > 0,\n    })\n    // Track dashboard viewed event\n    trackEvent('dashboard_viewed', {\n      role: 'founder',\n      project_count: projects.length,\n      category: 'navigation',\n    })\n  }, [projects.length])\n\n  // Track tab switches\n  const handleTabChange = (newTab: string) => {\n    trackEvent('dashboard_tab_switched', {\n      from_tab: activeTab,\n      to_tab: newTab,\n      category: 'navigation',\n    })\n    setActiveTab(newTab)\n  }\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <DashboardLayout\n        breadcrumbs={[\n          { title: \"Founder Dashboard\", href: \"/founder-dashboard\" },\n        ]}\n        userType=\"founder\"\n      >\n        <div data-testid=\"dashboard-loading\" className=\"text-center py-16\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading your dashboard...</p>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  // Show error state\n  if (error) {\n    return (\n      <DashboardLayout\n        breadcrumbs={[\n          { title: \"Founder Dashboard\", href: \"/founder-dashboard\" },\n        ]}\n        userType=\"founder\"\n      >\n        <div className=\"text-center py-16 space-y-4\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto\" />\n          <div className=\"space-y-2\">\n            <h2 className=\"text-xl font-semibold\">Error Loading Projects</h2>\n            <p className=\"text-muted-foreground\">{error.message}</p>\n          </div>\n          <Button onClick={() => window.location.reload()}>\n            Try Again\n          </Button>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  // Show empty state if no projects - direct to Quick Start onboarding\n  if (projects.length === 0) {\n    return (\n      <DashboardLayout\n        breadcrumbs={[\n          { title: \"Founder Dashboard\", href: \"/founder-dashboard\" },\n        ]}\n        userType=\"founder\"\n      >\n        <div data-testid=\"dashboard\">\n          <EmptyState />\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  // Show normal dashboard with projects\n  return (\n    <DashboardLayout\n      breadcrumbs={[\n        { title: \"Founder Dashboard\", href: \"/founder-dashboard\" },\n      ]}\n      userType=\"founder\"\n    >\n      <Tabs value={activeTab} onValueChange={handleTabChange} className=\"space-y-6\" data-testid=\"dashboard\">\n        <div className=\"flex items-center justify-between\">\n          <TabsList className=\"grid w-full max-w-4xl grid-cols-6\">\n            <TabsTrigger value=\"overview\">\n              <Target className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Overview\n            </TabsTrigger>\n            <TabsTrigger value=\"canvases\">\n              <LayoutGrid className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Canvases\n            </TabsTrigger>\n            <TabsTrigger value=\"assumptions\">\n              <Map className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Assumption Map\n            </TabsTrigger>\n            <TabsTrigger value=\"hypotheses\">\n              <FlaskConical className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Hypotheses\n            </TabsTrigger>\n            <TabsTrigger value=\"experiments\">\n              <Beaker className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Experiments\n            </TabsTrigger>\n            <TabsTrigger value=\"evidence\">\n              <BookOpen className=\"h-4 w-4 mr-1.5 hidden sm:inline\" />\n              Evidence\n            </TabsTrigger>\n          </TabsList>\n\n          <div className=\"flex gap-2\">\n            <Link href=\"/onboarding/founder\" onClick={() => trackEvent('button_clicked', { button_name: 'new_project', location: 'founder_dashboard', category: 'ui_interaction' })}>\n              <Button>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                New Project\n              </Button>\n            </Link>\n          </div>\n        </div>\n\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          {/* Quick Stats */}\n          <QuickStats projectId={projectId} currentStage={currentStage} />\n\n          {/* Innovation Physics Signals - D-F-V visualization */}\n          {projectId && (\n            <InnovationPhysicsPanel\n              projectId={projectId}\n              variant=\"full\"\n              showEvidence={true}\n            />\n          )}\n\n          {/* Validation Journey Stage Selector */}\n          <StageSelector currentStage=\"validation\" className=\"mb-6\" />\n\n          {/* Gate Dashboard - Replace FitDashboard with GateDashboard */}\n          {projectId ? (\n            <GateDashboard\n              projectId={projectId}\n              stage={currentStage as any}\n              gateStatus={currentProject?.gateStatus || 'Pending'}\n              readinessScore={0} // Will be calculated by the component\n              evidenceCount={0} // Will be calculated by the component\n              experimentsCount={0} // Will be calculated by the component\n            />\n          ) : (\n            <FitDashboard projectId={projectId} />\n          )}\n\n          {/* AI Validation Results Summary */}\n          <ValidationResultsSummary projectId={projectId} />\n\n          {/* Bottom Grid with VPC Summary */}\n          <div className=\"grid gap-6 lg:grid-cols-3\">\n            {/* Value Proposition Canvas Summary */}\n            {projectId && (\n              <VPCSummaryCard\n                projectId={projectId}\n                onClick={() => router.push(`/project/${projectId}/analysis`)}\n              />\n            )}\n            <RecentActivity projectId={projectId} />\n            <NextSteps projectId={projectId} />\n          </div>\n        </TabsContent>\n\n        {/* CANVASES TAB - Value Proposition Canvas + Business Model Canvas */}\n        <TabsContent value=\"canvases\" className=\"space-y-6\">\n          <CanvasesGallery projectId={projectId} />\n        </TabsContent>\n\n        {/* ASSUMPTION MAP TAB - Strategyzer terminology */}\n        <TabsContent value=\"assumptions\" className=\"space-y-6\">\n          <AssumptionMap projectId={projectId} />\n        </TabsContent>\n\n        {/* HYPOTHESES TAB - Business hypotheses management */}\n        <TabsContent value=\"hypotheses\" className=\"space-y-6\">\n          <HypothesisManager />\n        </TabsContent>\n\n        {/* EXPERIMENT CARDS TAB - Strict Strategyzer format */}\n        <TabsContent value=\"experiments\" className=\"space-y-6\">\n          <ExperimentCardsGrid projectId={projectId} />\n        </TabsContent>\n\n        {/* EVIDENCE & LEARNINGS TAB - Combined view */}\n        <TabsContent value=\"evidence\" className=\"space-y-6\">\n          {/* Evidence Ledger */}\n          <EvidenceLedger />\n\n          {/* Learning Cards Summary (placeholder for now) */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <BookOpen className=\"h-5 w-5\" />\n                Learning Cards\n              </CardTitle>\n              <CardDescription>\n                Capture insights and decisions from your experiments\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <BookOpen className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p className=\"mb-4\">Learning cards will appear here after completing experiments.</p>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setActiveTab('experiments')}\n                >\n                  <Beaker className=\"h-4 w-4 mr-2\" />\n                  View Experiment Cards\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Dashboard AI Assistant - Floating Panel (controlled by feature flag) */}\n      {user && isAIAssistantEnabled && (\n        <DashboardAIAssistant\n          userId={user.id}\n          userRole=\"founder\"\n          projectId={projectId}\n        />\n      )}\n    </DashboardLayout>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/validation/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/pages/workflows.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/proxy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/services/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/tests/config/testConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/tests/mocks/untilAsyncMock.ts","messages":[{"ruleId":"import/no-anonymous-default-export","severity":1,"message":"Assign object to a variable before exporting as module default","line":10,"column":1,"nodeType":"ExportDefaultDeclaration","endLine":12,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export async function until<T>(callback: () => Promise<T>): Promise<[null, T] | [unknown, null]> {\n  try {\n    const result = await callback()\n    return [null, result]\n  } catch (error) {\n    return [error, null]\n  }\n}\n\nexport default {\n  until,\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/crewai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/evidence-explorer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/integrations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/jest.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/portfolio.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/chris/projects/app.startupai.site/frontend/src/types/validation-progress.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]